(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7107"],{HX3V:function(t,e,a){"use strict";var i=a("cYbY");a.n(i).a},cYbY:function(t,e,a){},"nPa+":function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),l=a.n(i),n=a("o6vM"),r={name:"ContractIndex",components:{DialogPaymentApply:function(){return a.e("chunk-0263").then(a.bind(null,"hLBp"))},DialogCreate:function(){return a.e("chunk-0069").then(a.bind(null,"oSGp"))},DrawerDetail:function(){return a.e("chunk-f04e").then(a.bind(null,"i+gp"))}},data:function(){return{dialogComponents:"",dialogTitle:"",dialogwidth:"",dialogVisible:!1,drawerComponents:"",drawer:!1,drawerTitle:"",drawerData:"",pageCurrent:1,pageTotal:1,pageSize:10,paymentBillListData:[],search:{paymentNumber:"",supplierId:"",datetime:["2020-04-10","2020-10-10"]},deleteData:void 0}},computed:{},mounted:function(){this.retrivePaymentBillList()},methods:{handleCurrentChange:function(t){console.log("当前页: "+t),this.pageCurrent=t,this.retrivePaymentBillList()},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageSize=t,this.retrivePaymentBillList()},retrivePaymentBillList:function(){var t=this;Object(n.b)(l()({startTime:this.search.datetime[0],endTime:this.search.datetime[1],page:this.pageCurrent,limit:this.pageSize},this.search)).then(function(e){console.log(e),t.paymentBillListData=e.data.list,t.pageTotal=e.data.totalRow}).catch(function(){})},searchReset:function(){this.search={contractNumber:"",supplierId:""},this.retrivePaymentBillList()},commitData:function(){this.$refs.child.createContact(),this.dialogVisible=!1},dialogPaymentApply:function(){this.dialogVisible=!0,this.dialogTitle="申请付款",this.dialogComponents="DialogPaymentApply",this.dialogwidth="50%"},dialogCreate:function(){this.dialogVisible=!0,this.dialogTitle="新建合同",this.dialogComponents="DialogCreate",this.dialogwidth="90%"},drawerDetail:function(t){this.drawer=!0,this.drawerComponents="DrawerDetail",console.log("drawerDetail",t),this.drawerData=t.paymentRecordId}}},o=(a("HX3V"),a("KHd+")),s=Object(o.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[t._m(0),t._v(" "),a("div",{staticClass:"ls-box"},[a("el-form",{ref:"form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"付款编号："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.search.paymentNumber,callback:function(e){t.$set(t.search,"paymentNumber",e)},expression:"search.paymentNumber"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"客户："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.search.supplierId,callback:function(e){t.$set(t.search,"supplierId",e)},expression:"search.supplierId"}})],1),t._v(" "),a("el-form-item",[a("span",[a("el-button",{attrs:{type:"primary"},on:{click:t.retrivePaymentBillList}},[t._v("查询")])],1),t._v(" "),a("span",[a("el-button",{on:{click:t.searchReset}},[t._v("重置")])],1)])],1),t._v(" "),a("el-table",{staticStyle:{margin:"20px 0 0 0"},attrs:{data:t.paymentBillListData,"header-cell-style":{background:"#F5F7FA",color:"#606266"},border:"",height:"80%"},on:{"selection-change":t.selectTable}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"paymentNumber",label:"付款编号",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.drawerDetail(e.row)}}},[t._v(t._s(e.row.paymentNumber))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"supplierId",label:"客户/承包商"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amountAdvanced",label:"预付金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"practicalRatio",label:"实付比例",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"practicaAdvanced",label:"实付金额",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"paymentTime",label:"实际付款时间",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"paymentType",label:"付款方式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"responsiblePerson",label:"经办人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1),t._v(" "),a("div",{staticClass:"ls-pagination"},[a("el-pagination",{attrs:{"current-page":t.pageCurrent,"page-sizes":[2,10,20],"page-size":t.pageSize,total:t.pageTotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,title:t.dialogTitle,width:t.dialogwidth},on:{"update:visible":function(e){t.dialogVisible=e}}},[a(t.dialogComponents,{ref:"child",tag:"component"}),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.commitData}},[t._v("确 定")])],1)],1),t._v(" "),a("el-drawer",{attrs:{title:t.drawerTitle,"with-header":!1,visible:t.drawer,"destroy-on-close":!0,size:"70%"},on:{"update:visible":function(e){t.drawer=e},open:function(e){t.drawerDetail()}}},[a(t.drawerComponents,{tag:"component",attrs:{"drawer-data":t.drawerData}})],1)],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ls-header"},[this._v("\n    付款账单\n    "),e("span",{staticClass:"grep"})])}],!1,null,"69d02edd",null);s.options.__file="Main.vue";e.default=s.exports},o6vM:function(t,e,a){"use strict";a.d(e,"b",function(){return l}),a.d(e,"a",function(){return n});var i=a("t3Un");function l(t){return Object(i.a)({url:"pmpContractPaymentRecord/queryList",method:"post",data:t})}function n(t){return Object(i.a)({url:"pmpContractPaymentRecord/queryById",method:"post",data:t})}}}]);