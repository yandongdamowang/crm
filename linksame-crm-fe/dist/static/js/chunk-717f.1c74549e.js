(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-717f"],{"1Jk/":function(e,t,a){"use strict";a.r(t);var l=a("QbLZ"),r=a.n(l),i=a("S/HW"),o={name:"ContractIndex",components:{DrawerDetail:function(){return a.e("chunk-57b8").then(a.bind(null,"RQT9"))}},data:function(){return{datetime:["2020-01-01","2020-05-29"],dialogComponents:"",dialogTitle:"",dialogwidth:"",dialogVisible:!1,drawerComponents:"",drawer:!1,drawerTitle:"",drawerData:"",pageCurrent:1,pageTotal:1,pageSize:10,dialogVisibleMilestone:!1,form:{contractId:1,receivableType:"",customerId:1,receivableAmount:void 0,remark:"",state:"1",paymentMethod:"支付收款",collectingCompany:"收款公司名",collectionBank:"收款开户行",collectionAccount:"收款账户",collectingTime:"",agent:"2",batchId:"批次号"},prepaymentBillListData:[],grep:"",search:{contractNumber:"",supplierId:""},deleteData:void 0}},computed:{},watch:{datetime:function(e){this.retrivePrepaymentBillList()}},mounted:function(){this.retrivePrepaymentBillList()},methods:{drawerStatus:function(e){console.log("drawerStatus",e),this.drawer=e,this.retrivePrepaymentBillList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageCurrent=e,this.retrivePrepaymentBillList()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.retrivePrepaymentBillList()},retrivePrepaymentBillList:function(){var e=this;Object(i.c)(r()({page:this.pageCurrent,limit:this.pageSize,collectingStarttime:this.datetime[0],collectingEndtime:this.datetime[1]},this.search)).then(function(t){console.log("rebateBillList",t),e.prepaymentBillListData=t.data.list,e.pageTotal=t.data.totalRow}).catch(function(){})},searchReset:function(){this.search={contractNumber:"",supplierId:""},this.retrivePrepaymentBillList()},createRebate:function(){this.dialogVisible=!0,void 0!=this.data&&(this.form={receivableRecordsId:this.data.receivableRecordsId,contractId:this.data.contractId,receivableType:this.data.receivableType,customerId:this.data.customerId,receivableAmount:parseInt(this.data.receivableAmount),remark:this.data.remark,state:this.data.state,paymentMethod:this.data.paymentMethod,collectingCompany:this.data.collectingCompany,collectionBank:this.data.collectionBank,collectionAccount:this.data.collectionAccount,collectingTime:this.data.collectingTime,agent:this.data.agent,batchId:this.data.batchId}),this.dialogTitle="申请付款",this.dialogwidth="50%"},commitData:function(){var e=this;console.log(this.form),Object(i.a)(r()({},this.form)).then(function(t){console.log(t),e.$message({type:"success",message:"添加成功!"}),e.$router.push("/contract/rebate")}).catch(function(e){console.log(e)}),this.dialogVisible=!1},drawerDetail:function(e){this.drawer=!0,this.drawerComponents="DrawerDetail",this.drawerData=e.receivableRecordsId}}},n=(a("lNmj"),a("KHd+")),s=Object(n.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[e._m(0),e._v(" "),a("div",{staticClass:"ls-box"},[a("el-form",{ref:"form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"客户："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.search.supplierId,callback:function(t){e.$set(e.search,"supplierId",t)},expression:"search.supplierId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.search.paymentNumber,callback:function(t){e.$set(e.search,"paymentNumber",t)},expression:"search.paymentNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回款时间："}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.datetime,callback:function(t){e.datetime=t},expression:"datetime"}})],1),e._v(" "),a("el-form-item",[a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.retrivePrepaymentBillList}},[e._v("查询")])],1),e._v(" "),a("span",[a("el-button",{on:{click:e.searchReset}},[e._v("重置")])],1)])],1),e._v(" "),a("el-form",{ref:"form",attrs:{inline:!0}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createRebate}},[e._v("新增回款")]),e._v(" "),a("el-button",[e._v("导出")]),e._v(" "),a("el-button",[a("i",{staticClass:"el-icon-refresh-right"})])],1),e._v(" "),a("el-table",{staticStyle:{margin:"20px 0 0 0"},attrs:{data:e.prepaymentBillListData,"header-cell-style":{background:"#F5F7FA",color:"#606266"},border:"",height:"75%"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receivableType",label:"款项类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.drawerDetail(t.row)}}},[e._v(e._s(t.row.receivableType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"collectingCompany",label:"客户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionAccount",label:"收款账户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionBank",label:"开户行",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"collectionNumber",label:"收款银行卡号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receivableAmount",label:"回款金额",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createdTime",label:"回款时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentMethod",label:"付款方式",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agent",label:"经办人",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"150"}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,"destroy-on-close":!0,title:e.dialogTitle,width:e.dialogwidth},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-divider",{attrs:{"content-position":"left"}},[e._v("账户信息")]),e._v(" "),a("el-form",{ref:"form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"收款账户："}},[e._v(e._s("机器人公司"))]),e._v(" "),a("el-form-item",{attrs:{label:"开户行："}},[e._v(e._s("中国银行"))]),e._v(" "),a("el-form-item",{attrs:{label:"收款账号："}},[e._v(e._s("44353401040012174"))])],1),e._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[e._v("回款信息")]),e._v(" "),a("el-form",{ref:"form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"款项："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.receivableType,callback:function(t){e.$set(e.form,"receivableType",t)},expression:"form.receivableType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.customerId,callback:function(t){e.$set(e.form,"customerId",t)},expression:"form.customerId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回款时间："}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.collectingTime,callback:function(t){e.$set(e.form,"collectingTime",t)},expression:"form.collectingTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回款金额："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.receivableAmount,callback:function(t){e.$set(e.form,"receivableAmount",e._n(t))},expression:"form.receivableAmount"}},[a("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.paymentMethod,callback:function(t){e.$set(e.form,"paymentMethod",t)},expression:"form.paymentMethod"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.agent,callback:function(t){e.$set(e.form,"agent",t)},expression:"form.agent"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.commitData}},[e._v("确 定")])],1)]),e._v(" "),a("el-drawer",{attrs:{title:e.drawerTitle,visible:e.drawer,"with-header":!1,"destroy-on-close":!0,size:"70%"},on:{"update:visible":function(t){e.drawer=t},open:function(t){e.drawerDetail()}}},[a("keep-alive",{attrs:{include:[]}},[a(e.drawerComponents,{tag:"component",attrs:{"drawer-data":e.drawerData},on:{drawerStatus:e.drawerStatus}})],1)],1),e._v(" "),a("div",{staticClass:"ls-pagination"},[a("el-pagination",{attrs:{"current-page":e.pageCurrent,"page-sizes":[2,10,20],"page-size":e.pageSize,total:e.pageTotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ls-header"},[this._v("\n    回款账单\n    "),t("div",{staticClass:"ls-header-r"})])}],!1,null,"61ae1086",null);s.options.__file="index.vue";t.default=s.exports},CjBF:function(e,t,a){},"S/HW":function(e,t,a){"use strict";a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"a",function(){return o});var l=a("t3Un");function r(e){return Object(l.a)({url:"pmpReceivableRecords/queryList",method:"post",data:e})}function i(e){return Object(l.a)({url:"pmpReceivableRecords/queryById",method:"post",data:e})}function o(e){return Object(l.a)({url:"pmpReceivableRecords/addOrUpdate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},lNmj:function(e,t,a){"use strict";var l=a("CjBF");a.n(l).a}}]);