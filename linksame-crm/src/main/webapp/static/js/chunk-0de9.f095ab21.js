(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0de9","chunk-204f","chunk-4e00","chunk-7fee","chunk-7feee","chunk-1df0","chunk-7feee2","chunk-1492"],{"+9th":function(t,e,i){"use strict";i.d(e,"k",function(){return s}),i.d(e,"a",function(){return n}),i.d(e,"d",function(){return l}),i.d(e,"e",function(){return o}),i.d(e,"g",function(){return c}),i.d(e,"h",function(){return r}),i.d(e,"b",function(){return d}),i.d(e,"f",function(){return u}),i.d(e,"c",function(){return m}),i.d(e,"j",function(){return h}),i.d(e,"i",function(){return p});var a=i("t3Un");function s(t){return Object(a.a)({url:"task/queryTaskList",method:"post",data:t})}function n(t){return Object(a.a)({url:"task/setTask",method:"post",data:t})}function l(t){return Object(a.a)({url:"task/deleteTask",method:"post",data:t})}function o(t){return Object(a.a)({url:"task/queryTaskInfo",method:"post",data:t})}function c(t){return Object(a.a)({url:"task/setTask",method:"post",data:t})}function r(t){return Object(a.a)({url:"task/saveTaskRelation",method:"post",data:t})}function d(t){return Object(a.a)({url:"taskLabel/setLabel",method:"post",data:t})}function u(t){return Object(a.a)({url:"taskLabel/setLabel",method:"post",data:t})}function m(t){return Object(a.a)({url:"taskLabel/deleteLabel",method:"post",data:t})}function h(t){return Object(a.a)({url:"taskLabel/getLabelList",method:"post",data:t})}function p(t){return Object(a.a)({url:"task/queryWorkTaskLog",method:"post",data:t})}},"+JiW":function(t,e,i){"use strict";var a=i("NGu6");i.n(a).a},"+NTD":function(t,e,i){"use strict";var a=i("mX3o"),s=i("EgJF"),n=i("vG5h"),l=i("6zBA"),o=i("ooHJ"),c=i("7Qib"),r={name:"RelativeReturnMoney",components:{CRMCreateView:s.default,CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-3043"),i.e("chunk-7fee")]).then(i.bind(null,"uMjE"))}},mixins:[a.a],props:{id:[String,Number],crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{list:[],fieldList:[],tableHeight:"250px",showFullDetail:!1,showFullCrmType:"receivables",showFullId:"",createCrmType:"receivables_plan",isCreate:!1,palnList:[],planFieldList:[],createActionInfo:{}}},computed:{},watch:{id:function(t){this.list=[],this.palnList=[],this.getList(),this.getPlanList()}},mounted:function(){this.planFieldList=[{prop:"num",width:"200",label:"期数"},{prop:"customerName",width:"200",label:"客户名称"},{prop:"contractNum",width:"200",label:"合同编号"},{prop:"money",width:"200",label:"计划回款金额"},{prop:"returnDate",width:"200",label:"计划回款日期"},{prop:"returnType",width:"200",label:"计划回款方式"},{prop:"remind",width:"200",label:"提前几日提醒"},{prop:"remark",width:"200",label:"备注"}],this.getPlanList(),this.fieldList=[{prop:"receivablesNum",width:"200",label:"回款编号"},{prop:"contractName",width:"200",label:"合同名称"},{prop:"contractMoney",width:"200",label:"合同金额"},{prop:"receivablesMoney",width:"200",label:"回款金额"},{prop:"planNum",width:"200",label:"期数"},{prop:"ownerUserName",width:"200",label:"负责人"},{prop:"checkStatus",width:"200",label:"状态"},{prop:"returnTime",width:"200",label:"回款日期"}],this.getList()},methods:{getPlanList:function(){var t=this;this.loading=!0,(0,{customer:n.s,contract:l.h}[this.crmType])(this.getParams()).then(function(e){t.loading=!1,t.palnList=e.data}).catch(function(){t.loading=!1})},getList:function(){var t=this;this.loading=!0,(0,{customer:n.r,contract:l.g}[this.crmType])(this.getParams()).then(function(e){t.loading=!1,t.list=e.data}).catch(function(){t.loading=!1})},getParams:function(){return"customer"===this.crmType?{customerId:this.id,pageType:0}:"contract"===this.crmType?{contractId:this.id,pageType:0}:{}},handleRowClick:function(t,e,i){this.showFullId=t.receivablesId,this.showFullCrmType="receivables",this.showFullDetail=!0},cellStyle:function(t){t.row,t.column,t.rowIndex;return 0==t.columnIndex?{color:"#3E84E9",textAlign:"center",cursor:"pointer"}:{textAlign:"center"}},planCellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},createClick:function(t){this.createActionInfo={type:"relative",crmType:this.crmType,data:{}},"money"==t?("contract"===this.crmType?(this.createActionInfo.data.customer=Object(c.k)(this.detail),this.createActionInfo.data.contract=Object(c.k)(this.detail)):"customer"===this.crmType&&(this.createActionInfo.data.customer=this.detail),this.createCrmType="receivables",this.isCreate=!0):"plan"==t&&("contract"===this.crmType?(this.createActionInfo.data.customer=Object(c.k)(this.detail),this.createActionInfo.data.contract=Object(c.k)(this.detail)):"customer"===this.crmType&&(this.createActionInfo.data.customer=this.detail),this.createCrmType="receivables_plan",this.isCreate=!0)},saveSuccess:function(){"receivables"==this.createCrmType?this.getList():this.getPlanList()},handleFile:function(t,e){var i=this;"edit"==t?(this.createActionInfo={type:"update",id:e.row.planId},this.createCrmType="receivables_plan",this.isCreate=!0):"delete"==t&&this.$confirm("您确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.e)({planIds:e.row.planId}).then(function(t){i.palnList.splice(e.$index,1),i.$message.success("删除成功")}).catch(function(){})}).catch(function(){i.$message({type:"info",message:"已取消操作"})})},fieldFormatter:function(t,e,i){return"checkStatus"===e.property?this.getStatusName(t.checkStatus):["contractMoney","receivablesMoney","money"].includes(e.property)?Object(c.j)(i):i},getStatusName:function(t){return 0==t?"待审核":1==t?"通过":2==t?"拒绝":3==t?"审核中":4==t?"撤回":5==t?"未提交":6==t?"已作废":""},headerRowStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},detailHandle:function(t){"delete"===t.type&&this.getList()}}},d=(i("qjqF"),i("ZrdR")),u=Object(d.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rc-cont"},[t.isSeas?t._e():i("flexbox",{staticClass:"rc-head",attrs:{direction:"row-reverse"}},[i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){t.createClick("plan")}}},[t._v("新建回款计划")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%",border:"1px solid #E6E6E6"},attrs:{data:t.palnList,height:t.tableHeight,"header-cell-style":t.headerRowStyle,"cell-style":t.planCellStyle,stripe:""}},[t._l(t.planFieldList,function(e,a){return i("el-table-column",{key:a,attrs:{prop:e.prop,label:e.label,formatter:t.fieldFormatter,"show-overflow-tooltip":""}})}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("flexbox",{attrs:{justify:"center"}},[i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("edit",e)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("delete",e)}}},[t._v("删除")])],1)]}}])})],2),t._v(" "),i("flexbox",{staticClass:"rc-head",staticStyle:{"margin-top":"15px"},attrs:{direction:"row-reverse"}},[t.isSeas?t._e():i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){t.createClick("money")}}},[t._v("新建回款")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%",border:"1px solid #E6E6E6"},attrs:{data:t.list,height:t.tableHeight,"header-cell-style":t.headerRowStyle,"cell-style":t.cellStyle,stripe:""},on:{"row-click":t.handleRowClick}},t._l(t.fieldList,function(e,a){return i("el-table-column",{key:a,attrs:{prop:e.prop,formatter:t.fieldFormatter,label:e.label,"show-overflow-tooltip":""}})})),t._v(" "),i("c-r-m-full-screen-detail",{attrs:{visible:t.showFullDetail,"crm-type":t.showFullCrmType,id:t.showFullId},on:{"update:visible":function(e){t.showFullDetail=e},handle:t.detailHandle}}),t._v(" "),t.isCreate?i("c-r-m-create-view",{attrs:{"crm-type":t.createCrmType,action:t.createActionInfo},on:{"save-success":t.saveSuccess,"hiden-view":function(e){t.isCreate=!1}}}):t._e()],1)},[],!1,null,"757d7c7d",null);u.options.__file="RelativeReturnMoney.vue";e.a=u.exports},"+jv/":function(t,e,i){"use strict";var a=i("Zo18");i.n(a).a},"/1tH":function(t,e,i){},"/U9q":function(t,e,i){"use strict";var a=i("mX3o"),s=i("EgJF"),n=i("vG5h"),l=i("UcQx"),o=i("mkuN"),c={name:"RelativeContacts",components:{CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-3043"),i.e("chunk-7fee")]).then(i.bind(null,"uMjE"))},CRMCreateView:s.default,CrmRelative:o.a},mixins:[a.a],props:{id:[String,Number],crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:"400px",showFullDetail:!1,isCreate:!1,contactsId:"",createActionInfo:{type:"relative",crmType:this.crmType,data:{}},showRelativeView:!1,selectionList:[]}},computed:{customerId:function(){return this.detail.customerId},canRelation:function(){return"business"==this.crmType}},watch:{id:function(t){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{checkRelativeInfos:function(t){var e=this;if(t.data.length>0){var i={businessId:this.id};i.contactsIds=t.data.map(function(t){return t.contactsId}).join(","),Object(l.l)(i).then(function(t){e.getDetail(),e.$message.success("操作成功")}).catch(function(){})}},unRelevanceHandleClick:function(){var t=this;0==this.selectionList.length?this.$message.error("请先勾选数据"):this.$confirm("确认取消关联?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={businessId:t.id};e.contactsIds=t.selectionList.map(function(t){return t.contactsId}).join(","),Object(l.t)(e).then(function(e){t.getDetail(),t.$message.success("操作成功")}).catch(function(){})}).catch(function(){t.$message.info("已取消操作")})},getFieldList:function(){this.fieldList.push({prop:"name",width:"200",label:"姓名"}),this.fieldList.push({prop:"mobile",width:"200",label:"手机"}),this.fieldList.push({prop:"post",width:"200",label:"职务"})},getDetail:function(){var t=this;this.loading=!0;var e={customer:n.o,business:l.g}[this.crmType],i={};i[this.crmType+"Id"]=this.id,e(i).then(function(e){0==t.fieldList.length&&t.getFieldList(),t.nopermission=!1,t.loading=!1,t.list=e.data.list}).catch(function(e){102==e.code&&(t.nopermission=!0),t.loading=!1})},handleRowClick:function(t,e,i){this.contactsId=t.contactsId,this.showFullDetail=!0},headerRowStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},cellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},createClick:function(){"customer"==this.crmType?this.createActionInfo.data.customer=this.detail:"business"==this.crmType&&(this.createActionInfo.data.customer=this.detail,this.createActionInfo.relativeData={businessId:this.detail.businessId}),this.isCreate=!0},createSaveSuccess:function(){this.canRelation?this.$refs.crmrelative.refreshList():this.getDetail()}}},r=(i("DMOp"),i("ZrdR")),d=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"empty",rawName:"v-empty",value:t.nopermission,expression:"nopermission"}],staticClass:"rc-cont",attrs:{"xs-empty-icon":"nopermission","xs-empty-text":"暂无权限"}},[t.isSeas?t._e():i("flexbox",{staticClass:"rc-head",attrs:{direction:"row-reverse"}},[i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){return t.createClick(e)}}},[t._v("新建联系人")]),t._v(" "),t.canRelation?i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){return t.unRelevanceHandleClick(e)}}},[t._v("解除关联")]):t._e(),t._v(" "),t.canRelation?i("el-popover",{staticStyle:{"margin-right":"20px"},attrs:{placement:"bottom",width:"700","popper-class":"no-padding-popover",trigger:"click"},model:{value:t.showRelativeView,callback:function(e){t.showRelativeView=e},expression:"showRelativeView"}},[i("crm-relative",{ref:"crmrelative",attrs:{show:t.showRelativeView,radio:!1,action:{type:"condition",data:{moduleType:"customer",customerId:t.customerId}},"selected-data":{contacts:t.list},"crm-type":"contacts"},on:{close:function(e){t.showRelativeView=!1},changeCheckout:t.checkRelativeInfos},model:{value:t.showRelativeView,callback:function(e){t.showRelativeView=e},expression:"showRelativeView"}}),t._v(" "),i("el-button",{staticClass:"rc-head-item",staticStyle:{"margin-right":"0"},attrs:{slot:"reference",type:"primary"},nativeOn:{click:function(e){t.showRelativeView=!0}},slot:"reference"},[t._v("关联")])],1):t._e()],1),t._v(" "),i("el-table",{staticStyle:{width:"100%",border:"1px solid #E6E6E6"},attrs:{data:t.list,height:t.tableHeight,"header-cell-style":t.headerRowStyle,"cell-style":t.cellStyle,stripe:""},on:{"row-click":t.handleRowClick,"selection-change":function(e){t.selectionList=e}}},[t.canRelation&&t.fieldList.length>0?i("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"selection",align:"center",width:"55"}}):t._e(),t._v(" "),t._l(t.fieldList,function(t,e){return i("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":""}})})],2),t._v(" "),i("c-r-m-full-screen-detail",{attrs:{visible:t.showFullDetail,id:t.contactsId,"crm-type":"contacts"},on:{"update:visible":function(e){t.showFullDetail=e}}}),t._v(" "),t.isCreate?i("c-r-m-create-view",{attrs:{action:t.createActionInfo,"crm-type":"contacts"},on:{"save-success":t.createSaveSuccess,"hiden-view":function(e){t.isCreate=!1}}}):t._e()],1)},[],!1,null,"7c95a0d3",null);d.options.__file="RelativeContacts.vue";e.a=d.exports},"/mOC":function(t,e,i){"use strict";var a=i("pjUd");i.n(a).a},"/oM9":function(t,e,i){},"/rQu":function(t,e,i){"use strict";var a=i("ZoTo");i.n(a).a},"/umX":function(t,e,i){"use strict";e.__esModule=!0;var a=function(t){return t&&t.__esModule?t:{default:t}}(i("9dlP"));e.default=function(t,e,i){return e in t?(0,a.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},"0GEW":function(t,e,i){"use strict";var a=i("gaN2");i.n(a).a},"0SZQ":function(t,e,i){},"0dCj":function(t,e,i){"use strict";var a=i("WAol");i.n(a).a},"1LOG":function(t,e,i){"use strict";var a=i("xXWd");i.n(a).a},"1Mp6":function(t,e,i){},"1RnH":function(t,e,i){"use strict";var a=i("bS4n"),s=i.n(a),n=i("+9th"),l=i("mkuN"),o=i("Er7M"),c=i("7Qib"),r=i("8t5x"),d={components:{CrmRelative:l.a,RelatedBusinessCell:o.a},props:{marginLeft:{type:String,default:"20px"},allData:{type:Object,default:function(){return{contacts:[],customer:[],business:[],contract:[]}}},isTask:{type:Boolean,default:!1},taskID:Number,alterable:{type:Boolean,default:!0},alterableColor:{type:String,default:"#999"}},data:function(){return{showTypes:["customer","contacts","business","contract"],showPopover:!1,relevanceAll:{customerIds:[],contractIds:[],contactsIds:[],businessIds:[]},relatedListData:{},showRelative:!1,showTaskRelative:!1}},computed:s()({},Object(r.b)(["crm"]),{showCRMPermission:function(){return this.crm}}),watch:{allData:function(){this.relatedListData=this.allData}},mounted:function(){this.relatedListData=this.allData},methods:{crmrelativeClose:function(){this.showPopover=!1},checkInfos:function(t){var e=this;this.showPopover=!1,this.relatedListData=t.data;var i=function(i){var a=t.data[i];e.relevanceAll[i+"Ids"]=a.map(function(t,e,a){return t[i+"Id"]})};for(var a in t.data)i(a);this.$emit("checkInfos",this.relevanceAll)},delRelevance:function(t,e,i){var a=this;this.$confirm("确认取消关联?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){var i={taskId:a.taskID},s=Object(c.k)(a.relatedListData);s[t].splice(e,1);for(var l=function(t){var e=a.showTypes[t],n=s[e]||[];i[e+"Ids"]=n.map(function(t){return t[e+"Id"]}).join(",")},o=0;o<a.showTypes.length;o++)l(o);Object(n.h)(i).then(function(i){a.relatedListData[t].splice(e,1),a.relatedListData=Object(c.k)(a.relatedListData),a.$message.success("关联取消成功")}).catch(function(){})}).catch(function(){a.$message.info("已取消操作")})},checkRelatedDetail:function(t,e){e.key=e[t+"Id"],this.$emit("checkRelatedDetail",t,e)}}},u=(i("VPPU"),i("ZrdR")),m=Object(u.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"related-business",style:{"margin-left":t.marginLeft}},[!t.isTask&&t.alterable?a("el-popover",{attrs:{placement:"bottom",width:"800","popper-class":"no-padding-popover",trigger:"click"},model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}},[t.showRelative?a("crm-relative",{ref:"crmrelative",attrs:{show:t.showPopover,radio:!1,"selected-data":t.relatedListData,"show-types":t.showTypes},on:{close:t.crmrelativeClose,changeCheckout:t.checkInfos}}):t._e(),t._v(" "),t.showCRMPermission?a("p",{staticClass:"add-file",attrs:{slot:"reference"},on:{click:function(e){t.showRelative=!0}},slot:"reference"},[a("img",{attrs:{src:i("AFlK"),alt:""}}),t._v("\n      关联业务\n    ")]):t._e()],1):t._e(),t._v(" "),t.alterable?t._e():a("p",{staticClass:"alterable-p",style:{color:t.alterableColor}},[t._v("关联业务")]),t._v(" "),t._l(t.relatedListData,function(e,i){return a("div",{key:i},t._l(e,function(e,s){return a("related-business-cell",{key:s,attrs:{data:e,"cell-index":s,type:i,"show-foot":t.isTask},on:{unbind:t.delRelevance,detail:function(a){t.checkRelatedDetail(i,e)}}})}))}),t._v(" "),t.isTask?a("el-popover",{attrs:{placement:"bottom",width:"800","popper-class":"no-padding-popover",trigger:"click"},model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}},[t.showTaskRelative?a("crm-relative",{ref:"crmrelative",attrs:{radio:!1,show:t.showPopover,"selected-data":t.relatedListData,"show-types":t.showTypes},on:{close:t.crmrelativeClose,changeCheckout:t.checkInfos}}):t._e(),t._v(" "),t.showCRMPermission?a("p",{staticClass:"add-file",attrs:{slot:"reference"},on:{click:function(e){t.showTaskRelative=!0}},slot:"reference"},[a("img",{attrs:{src:i("AFlK"),alt:""}}),t._v("\n      关联业务\n    ")]):t._e()],1):t._e()],2)},[],!1,null,"e9d30324",null);m.options.__file="relatedBusiness.vue";e.a=m.exports},"20cK":function(t,e,i){"use strict";var a=i("92/5");i.n(a).a},"22Mu":function(t,e,i){},"3yi6":function(t,e,i){"use strict";var a=i("7Qib"),s=i("KzkL"),n={name:"FollowRecordCell",components:{CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-fbe8"),i.e("chunk-3043"),i.e("chunk-4e00"),i.e("chunk-7feee2")]).then(i.bind(null,"uMjE"))}},props:{item:{type:Object,default:function(){return{}}},crmType:{type:String,default:""},index:[String,Number]},data:function(){return{showFullDetail:!1,relationID:"",relationCrmType:""}},computed:{},mounted:function(){},methods:{previewImg:function(t,e){this.$bus.emit("preview-image-bus",{index:e,data:t.map(function(t,e,i){return t.url=t.filePath,t})})},downloadFile:function(t){Object(a.b)({path:t.filePath,name:t.name})},handleCommand:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.p)({recordId:e.item.recordId}).then(function(i){e.$emit("on-handle",{type:t,data:{item:e.item,index:e.index}}),e.$message.success("操作成功")}).catch(function(){})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},checkRelationDetail:function(t,e){this.relationID=e,this.relationCrmType=t,this.showFullDetail=!0}}},l=(i("MEpo"),i("ZrdR")),o=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fl-c"},[a("flexbox",{staticClass:"fl-h"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:{img:t.item.userImg,realname:t.item.realname},expression:"{img: item.userImg, realname: item.realname}"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.item.userImg),expression:"$options.filters.filterUserLazyImg(item.userImg)",arg:"background-image"}],staticClass:"div-photo fl-h-img"}),t._v(" "),a("div",{staticClass:"fl-h-b"},[a("div",{staticClass:"fl-h-name"},[t._v(t._s(t.item.realname))]),t._v(" "),a("div",{staticClass:"fl-h-time"},[t._v(t._s(t.item.createTime))])]),t._v(" "),a("flexbox",{staticClass:"fl-h-mark"},[a("img",{staticClass:"fl-h-mark-img",attrs:{src:i("N0PQ")}}),t._v(" "),a("div",{staticClass:"fl-h-mark-name"},[t._v("跟进记录")])]),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("i",{staticClass:"el-icon-arrow-down el-icon-more",staticStyle:{color:"#CDCDCD","margin-left":"8px"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")])],1)],1)],1),t._v(" "),a("div",{staticClass:"fl-b"},[a("div",{staticClass:"fl-b-content"},[t._v(t._s(t.item.content))]),t._v(" "),t.item.img&&t.item.img.length>0?a("flexbox",{staticClass:"fl-b-images",attrs:{wrap:"wrap"}},t._l(t.item.img,function(e,i){return a("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.filePath,expression:"file.filePath",arg:"background-image"}],key:e.filePath,staticClass:"fl-b-img-item",on:{click:function(e){t.previewImg(t.item.img,i)}}})})):t._e(),t._v(" "),t.item.file&&t.item.file.length>0?a("div",{staticClass:"fl-b-files"},t._l(t.item.file,function(e,s){return a("flexbox",{key:s,staticClass:"cell"},[a("img",{staticClass:"cell-head",attrs:{src:i("6KEE")}}),t._v(" "),a("div",{staticClass:"cell-body"},[t._v(t._s(e.name)),a("span",{staticStyle:{color:"#ccc"}},[t._v("（"+t._s(e.size)+"）")])]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(i){t.downloadFile(e)}}},[t._v("下载")])],1)})):t._e(),t._v(" "),t.item.category||t.item.nextTime?a("div",{staticClass:"follow"},[t.item.category?a("span",{staticClass:"follow-info"},[t._v(t._s(t.item.category))]):t._e(),t._v(" "),t.item.nextTime?a("span",{staticClass:"follow-info"},[t._v(t._s(t.item.nextTime))]):t._e()]):t._e(),t._v(" "),t.item.contactsList&&t.item.contactsList.length>0?a("div",{staticClass:"fl-b-other"},[a("div",{staticClass:"fl-b-other-name"},[t._v("关联联系人")]),t._v(" "),a("div",t._l(t.item.contactsList,function(e,i){return a("flexbox",{key:i,staticClass:"cell",nativeOn:{click:function(i){t.checkRelationDetail("contacts",e.contactsId)}}},[a("i",{staticClass:"wukong wukong-contacts cell-head crm-type",style:{opacity:0==i?1:0}}),t._v(" "),a("div",{staticClass:"cell-body",staticStyle:{color:"#6394E5",cursor:"pointer"}},[t._v(t._s(e.name))])])}))]):t._e(),t._v(" "),t.item.businessList&&t.item.businessList.length>0?a("div",{staticClass:"fl-b-other"},[a("div",{staticClass:"fl-b-other-name"},[t._v("关联商机")]),t._v(" "),a("div",t._l(t.item.businessList,function(e,i){return a("flexbox",{key:i,staticClass:"cell",nativeOn:{click:function(i){t.checkRelationDetail("business",e.businessId)}}},[a("i",{staticClass:"wukong wukong-business cell-head crm-type",style:{opacity:0==i?1:0}}),t._v(" "),a("div",{staticClass:"cell-body",staticStyle:{color:"#6394E5",cursor:"pointer"}},[t._v(t._s(e.businessName))])])}))]):t._e(),t._v(" "),t._t("default")],2),t._v(" "),a("c-r-m-full-screen-detail",{attrs:{visible:t.showFullDetail,"crm-type":t.relationCrmType,id:t.relationID},on:{"update:visible":function(e){t.showFullDetail=e}}})],1)},[],!1,null,"6af54424",null);o.options.__file="FollowRecordCell.vue";e.a=o.exports},"4+0Q":function(t,e,i){"use strict";var a=i("bS4n"),s=i.n(a),n=i("8t5x"),l=i("7Qib");e.a={data:function(){return{}},props:{isSeas:{type:Boolean,default:!1}},computed:s()({},Object(n.b)(["crm"]),{canShowDetail:function(){return 0!==this.detailData.dataAuth&&(this.crm&&this.crm[this.crmType]&&this.crm[this.crmType].read)}}),watch:{id:function(){this.canShowDetail&&this.getDetial()}},mounted:function(){this.canShowDetail&&this.getDetial()},methods:{detailHeadHandle:function(t){"edit"===t.type?this.isCreate=!0:"delete"===t.type?this.hideView():"discard"===t.type&&this.getDetial(),this.$emit("handle",t)},moneyFormat:function(t){return Object(l.j)(t)}},deactivated:function(){}}},"4N2P":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlGM0QyMERERjE0RDExRTg4NTA4RTAyODY3MjZEQjAyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlGM0QyMERFRjE0RDExRTg4NTA4RTAyODY3MjZEQjAyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUYzRDIwREJGMTREMTFFODg1MDhFMDI4NjcyNkRCMDIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUYzRDIwRENGMTREMTFFODg1MDhFMDI4NjcyNkRCMDIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4fPYHOAAAAqElEQVR42mL8//8/AzUBEwOVAQsyZ/Xq1WQZEhoaSrQL2YB4IhC/BeJ3UDYbJV7uAmJVINYBYm0ou4loL2MBsVDDnkP5yUB8BYgryHWhEJJhDFC2MF1jmS4GHgbi/1DMgMTGhg8TY6ANENsCMSMBbAtVS5SXjxDhuyOUhOFhbN6jNFIYSc7LeIAtpcnGhgi91sS68Aix4QUER4kx0JaShM046EtsgAADAP5xJLZ2XNQ5AAAAAElFTkSuQmCC"},"4a3y":function(t,e,i){},"5j45":function(t,e,i){"use strict";var a=i("mX3o"),s=i("EgJF"),n=i("vG5h"),l=i("qbf4"),o=i("mkuN"),c=i("7Qib"),r={name:"RelativeBusiness",components:{CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-3043"),i.e("chunk-7fee")]).then(i.bind(null,"uMjE"))},CRMCreateView:s.default,CrmRelative:o.a},mixins:[a.a],props:{id:[String,Number],crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:"400px",showFullDetail:!1,isCreate:!1,businessId:"",createActionInfo:{type:"relative",crmType:this.crmType,data:{}},showRelativeView:!1,selectionList:[]}},computed:{customerId:function(){return this.detail.customerId},canRelation:function(){return"contacts"==this.crmType}},watch:{id:function(t){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{checkRelativeInfos:function(t){var e=this;if(t.data.length>0){var i={contactsId:this.id};i.businessIds=t.data.map(function(t){return t.businessId}).join(","),Object(l.l)(i).then(function(t){e.getDetail(),e.$message.success("操作成功")}).catch(function(){})}},unRelevanceHandleClick:function(){var t=this;0==this.selectionList.length?this.$message.error("请先勾选数据"):this.$confirm("确认取消关联?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={contactsId:t.id};e.businessIds=t.selectionList.map(function(t){return t.businessId}).join(","),Object(l.o)(e).then(function(e){t.getDetail(),t.$message.success("操作成功")}).catch(function(){})}).catch(function(){t.$message.info("已取消操作")})},getFieldList:function(){this.fieldList.push({prop:"businessName",width:"200",label:"商机名称"}),this.fieldList.push({prop:"money",width:"200",label:"商机金额"}),this.fieldList.push({prop:"customerName",width:"200",label:"客户名称"}),this.fieldList.push({prop:"typeName",width:"200",label:"商机状态组"}),this.fieldList.push({prop:"statusName",width:"200",label:"状态"})},getDetail:function(){var t=this;this.loading=!0;var e={contacts:l.g,customer:n.n}[this.crmType],i={};i[this.crmType+"Id"]=this.id,e(i).then(function(e){0==t.fieldList.length&&t.getFieldList(),t.nopermission=!1,t.loading=!1,t.list=e.data.list}).catch(function(e){102==e.code&&(t.nopermission=!0),t.loading=!1})},handleRowClick:function(t,e,i){this.businessId=t.businessId,this.showFullDetail=!0},headerRowStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},cellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},createClick:function(){"contacts"==this.crmType?(this.createActionInfo.data.customer=this.detail,this.createActionInfo.relativeData={contactsId:this.detail.contactsId}):"customer"==this.crmType&&(this.createActionInfo.data.customer=this.detail),this.isCreate=!0},createSaveSuccess:function(){this.canRelation?this.$refs.crmrelative.refreshList():this.getDetail()},fieldFormatter:function(t,e){return"money"==e.property?Object(c.j)(t[e.property]):t[e.property]||"--"}}},d=(i("yN8+"),i("ZrdR")),u=Object(d.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"empty",rawName:"v-empty",value:t.nopermission,expression:"nopermission"}],staticClass:"rc-cont",attrs:{"xs-empty-icon":"nopermission","xs-empty-text":"暂无权限"}},[t.isSeas?t._e():i("flexbox",{staticClass:"rc-head",attrs:{direction:"row-reverse"}},[i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){return t.createClick(e)}}},[t._v("新建商机")]),t._v(" "),t.canRelation?i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){return t.unRelevanceHandleClick(e)}}},[t._v("解除关联")]):t._e(),t._v(" "),t.canRelation?i("el-popover",{staticStyle:{"margin-right":"20px"},attrs:{placement:"bottom",width:"700","popper-class":"no-padding-popover",trigger:"click"},model:{value:t.showRelativeView,callback:function(e){t.showRelativeView=e},expression:"showRelativeView"}},[i("crm-relative",{ref:"crmrelative",attrs:{show:t.showRelativeView,radio:!1,action:{type:"condition",data:{moduleType:"customer",customerId:t.customerId}},"selected-data":{business:t.list},"crm-type":"business"},on:{close:function(e){t.showRelativeView=!1},changeCheckout:t.checkRelativeInfos},model:{value:t.showRelativeView,callback:function(e){t.showRelativeView=e},expression:"showRelativeView"}}),t._v(" "),i("el-button",{staticClass:"rc-head-item",staticStyle:{"margin-right":"0"},attrs:{slot:"reference",type:"primary"},nativeOn:{click:function(e){t.showRelativeView=!0}},slot:"reference"},[t._v("关联")])],1):t._e()],1),t._v(" "),i("el-table",{staticStyle:{width:"100%",border:"1px solid #E6E6E6"},attrs:{data:t.list,height:t.tableHeight,"header-cell-style":t.headerRowStyle,"cell-style":t.cellStyle,stripe:""},on:{"row-click":t.handleRowClick,"selection-change":function(e){t.selectionList=e}}},[t.canRelation&&t.fieldList.length>0?i("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"selection",align:"center",width:"55"}}):t._e(),t._v(" "),t._l(t.fieldList,function(e,a){return i("el-table-column",{key:a,attrs:{prop:e.prop,label:e.label,formatter:t.fieldFormatter,"show-overflow-tooltip":""}})})],2),t._v(" "),i("c-r-m-full-screen-detail",{attrs:{visible:t.showFullDetail,id:t.businessId,"crm-type":"business"},on:{"update:visible":function(e){t.showFullDetail=e}}}),t._v(" "),t.isCreate?i("c-r-m-create-view",{attrs:{action:t.createActionInfo,"crm-type":"business"},on:{"save-success":t.createSaveSuccess,"hiden-view":function(e){t.isCreate=!1}}}):t._e()],1)},[],!1,null,"0ea70315",null);u.options.__file="RelativeBusiness.vue";e.a=u.exports},"5tqf":function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"a",function(){return n}),i.d(e,"c",function(){return l});var a=i("t3Un");function s(t){return Object(a.a)({url:"workTrash/queryList",method:"post",data:t})}function n(t){return Object(a.a)({url:"workTrash/deleteTask",method:"post",data:t})}function l(t){return Object(a.a)({url:"workTrash/restore",method:"post",data:t})}},"6VWi":function(t,e,i){"use strict";var a=i("A7Iu");i.n(a).a},"6c4z":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkwNDUyQzM4RDA4RjExRTlCNUMwOUE5Qjg2MzE4OEJBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjkwNDUyQzM5RDA4RjExRTlCNUMwOUE5Qjg2MzE4OEJBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTA0NTJDMzZEMDhGMTFFOUI1QzA5QTlCODYzMTg4QkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTA0NTJDMzdEMDhGMTFFOUI1QzA5QTlCODYzMTg4QkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4+RvAGAAAAtElEQVR42mL8//8/AzUBC4yxevVqqhjIhMY/AsT/icB/gbiWGAOtgZiRCGwPxObEGEh1L8MAPw6vHiY6UtDAR6jXqObCUS9jgONA7E+plx8DsRRU/i8UE23gRyyJWRaIn6GpkwfiJeR6WRmKYUAGiPcC8SFyDVQB4v1ArAr1OsiwSUA8i5hYxgZ2QguE3UD8HYhnQg3Em2yOQiMAGwgE4oVIkTaJmHRoQ4RLFw6KrEc2AAgwAPPKNqVpQ13PAAAAAElFTkSuQmCC"},"6mJg":function(t,e,i){},"6yV+":function(t,e,i){"use strict";var a=i("YAPy");i.n(a).a},"7z+D":function(t,e,i){"use strict";var a=i("ExMk"),s=i("Ew9n"),n=i("EP+0"),l=i("3biH"),o=i("Er7M"),c=i("O1Uw"),r=i("7Qib"),d={name:"ExamineDetail",components:{SlideView:s.a,CreateSections:n.a,ExamineInfo:l.a,RelatedBusinessCell:o.a,CRMFullScreenDetail:function(){return i.e("chunk-1492").then(i.bind(null,"uMjE"))},FileCell:c.a},props:{id:[String,Number],noListenerClass:{type:Array,default:function(){return["list-box"]}}},data:function(){return{loading:!1,categoryId:"",type:"",detail:{examineRecordId:""},list:[],categoryName:"",fileList:[],imgList:[],travelList:[],travelField:[{prop:"vehicle",label:"交通工具"},{prop:"trip",label:"单程往返"},{prop:"startAddress",label:"出发城市"},{prop:"endAddress",label:"目的城市"},{prop:"startTime",label:"开始时间"},{prop:"endTime",label:"结束时间"},{prop:"duration",label:"时长（天）"},{prop:"description",label:"备注"}],expensesField:[{prop:"startAddress",label:"出发城市"},{prop:"endAddress",label:"目的城市"},{prop:"startTime",label:"开始时间"},{prop:"endTime",label:"结束时间"},{prop:"traffic",label:"交通费（元）"},{prop:"stay",label:"住宿费（元）"},{prop:"diet",label:"餐饮费（元）"},{prop:"other",label:"其他费用（元）"},{prop:"description",label:"费用明细描述"}],relatedID:"",relatedCRMType:"",showRelatedDetail:!1}},computed:{relatedListData:function(){return{contacts:this.detail.contactsList||[],customer:this.detail.customerList||[],business:this.detail.businessList||[],contract:this.detail.contractList||[]}}},watch:{id:function(t){this.getDetial()}},mounted:function(){this.getDetial()},methods:{getBaseInfo:function(){var t=this;this.loading=!0,Object(a.a)({examineId:this.id,isDetail:1}).then(function(e){t.list=e.data,t.loading=!1}).catch(function(){t.loading=!1})},getDetial:function(){var t=this;this.loading=!0,Object(a.j)({examineId:this.id}).then(function(e){t.loading=!1,t.categoryId=e.data.categoryId,t.type=e.data.type,t.getBaseInfo(),t.detail=e.data,t.categoryName=t.detail.category,t.fileList=t.detail.file,t.imgList=t.detail.img,t.travelList=t.detail.examineTravelList}).catch(function(){t.loading=!1})},hideView:function(){this.$emit("hide-view")},checkRelatedDetail:function(t,e){this.relatedID=e[t+"Id"],this.relatedCRMType=t,this.showRelatedDetail=!0},handleFile:function(t,e,i){if("preview"===t){if(e&&e.length>0){var a=e.map(function(t){return t.url=t.filePath,t});this.$bus.emit("preview-image-bus",{index:i,data:a})}}else"download"===t&&Object(r.b)({path:e.filePath,name:e.name})},imgZoom:function(t,e){this.$bus.emit("preview-image-bus",{index:e,data:t.map(function(t,e,i){return{url:t.filePath,name:t.name}})})},downloadFile:function(t){Object(r.b)({path:t.filePath,name:t.name})},examineHandle:function(t){this.$store.dispatch("GetOAMessageNum","examine"),this.$emit("on-examine-handle",t)}}},u=(i("aoc0"),i("ZrdR")),m=Object(u.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":["workbench-main-container"],"no-listener-class":t.noListenerClass,"body-style":{padding:"10px 30px",height:"100%"}},on:{"side-close":t.hideView}},[a("flexbox",{staticStyle:{height:"100%"},attrs:{orient:"vertical"}},[a("flexbox",{staticClass:"detail-header"},[a("div",{staticClass:"header-name"},[t._v(t._s(t.categoryName))]),t._v(" "),a("img",{staticClass:"header-close",attrs:{src:i("cjwK")},on:{click:t.hideView}})]),t._v(" "),a("div",{staticClass:"detail-body"},[a("flexbox",{attrs:{gutter:0,align:"stretch",wrap:"wrap"}},t._l(t.list,function(e,s){return"examine_cause"!==e.formType&&"business_cause"!==e.formType?a("flexbox-item",{key:s,staticClass:"b-cell",attrs:{span:.5}},["checkbox"===e.formType?a("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[a("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"b-cell-value"},[a("flexbox",{staticStyle:{padding:"0px 10px 10px 0px"},attrs:{gutter:0,wrap:"wrap"}},t._l(e.value,function(e,i){return a("div",{key:i},[t._v("\n                  "+t._s(e)+"  \n                ")])}))],1)]):"file"===e.formType?a("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[a("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"b-cell-value"},t._l(e.value,function(s,n){return a("flexbox",{key:n,staticClass:"f-item"},[a("img",{staticClass:"f-img",attrs:{src:i("6KEE")}}),t._v(" "),a("div",{staticClass:"f-name"},[t._v(t._s(s.name.length>15?s.name.substring(0,15)+"...":s.name+"("+s.size+")"))]),t._v(" "),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("preview",e.value,n)}}},[t._v("预览")]),t._v(" "),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(e){t.handleFile("download",s,n)}}},[t._v("下载")])],1)}))]):a("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[a("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"b-cell-value"},[t._v(t._s(e.value))])])],1):t._e()})),t._v(" "),t.fileList.length>0||t.imgList.length>0?a("div",{staticClass:"accessory"},[a("div",{staticClass:"upload-img-box"},t._l(t.imgList,function(e,i){return a("div",{key:i,staticClass:"img-list",on:{click:function(e){t.imgZoom(t.imgList,i)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.filePath,expression:"imgItem.filePath"}],key:e.filePath})])})),t._v(" "),a("div",{staticClass:"accessory-box"},t._l(t.fileList,function(t,e){return a("file-cell",{key:e,attrs:{data:t,"cell-index":e}})}))]):t._e(),t._v(" "),t.type&&3==t.type&&t.travelList&&t.travelList.length>0?a("create-sections",{staticClass:"create-sections",attrs:{title:"行程"}},[a("el-table",{staticStyle:{"font-size":"13px"},attrs:{data:t.travelList,align:"center","header-align":"center",stripe:""}},t._l(t.travelField,function(e,i){return a("el-table-column",{key:i,attrs:{prop:e.prop,label:e.label,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"header",fn:function(e){return[a("div",{staticClass:"table-head-name"},[t._v(t._s(e.column.label))])]}}])})}))],1):t._e(),t._v(" "),t.type&&5==t.type&&t.travelList&&t.travelList.length>0?a("create-sections",{staticClass:"create-sections",attrs:{title:"报销"}},[a("el-table",{staticStyle:{"font-size":"13px"},attrs:{data:t.travelList,align:"center","header-align":"center",stripe:""}},[t._l(t.expensesField,function(e,i){return a("el-table-column",{key:i,attrs:{prop:e.prop,label:e.label,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"header",fn:function(e){return[a("div",{staticClass:"table-head-name"},[t._v(t._s(e.column.label))])]}}])})}),t._v(" "),a("el-table-column",{attrs:{label:"发票",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("flexbox",{attrs:{justify:"center"}},[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("preview",e.row.img,0)}}},[t._v(t._s(e.row.img.length)+"张")])],1)]}}])})],2)],1):t._e(),t._v(" "),t.relatedListData.contacts.length>0||t.relatedListData.customer.length>0||t.relatedListData.business.length>0||t.relatedListData.contract.length>0?a("create-sections",{staticClass:"create-sections",attrs:{title:"关联业务"}},[a("div",{staticClass:"related-business create-sections-content"},t._l(t.relatedListData,function(e,i){return a("div",{key:i},t._l(e,function(e,s){return a("related-business-cell",{key:s,attrs:{data:e,"cell-index":s,type:i,"show-foot":!1},nativeOn:{click:function(a){t.checkRelatedDetail(i,e)}}})}))}))]):t._e(),t._v(" "),a("create-sections",{staticClass:"create-sections",attrs:{title:"审核信息"}},[a("examine-info",{staticClass:"create-sections-content",attrs:{id:t.id,"record-id":t.detail.examineRecordId,"examine-type":"oa_examine"},on:{"on-handle":t.examineHandle}})],1)],1)],1),t._v(" "),a("c-r-m-full-screen-detail",{attrs:{visible:t.showRelatedDetail,"crm-type":t.relatedCRMType,id:t.relatedID},on:{"update:visible":function(e){t.showRelatedDetail=e}}})],1)},[],!1,null,"81c16166",null);m.options.__file="examineDetail.vue";e.a=m.exports},"8DbX":function(t,e,i){"use strict";var a=i("mX3o"),s=i("2qvR"),n=i("KzkL"),l={name:"RelativeHandle",components:{},mixins:[a.a],props:{id:[String,Number],detail:{type:Object,default:function(){return{}}},crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1}},data:function(){return{list:[]}},computed:{},watch:{id:function(t){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var t=this;this.loading=!0,Object(n.i)({types:s.a[this.crmType],actionId:this.id}).then(function(e){t.loading=!1,t.list=e.data.map(function(t){return t.createTime=new Date(t.createTime).getTime(),t})}).catch(function(){t.loading=!1})}}},o=(i("TG2k"),i("ZrdR")),c=Object(o.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"empty",rawName:"v-empty",value:t.list,expression:"list"}],staticClass:"rc-cont",staticStyle:{"padding-right":"250px","min-height":"500px"}},t._l(t.list,function(e,a){return i("flexbox",{key:a,staticClass:"ha-cont",attrs:{align:"stretch",justify:"flex-start"}},[i("div",{staticClass:"ha-week"},[t._v(t._s(t._f("filterTimestampToFormatTime")(e.createTime,"MM-DD dddd")))]),t._v(" "),i("div",{staticClass:"ha-circle"}),t._v(" "),i("div",{staticClass:"ha-time"},[t._v(t._s(t._f("filterTimestampToFormatTime")(e.createTime,"H:mm")))]),t._v(" "),i("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.img),expression:"$options.filters.filterUserLazyImg(item.img)",arg:"background-image"}],staticClass:"div-photo ha-img"}),t._v(" "),i("div",{staticClass:"ha-name"},[t._v(t._s(e.realname))]),t._v(" "),i("div",{staticClass:"ha-content"},t._l(e.content,function(e,a){return i("p",{key:a},[t._v(t._s(e))])})),t._v(" "),i("div",{staticClass:"ha-line"})])}))},[],!1,null,"095c09a9",null);c.options.__file="RelativeHandle.vue";e.a=c.exports},"8GZb":function(t,e,i){"use strict";var a=i("F/D6"),s={name:"TaskCell",components:{},props:{data:Object,dataIndex:Number,dataSection:Number},data:function(){return{}},mounted:function(){},methods:{taskOverClick:function(t){Object(a.j)({taskId:t.taskId,status:t.checked?5:1}).then(function(t){}).catch(function(){t.checked=!1})},rowFun:function(t){this.$emit("on-handle",{type:"view",data:{item:this.data,index:this.dataIndex,section:this.dataSection}})}}},n=(i("cSWN"),i("ZrdR")),l=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"taskRow",staticClass:"list",style:{"border-left-color":1==t.data.priority?"#8bb5f0":2==t.data.priority?"#FF9668":3==t.data.priority?"#ED6363":"transparent"},on:{click:function(e){t.rowFun(t.data)}}},[i("div",{ref:"listLeft",staticClass:"list-left"},[i("div",{class:t.data.checked?"title title-active":"title",on:{click:function(t){t.stopPropagation()}}},[i("el-checkbox",{on:{change:function(e){t.taskOverClick(t.data)}},model:{value:t.data.checked,callback:function(e){t.$set(t.data,"checked",e)},expression:"data.checked"}})],1),t._v(" "),i("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"task-tooltip tooltip-change-border"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",[t._v(t._s(t.data.name))])]),t._v(" "),i("span",{ref:"itemSpan",class:t.data.checked?"item-name-active":"item-name"},[t._v("\n        "+t._s(t.data.name)+"\n      ")])])],1),t._v(" "),i("div",{staticClass:"list-right"},[t.data.labelList?i("div",{staticClass:"tag-box"},[t.data.labelList.length<=2?t._l(t.data.labelList,function(e,a){return i("div",{key:a,staticClass:"item-label"},[i("span",{staticClass:"k-name",style:{background:e.color}},[t._v(t._s(e.labelName))])])}):[i("span",{staticClass:"k-name",style:{background:t.data.labelList[0].color}},[t._v(t._s(t.data.labelList[0].labelName))]),t._v(" "),i("span",{staticClass:"k-name",style:{background:t.data.labelList[1].color}},[t._v(t._s(t.data.labelList[1].labelName))]),t._v(" "),i("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"tooltip-change-border task-tooltip"}},[i("div",{staticClass:"tooltip-content",staticStyle:{margin:"10px 10px 10px 0"},attrs:{slot:"content"},slot:"content"},t._l(t.data.labelList,function(e,a){return i("div",{key:a,staticClass:"item-label",staticStyle:{display:"inline-block","margin-right":"10px"}},[a>=2?i("span",{staticClass:"k-name",staticStyle:{"border-radius":"3px",color:"#FFF",padding:"3px 10px"},style:{background:e.color?e.color:"#ccc"}},[t._v(t._s(e.labelName))]):t._e()])})),t._v(" "),i("span",{staticClass:"color-label-more"},[i("i",[t._v("...")])])])]],2):t._e(),t._v(" "),i("div",{staticClass:"img-group"},[t.data.relationCount?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-relevance"}),t._v(" "),i("span",[t._v(t._s(t.data.relationCount))])]):t._e(),t._v(" "),t.data.childAllCount>0?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-sub-task"}),t._v(" "),i("span",[t._v(t._s(t.data.childWCCount)+"/"+t._s(t.data.childAllCount))])]):t._e(),t._v(" "),t.data.fileCount?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-file"}),t._v(" "),i("span",[t._v(t._s(t.data.fileCount))])]):t._e(),t._v(" "),t.data.commentCount?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-comment-task"}),t._v(" "),i("span",[t._v(t._s(t.data.commentCount))])]):t._e(),t._v(" "),t.data.stopTime?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-time-task",style:{color:1!=t.data.isEnd||t.data.checked?"#999":"red"}}),t._v(" "),i("span",{style:{color:1!=t.data.isEnd||t.data.checked?"#999":"red"}},[t._v(t._s(t._f("moment")(new Date(t.data.stopTime).getTime(),"MM-DD"))+" 截止")])]):t._e()]),t._v(" "),i("div",{staticClass:"item-own-box"},[t.data.mainUser&&t.data.mainUser.id?i("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",[t._v(t._s(t.data.mainUser.realname))])]),t._v(" "),i("div",{directives:[{name:"photo",rawName:"v-photo",value:t.data.mainUser,expression:"data.mainUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.data.mainUser.img),expression:"$options.filters.filterUserLazyImg(data.mainUser.img)",arg:"background-image"}],key:t.data.mainUser.img,staticClass:"div-photo"})]):t._e()],1)])])},[],!1,null,"251080a0",null);l.options.__file="taskCell.vue";e.a=l.exports},"8KPp":function(t,e,i){"use strict";var a=i("rerW"),s=i.n(a),n=i("Qldq"),l=i("Iae0"),o=i("KzkL"),c={name:"JournalLog",components:{JournalCell:l.a,CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-3043"),i.e("chunk-7fee")]).then(i.bind(null,"uMjE"))},NewDialog:function(){return i.e("chunk-dfa3").then(i.bind(null,"kFvY"))}},props:{id:[String,Number],crmType:{type:String,default:""}},data:function(){return{loading:!1,loadMoreLoading:!0,isPost:!1,page:1,list:[],rowID:"",showFullDetail:!1,detailCRMType:"",showNewDialog:!1,formData:{},dialogTitle:"",imgFileList:[],accessoryFileList:[],newLoading:!1}},computed:{},watch:{id:function(t){this.refreshList()}},mounted:function(){var t=this,e=document.getElementById("follow-log-content");e.onscroll=function(){var i=e.scrollTop+e.clientHeight-e.scrollHeight;Math.abs(i)<10&&1==t.loadMoreLoading&&(t.isPost?t.loadMoreLoading=!1:(t.isPost=!0,t.page++,t.getList()))},this.getList()},activated:function(){},deactivated:function(){},methods:{getList:function(){var t=this;this.loading=!0;var e={page:this.page,limit:10};e[this.crmType+"Ids"]=this.id,Object(o.n)(e).then(function(e){t.list=t.list.concat(e.data.list),e.data.list.length<10?t.loadMoreLoading=!1:t.loadMoreLoading=!0,t.loading=!1,t.isPost=!1}).catch(function(){t.isPost=!1,t.loading=!1})},refreshList:function(){this.page=1,this.list=[],this.getList()},jourecallCellHandle:function(t){var e=this;if("edit"==t.type){var i=t.data.item;if(this.showNewDialog=!0,this.dialogTitle="编辑日志",this.formData=i,this.imgFileList=[],i.imgList){var a=!0,l=!1,o=void 0;try{for(var c,r=s()(i.imgList);!(a=(c=r.next()).done);a=!0){var d=c.value;d.url=d.filePath,this.imgFileList.push(d)}}catch(t){l=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(l)throw o}}}if(this.accessoryFileList=[],i.fileList){var u=!0,m=!1,h=void 0;try{for(var p,v=s()(i.fileList);!(u=(p=v.next()).done);u=!0){var f=p.value;f.url=f.filePath,this.accessoryFileList.push(f)}}catch(t){m=!0,h=t}finally{try{!u&&v.return&&v.return()}finally{if(m)throw h}}}this.formData.depData=i.sendStructList?i.sendStructList:[],this.formData.sentWhoList=i.sendUserList?i.sendUserList:[]}else"delete"==t.type?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.b)({logId:t.data.item.logId}).then(function(i){for(var a in e.$message({type:"success",message:"删除成功!"}),e.list)if(e.list[a].logId==t.data.item.logId){e.list.splice(a,1);break}})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):"related-detail"==t.type&&(this.rowID=t.data.item.key,this.detailCRMType=t.data.type,this.showFullDetail=!0)},submitBtn:function(t,e,i,a){var l=this;this.newLoading=!0,console.log(a,"==relevanceAll==");var o=[],c=[],r=[];if(this.formData.depData){var d=!0,u=!1,m=void 0;try{for(var h,p=s()(this.formData.depData);!(d=(h=p.next()).done);d=!0){var v=h.value;r.push(v.id)}}catch(t){u=!0,m=t}finally{try{!d&&p.return&&p.return()}finally{if(u)throw m}}}var f=[];if(this.formData.sentWhoList){var g=!0,b=!1,y=void 0;try{for(var k,w=s()(this.formData.sentWhoList);!(g=(k=w.next()).done);g=!0){var C=k.value;f.push(C.id)}}catch(t){b=!0,y=t}finally{try{!g&&w.return&&w.return()}finally{if(b)throw y}}}var I=!0,A=!1,x=void 0;try{for(var D,T=s()(this.imgFileList);!(I=(D=T.next()).done);I=!0){var R=D.value;o.push(R.fileId)}}catch(t){A=!0,x=t}finally{try{!I&&T.return&&T.return()}finally{if(A)throw x}}var E=!0,M=!1,N=void 0;try{for(var _,L=s()(this.accessoryFileList);!(E=(_=L.next()).done);E=!0){var j=_.value;c.push(j.fileId)}}catch(t){M=!0,N=t}finally{try{!E&&L.return&&L.return()}finally{if(M)throw N}}var S={};S=a||{};var O={logId:this.formData.logId,categoryId:t,content:this.formData.content,tomorrow:this.formData.tomorrow,question:this.formData.question,file:c.concat(o),sendUserIds:f.join(","),sendStructureIds:r.join(","),customerIds:S.customerIds.join(","),contactsIds:S.contactsIds.join(","),businessIds:S.businessIds.join(","),contractIds:S.contractIds.join(",")};Object(n.c)(O).then(function(t){l.refreshList(),l.showNewDialog=!1,l.$message.success("编辑成功"),l.newLoading=!1}).catch(function(){l.newLoading=!1,l.$message.error("编辑失败")})}}},r=(i("nXBW"),i("ZrdR")),d=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{directives:[{name:"empty",rawName:"v-empty",value:0===t.list.length,expression:"list.length === 0"}]},[i("div",{staticClass:"log-items"},[t._l(t.list,function(e,a){return i("journal-cell",{key:a,staticClass:"list-cell",attrs:{data:e},on:{"on-handle":t.jourecallCellHandle}})}),t._v(" "),i("div",{staticClass:"load"},[i("el-button",{attrs:{loading:t.loadMoreLoading,type:"text"}},[t._v(t._s(t.loadMoreLoading?"加载更多":"没有更多了"))])],1)],2)]),t._v(" "),i("c-r-m-full-screen-detail",{attrs:{visible:t.showFullDetail,"crm-type":t.detailCRMType,id:t.rowID},on:{"update:visible":function(e){t.showFullDetail=e}}}),t._v(" "),t.showNewDialog?i("new-dialog",{attrs:{"form-data":t.formData,"dialog-title":t.dialogTitle,"img-file-list":t.imgFileList,"accessory-file-list":t.accessoryFileList,"new-loading":t.newLoading},on:{close:function(e){t.showNewDialog=!1},submitBtn:t.submitBtn}}):t._e()],1)},[],!1,null,"7a3a2bbc",null);d.options.__file="JournalLog.vue";e.a=d.exports},"92/5":function(t,e,i){},"9zJZ":function(t,e,i){"use strict";var a=i("DYJf");i.n(a).a},A7Iu:function(t,e,i){},Ad61:function(t,e,i){"use strict";var a=i("Exeu");i.n(a).a},BKBN:function(t,e,i){"use strict";var a=i("4a3y");i.n(a).a},BuGm:function(t,e,i){"use strict";i.r(e);var a=i("omC7"),s=i.n(a),n=i("rerW"),l=i.n(n),o=i("Dh/N"),c=i("1RnH"),r=i("0hym"),d=i("7Qib"),u={components:{relatedBusiness:c.a,XhUser:r.a},props:{formData:{type:Object,default:function(){return{color:""}}},text:{type:String,default:"创建日程"},appendToBody:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,i,a){t.formData.startTime&&t.formData.endTime&&Object(d.e)(t.formData.startTime)>=Object(d.e)(t.formData.endTime)&&a(new Error("开始时间必须小于结束时间")),a()};return{zIndex:Object(d.h)(),formList:[{label:"主题",field:"title",type:"color"},{label:"开始时间",field:"startTime",type:"time"},{label:"结束时间",field:"endTime",type:"time"},{label:"参与人",field:"ownerUserIds",type:"participant"},{label:"备注",field:"remark",type:"textarea",width:"100%"}],options:[{value:0,label:"无"},{value:1,label:"准时提醒"},{value:2,label:"5分钟前"},{value:3,label:"15分钟前"},{value:4,label:"30分钟前"},{value:5,label:"一个小时前"},{value:6,label:"二个小时前"},{value:7,label:"一天前"},{value:8,label:"二天前"},{value:9,label:"一周前"}],fileList:[],loading:!1,colorList:["#3E8EF7","#11C06C","#0BB2D4","#EB6709","#FF4C52","#526069","#9262F4"],rules:{title:[{required:!0,message:"主题不能为空",trigger:"blur"},{max:50,message:"主题长度最多为50个字符",trigger:"blur"}],startTime:[{required:!0,message:"开始时间不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],endTime:[{required:!0,message:"结束时间不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]},relevanceAll:{},allData:{},colleaguesList:[]}},created:function(){},mounted:function(){this.appendToBody&&document.body.appendChild(this.$el),this.allData.business=this.formData.businessList?this.formData.businessList:[],this.allData.contacts=this.formData.contactsList?this.formData.contactsList:[],this.allData.contract=this.formData.contractList?this.formData.contractList:[],this.allData.customer=this.formData.customerList?this.formData.customerList:[],this.formData.ownerList&&(this.colleaguesList=[].concat(this.formData.ownerList)),"创建日程"==this.text&&this.$set(this.formData,"color","#3E8EF7")},beforeDestroy:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{close:function(){1==this.$route.query.routerKey?this.$router.go(-1):this.$emit("closeDialog")},checkInfos:function(t){this.relevanceAll=t},onSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.loading=!0;var i=t.formData,a=[],n=!0,c=!1,r=void 0;try{for(var d,u=l()(t.colleaguesList);!(n=(d=u.next()).done);n=!0){var m=d.value;a.push(m.userId)}}catch(t){c=!0,r=t}finally{try{!n&&u.return&&u.return()}finally{if(c)throw r}}if("创建日程"==t.text)Object(o.a)({title:i.title,startTime:i.startTime,endTime:i.endTime,ownerUserIds:a.join(","),remark:i.remark,color:i.color,customerIds:t.relevanceAll.customerIds?t.relevanceAll.customerIds.join(","):[],contactsIds:t.relevanceAll.contactsIds?t.relevanceAll.contactsIds.join(","):[],businessIds:t.relevanceAll.businessIds?t.relevanceAll.businessIds.join(","):[],contractIds:t.relevanceAll.contractIds?t.relevanceAll.contractIds.join(","):[]}).then(function(e){1==t.$route.query.routerKey?t.$router.push("schedule"):t.$emit("onSubmit"),t.loading=!1}).catch(function(){t.loading=!1});else{var h={customerIds:[],contractIds:[],contactsIds:[],businessIds:[]};if(t.allData.customer){var p=!0,v=!1,f=void 0;try{for(var g,b=l()(t.allData.customer);!(p=(g=b.next()).done);p=!0){var y=g.value;h.customerIds.push(y.customerId)}}catch(t){v=!0,f=t}finally{try{!p&&b.return&&b.return()}finally{if(v)throw f}}}if(t.allData.contract){var k=!0,w=!1,C=void 0;try{for(var I,A=l()(t.allData.contract);!(k=(I=A.next()).done);k=!0){var x=I.value;h.contractIds.push(x.contractId)}}catch(t){w=!0,C=t}finally{try{!k&&A.return&&A.return()}finally{if(w)throw C}}}if(t.allData.contacts){var D=!0,T=!1,R=void 0;try{for(var E,M=l()(t.allData.contacts);!(D=(E=M.next()).done);D=!0){var N=E.value;h.contactsIds.push(N.contactsId)}}catch(t){T=!0,R=t}finally{try{!D&&M.return&&M.return()}finally{if(T)throw R}}}if(t.allData.business){var _=!0,L=!1,j=void 0;try{for(var S,O=l()(t.allData.business);!(_=(S=O.next()).done);_=!0){var B=S.value;h.businessIds.push(B.businessId)}}catch(t){L=!0,j=t}finally{try{!_&&O.return&&O.return()}finally{if(L)throw j}}}var G="{}"==s()(t.relevanceAll)?h:t.relevanceAll;Object(o.c)({eventId:i.eventId,title:i.title,startTime:i.startTime,endTime:i.endTime,ownerUserIds:a.join(","),remark:i.remark,color:i.color,customerIds:G.customerIds.join(","),contactsIds:G.contactsIds.join(","),businessIds:G.businessIds.join(","),contractIds:G.contractIds.join(",")}).then(function(e){t.$emit("onSubmit"),t.loading=!1}).catch(function(){t.loading=!1})}})},httpRequest:function(t){this.fileList.push(t.file)},onRemove:function(t){for(var e in this.fileList)this.fileList[e].uid==t.uid&&this.fileList.splice(e,1)},changeColor:function(t){this.$set(this.formData,"color",t)},changeCheckout:function(t){this.colleaguesList=t.data},selectDelect:function(t,e){this.$refs.xhuser[0].cancelCheckItem(t),this.colleaguesList.splice(e,1)}}},m=(i("ycXd"),i("ZrdR")),h=Object(m.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-schedule",style:{"z-index":t.zIndex}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"add-schedule"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"text"},[t._v(t._s(t.text))]),t._v(" "),a("img",{staticClass:"el-icon-close rt",attrs:{src:i("cjwK"),alt:""},on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules}},t._l(t.formList,function(e,i){return a("el-form-item",{key:i,class:"el-form-item-"+e.field,style:{width:e.width},attrs:{prop:e.field,label:e.label}},["time"==e.type?[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}})]:"textarea"==e.type?[a("el-input",{attrs:{autosize:{minRows:6},type:"textarea",placeholder:"请输入内容"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}})]:"participant"==e.type?[a("el-popover",{attrs:{placement:"bottom-end",width:"280",trigger:"click"}},[a("xh-user",{ref:"xhuser",refInFor:!0,attrs:{"selected-data":t.colleaguesList},on:{changeCheckout:t.changeCheckout}}),t._v(" "),a("div",{staticClass:"select-box",attrs:{slot:"reference"},slot:"reference"},[t._l(t.colleaguesList,function(e,i){return a("span",{key:i,staticClass:"select-box-span"},[t._v("\n                  "+t._s(e.realname)+"\n                  "),a("span",{staticClass:"el-icon-close",on:{click:function(a){a.stopPropagation(),t.selectDelect(e,i)}}})])}),t._v(" "),a("span",{staticClass:"el-icon-plus"})],2)],1)]:"select"==e.type?[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))]:"color"==e.type?[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}},[a("i",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[a("span",{staticClass:"bg-color",style:{background:t.formData.color}})])]),t._v(" "),a("div",{staticClass:"color-box"},t._l(t.colorList,function(e,i){return a("span",{key:i,style:{background:e},on:{click:function(i){t.changeColor(e)}}})}))]:a("el-input",{model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}})],2)})),t._v(" "),a("related-business",{attrs:{"all-data":t.allData},on:{checkInfos:t.checkInfos}})],1),t._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.close}},[t._v("取消")])],1)])])},[],!1,null,"6f2becb0",null);h.options.__file="createSchedule.vue";e.default=h.exports},"C+sD":function(t,e,i){"use strict";var a=i("mX3o"),s=i("KTTK"),n={name:"RelativeFiles",components:{},mixins:[a.a],props:{id:[String,Number],detail:{type:Object,default:function(){return{}}},crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1}},data:function(){return{list:[],fieldList:[],tableHeight:"400px",editDialog:!1,editForm:{name:"",data:{}}}},computed:{},watch:{id:function(t){this.list=[],this.getDetail()}},mounted:function(){this.fieldList.push({prop:"name",width:"200",label:"附件名称"}),this.fieldList.push({prop:"size",width:"200",label:"附件大小"}),this.fieldList.push({prop:"createUserName",width:"200",label:"上传人"}),this.fieldList.push({prop:"createTime",width:"200",label:"上传时间"}),this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var t=this;this.loading=!0,Object(s.c)({batchId:this.detail.batchId}).then(function(e){t.loading=!1,t.list=e.data}).catch(function(){t.loading=!1})},addFile:function(){document.getElementById("file").click()},uploadFile:function(t){for(var e=this,i=t.target.files,a=0;a<i.length;a++){var n=i[a],l={};(l={}).batchId=this.detail.batchId,l.file=n,Object(s.d)(l).then(function(t){e.getDetail()}).catch(function(){})}t.target.value=""},handleRowClick:function(t,e,i){},handleFile:function(t,e){var i=this;if("preview"===t){var a=this.list.map(function(t){return t.url=t.filePath,t});this.$bus.emit("preview-image-bus",{index:e.$index,data:a})}else"delete"===t?this.$confirm("您确定要删除该文件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)({id:e.row.fileId}).then(function(t){i.list.splice(e.$index,1),i.$message.success("操作成功")}).catch(function(){})}).catch(function(){i.$message({type:"info",message:"已取消操作"})}):(this.editForm.data=e,this.editForm.name=e.row.name,this.editDialog=!0)},confirmEdit:function(){var t=this;this.editForm.name&&Object(s.f)({fileId:this.editForm.data.row.fileId,name:this.editForm.name}).then(function(e){t.$message.success("编辑成功"),t.editDialog=!1,t.list[t.editForm.data.$index].name=t.editForm.name}).catch(function(){})},headerRowStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},cellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}}}},l=(i("rJFE"),i("ZrdR")),o=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rc-cont"},[t.isSeas?t._e():i("flexbox",{staticClass:"rc-head",attrs:{direction:"row-reverse"}},[i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){return t.addFile(e)}}},[t._v("上传附件")]),t._v(" "),i("input",{staticClass:"rc-head-file",attrs:{id:"file",type:"file",accept:"*/*",multiple:""},on:{change:t.uploadFile}})],1),t._v(" "),i("el-table",{staticStyle:{width:"100%",border:"1px solid #E6E6E6"},attrs:{data:t.list,height:t.tableHeight,"header-cell-style":t.headerRowStyle,"cell-style":t.cellStyle,align:"center","header-align":"center",stripe:""},on:{"row-click":t.handleRowClick}},[t._l(t.fieldList,function(t,e){return i("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":""}})}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("flexbox",{attrs:{justify:"center"}},[i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("preview",e)}}},[t._v("预览")]),t._v(" "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("edit",e)}}},[t._v("重命名")]),t._v(" "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("delete",e)}}},[t._v("删除")])],1)]}}])})],2),t._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,visible:t.editDialog,title:"编辑",width:"30%"},on:{"update:visible":function(e){t.editDialog=e}}},[i("el-form",{attrs:{model:t.editForm}},[i("el-form-item",{attrs:{label:"新名称","label-width":"100"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editDialog=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmEdit}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"cab1085c",null);o.options.__file="RelativeFiles.vue";e.a=o.exports},CZJm:function(t,e,i){},DMOp:function(t,e,i){"use strict";var a=i("m6j2");i.n(a).a},DUlf:function(t,e,i){"use strict";var a=i("mX3o"),s=i("eOzp"),n=i("vG5h"),l=i("UcQx"),o=i("6zBA"),c={name:"RelativeTeam",components:{TeamsHandle:s.a},mixins:[a.a],props:{id:[String,Number],detail:{type:Object,default:function(){return{}}},crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1}},data:function(){return{list:[],fieldList:[],tableHeight:"400px",teamsDialogShow:!1,handleType:1,editPermissionShow:!1,selectionList:[]}},computed:{},watch:{id:function(t){this.list=[],this.getDetail()}},mounted:function(){this.fieldList.push({prop:"realname",width:"200",label:"姓名"}),this.fieldList.push({prop:"name",width:"200",label:"职位"}),this.fieldList.push({prop:"groupRole",width:"200",label:"团队角色"}),this.fieldList.push({prop:"power",width:"200",label:"权限"}),this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var t=this;this.loading=!0;var e={customer:n.B,business:l.r,contract:o.o}[this.crmType],i={};i[this.crmType+"Id"]=this.id,e(i).then(function(e){t.loading=!1,t.list=e.data}).catch(function(){t.loading=!1})},handleSelectionChange:function(t){this.selectionList=t},handleClick:function(t){var e=this;"add"==t?this.teamsDialogShow=!0:0==this.selectionList.length?this.$message.error("请勾选需要操作的团队成员"):"edit"==t?this.editPermissionShow=!0:"remove"==t&&this.$confirm("此操作将移除这些团队成员是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.selectionList.map(function(t,e,i){return t.id}),i={customer:n.z,contract:o.m,business:l.n}[e.crmType],a={ids:e.id,memberIds:t.join(",")};e.loading=!0,i(a).then(function(t){e.$message({type:"success",message:"操作成功"}),e.loading=!1,e.getDetail()}).catch(function(){e.loading=!1})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleCallBack:function(t){this.getDetail()},handleEditConfirm:function(){var t=this,e=this.selectionList.map(function(t,e,i){return t.id});this.loading=!0,(0,{customer:n.D,business:l.u,contract:o.q}[this.crmType])({ids:this.id,memberIds:e.join(","),power:this.handleType}).then(function(e){t.editPermissionShow=!1,t.$message({type:"success",message:"操作成功"}),t.loading=!1,t.getDetail()}).catch(function(){t.loading=!1})},handleSelectable:function(t,e){return"负责人权限"!=t.power},handleRowClick:function(t,e,i){},headerRowStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},cellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}}}},r=(i("6VWi"),i("ZrdR")),d=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rc-cont"},[t.isSeas?t._e():i("flexbox",{staticClass:"rc-head",attrs:{direction:"row-reverse"}},[i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){t.handleClick("remove")}}},[t._v("移除")]),t._v(" "),i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){t.handleClick("edit")}}},[t._v("编辑")]),t._v(" "),i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){t.handleClick("add")}}},[t._v("添加团队成员")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%",border:"1px solid #E6E6E6"},attrs:{data:t.list,height:t.tableHeight,"header-cell-style":t.headerRowStyle,"cell-style":t.cellStyle,stripe:""},on:{"row-click":t.handleRowClick,"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{selectable:t.handleSelectable,"show-overflow-tooltip":"",type:"selection",align:"center",width:"55"}}),t._v(" "),t._l(t.fieldList,function(t,e){return i("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":""}})})],2),t._v(" "),i("teams-handle",{attrs:{"crm-type":t.crmType,"selection-list":[t.detail],"dialog-visible":t.teamsDialogShow,title:"添加团队成员"},on:{"update:dialogVisible":function(e){t.teamsDialogShow=e},handle:t.handleCallBack}}),t._v(" "),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.editPermissionShow,"append-to-body":!0,title:"编辑权限",width:"400px"},on:{"update:visible":function(e){t.editPermissionShow=e}}},[i("div",{staticClass:"handle-box"},[i("flexbox",{staticClass:"handle-item"},[i("div",{staticClass:"handle-item-name"},[t._v("权限：")]),t._v(" "),i("el-radio-group",{model:{value:t.handleType,callback:function(e){t.handleType=e},expression:"handleType"}},[i("el-radio",{attrs:{label:1}},[t._v("只读")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("读写")])],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){t.editPermissionShow=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.handleEditConfirm(e)}}},[t._v("保存")])],1)])],1)},[],!1,null,"6e6089a8",null);d.options.__file="RelativeTeam.vue";e.a=d.exports},DYJf:function(t,e,i){},DcnZ:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhDRDcyQTY3RTE2RTExRThCRTI2OUUxNDM4MTM1RjMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhDRDcyQTY4RTE2RTExRThCRTI2OUUxNDM4MTM1RjMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OENENzJBNjVFMTZFMTFFOEJFMjY5RTE0MzgxMzVGMzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OENENzJBNjZFMTZFMTFFOEJFMjY5RTE0MzgxMzVGMzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6YLrWcAAAAYklEQVR42mL8//8/AzUBEwOVwaiBg9BAlrNnz9LEhZ5A/AyKPdHUkCTHeObMGQaogCRU0XMglkLSRJIctjBkxOMjgnIwA1OA+AUQPwXiZDSFJMnBvEw1wDhaOIwaSDoACDAAtBYiKbAuMEoAAAAASUVORK5CYII="},"Dh/N":function(t,e,i){"use strict";i.d(e,"d",function(){return s}),i.d(e,"a",function(){return n}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return o});var a=i("t3Un");function s(t){return Object(a.a)({url:"OaEvent/queryList",method:"post",data:t})}function n(t){return Object(a.a)({url:"OaEvent/add",method:"post",data:t})}function l(t){return Object(a.a)({url:"OaEvent/delete",method:"post",data:t})}function o(t){return Object(a.a)({url:"OaEvent/update",method:"post",data:t})}},E1kK:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ5MTYzRjI3MzRGRDExRTk4NDdGQUY2RkVBMTMwNEExIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ5MTYzRjI4MzRGRDExRTk4NDdGQUY2RkVBMTMwNEExIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDkxNjNGMjUzNEZEMTFFOTg0N0ZBRjZGRUExMzA0QTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDkxNjNGMjYzNEZEMTFFOTg0N0ZBRjZGRUExMzA0QTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6adB8hAAACPElEQVR42uyZT0hUURTGf06DouRiBEGhWVipFbYQEQxr5WKCIghaFBm0qWCgQqHGhW4EQYr+kq4EKXERSSVBVOBGRi2CiLLCIUUYq4U0Rf4j0qZzvWO0mKFnvfHdqffBeW+493D5OPd839zLy4qHAtnAeYl6iQLMwieJHokzXnmckziFmfAluC145HEE83HMY+B2J0OBhwyBS9Qlajq8ljPLq+FAA+T/pUnMxKDvEow9TVNF7SCpoNZQa6Vt6/NttNs/WMsVk3NiSoam3dby2h+4FV2zSrli+rfElIaWcMX0E3NfYOQujL+A6JgeK/QbVtHRMFwNwuYq2FAGi990fJhY44r+jmRvGxwMwfwMFG+C1jt6LhqB8G1488RhMbXchFsXIR6H4Xtyz22G/k6JDj1fWgl7joN/Czy67uDWD/fD13mp4kaYkr680QpLi3pMxegQdJyG7btga42DYroS1O+9J2CwL/kheWEWHnbDzv3SAo8dquh0VL+VgCZfpc6LPNM5GeGjWU7a04pPTkW0cFIhO0f3q2NEtyUEEhY7ChyF3PW/VFBKWFqlf89+Fne4YDNRdXu0ih37ICdPi+Sl+GnwMlTUyliuJn1IvLXusM5VFmalQ+KhgLXM5etyo1zMfKszfEVEVbhW1O0v13Mf30NRCVw7Ce/e2kzULqzz6gqPP4f7XQb8habC9yUY6IXXI4Yf81QrrJKkexX574nGMoBnTBHtyQCiXcqeziaOBuozjs8wgisfxFp+CDAAqMqYye0jOX4AAAAASUVORK5CYII="},EXVB:function(t,e,i){},EhR4:function(t,e,i){},Ew9n:function(t,e,i){"use strict";var a=i("7Qib"),s={name:"SlideView",components:{},props:{bodyStyle:{type:Object,default:function(){return{padding:0}}},listenerIDs:{type:Array,default:function(){return[]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return[]}},appendToBody:{type:Boolean,default:!1}},data:function(){return{zIndex:Object(a.h)()}},computed:{},watch:{},mounted:function(){var t=this;this.appendToBody&&document.body.appendChild(this.$el),this.listenerIDs.forEach(function(e){document.getElementById(e)&&document.getElementById(e).addEventListener("click",t.handleDocumentClick,!1)})},beforeDestroy:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{handleDocumentClick:function(t){var e=!0;this.noListenerIDs.forEach(function(i){document.getElementById(i)&&document.getElementById(i).contains(t.target)&&(e=!1)}),this.noListenerClass.forEach(function(i){var a=document.getElementsByClassName(i);if(a&&e)for(var s=0;s<a.length;s++){if(a[s].contains(t.target)){e=!1;break}}}),document.getElementById("slide")&&document.getElementById("slide").contains(t.target)&&(e=!1),e&&this.$emit("side-close")},afterEnter:function(){this.$emit("afterEnter")}}},n=(i("0GEW"),i("ZrdR")),l=Object(n.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"slide-fade"},on:{"after-enter":this.afterEnter}},[e("el-card",{ref:"slide",staticClass:"slide-detail-card-container",style:{"z-index":this.zIndex},attrs:{id:"slide","body-style":this.bodyStyle}},[this._t("default")],2)],1)},[],!1,null,"0f708744",null);l.options.__file="SlideView.vue";e.a=l.exports},Exeu:function(t,e,i){},F03V:function(t,e,i){"use strict";var a=i("/umX"),s=i.n(a),n=i("bS4n"),l=i.n(n),o=i("8t5x"),c=i("5tgW"),r=i("vG5h"),d=i("qbf4"),u=i("UcQx"),m=i("6zBA"),h=i("ooHJ"),p=i("YrMO"),v=i("QY39"),f=i("V47a"),g=i("ZfAJ"),b={name:"CRMDetailHead",components:{TransferHandle:v.a,AllocHandle:f.a,DealStatusHandle:g.a},props:{id:[String,Number],crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}},headDetails:{type:Array,default:function(){return[]}}},data:function(){return{moreTypes:[],transferDialogShow:!1,allocDialogShow:!1,dealStatusShow:!1}},computed:l()({},Object(o.b)(["crm","CRMConfig"]),{crmIcon:function(){return"customer"===this.crmType?i("xEAD"):"leads"===this.crmType?i("tJsa"):"business"===this.crmType?i("b66W"):"contacts"===this.crmType?i("lY9J"):"contract"===this.crmType?i("zKg5"):"receivables"===this.crmType?i("E1kK"):"product"===this.crmType?i("tmLs"):""},name:function(){return"receivables"===this.crmType?this.detail.number:"customer"===this.crmType?this.detail.customerName:"business"===this.crmType?this.detail.businessName:this.detail.name},showTransfer:function(){return"receivables"!==this.crmType&&"product"!==this.crmType&&!this.isSeas&&this.crm[this.crmType].transfer},showEdit:function(){return!this.isSeas&&this.crm[this.crmType].update},showCancel:function(){return"contract"===this.crmType&&(!!this.crm.contract.discard&&1===this.detail.checkStatus)}}),watch:{isSeas:function(){this.moreTypes=this.getSelectionHandleItemsInfo()}},mounted:function(){this.moreTypes=this.getSelectionHandleItemsInfo()},methods:{handleTypeClick:function(t){var e=this;if("edit"==t)this.$emit("handle",{type:"edit"});else if("transfer"==t)this.transferDialogShow=!0;else if("transform"==t||"put_seas"==t||"delete"==t||"lock"==t||"unlock"==t||"start"==t||"disable"==t||"get"==t||"discard"==t){var i="";"transform"==t?i="确定将这些线索转换为客户吗?":"put_seas"==t?i="确定转移到公海吗?":"delete"==t?i="确定要删除这些数据吗?":"lock"==t?i="确定要锁定这些客户吗？锁定后将不会掉入公海。":"unlock"==t?i="确定要解锁这些客户吗？":"start"==t?i="确定要上架这些产品吗?":"disable"==t?i="确定要下架这些产品吗?":"get"==t?i="确定要领取该客户吗?":"discard"==t&&(i="确定要作废此合同吗?",this.detail.receivablesCount&&(i="合同下有相关回款,确定要作废吗?")),this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.confirmHandle(t)}).catch(function(){e.$message({type:"info",message:"已取消操作"})})}else"alloc"==t?this.allocDialogShow=!0:"deal_status"==t&&(this.dealStatusShow=!0)},confirmHandle:function(t){var e=this;if("lock"===t||"unlock"===t)Object(r.i)({isLock:"lock"===t?"1":"0",ids:this.id}).then(function(i){e.$message({type:"success",message:"操作成功"}),e.$emit("handle",{type:t})}).catch(function(){});else if("put_seas"===t)Object(r.m)({ids:this.id}).then(function(i){e.$message({type:"success",message:"操作成功"}),e.$emit("handle",{type:t})}).catch(function(){});else if("transform"===t)Object(c.n)({leadsIds:this.id}).then(function(i){e.$message({type:"success",message:"转化成功"}),e.$emit("handle",{type:t})}).catch(function(){});else if("discard"===t)Object(m.a)({contractId:this.id}).then(function(i){e.$message.success("合同作废成功"),e.$emit("handle",{type:t})}).catch(function(){});else if("start"===t||"disable"===t)Object(p.i)({ids:this.id,status:"start"===t?"1":"0"}).then(function(i){e.$message({type:"success",message:"操作成功"}),e.$emit("handle",{type:t})}).catch(function(){});else if("delete"===t){(0,{leads:c.a,customer:r.b,contacts:d.a,business:u.b,contract:m.b,receivables:h.a}[this.crmType])(s()({},this.crmType+"Ids",this.id)).then(function(i){e.$message({type:"success",message:"删除成功"}),e.$emit("handle",{type:t})}).catch(function(){})}else"get"===t&&Object(r.u)({ids:this.id}).then(function(i){e.$message({type:"success",message:"操作成功"}),e.$emit("handle",{type:t})}).catch(function(){})},hideView:function(){this.$emit("close")},handleCallBack:function(t){this.$emit("handle",{type:t.type})},getSelectionHandleItemsInfo:function(){var t={transfer:{name:"转移",type:"transfer",icon:i("W1y5")},transform:{name:"转化为客户",type:"transform",icon:i("rvIm")},delete:{name:"删除",type:"delete",icon:i("NKOo")},put_seas:{name:"放入公海",type:"put_seas",icon:i("tmjI")},lock:{name:"锁定",type:"lock",icon:i("lYrD")},unlock:{name:"解锁",type:"unlock",icon:i("4N2P")},alloc:{name:"分配",type:"alloc",icon:i("aQEv")},get:{name:"领取",type:"get",icon:i("lF6w")},start:{name:"上架",type:"start",icon:i("yTN1")},disable:{name:"下架",type:"disable",icon:i("disj")},deal_status:{name:"更改成交状态",type:"deal_status",icon:i("6c4z")}};return"leads"==this.crmType?this.forSelectionHandleItems(t,["transform","delete"]):"customer"==this.crmType?this.isSeas?this.forSelectionHandleItems(t,["alloc","get","delete"]):this.forSelectionHandleItems(t,["put_seas","deal_status","lock","unlock","delete"]):"contacts"==this.crmType?this.forSelectionHandleItems(t,["delete"]):"business"==this.crmType?this.forSelectionHandleItems(t,["delete"]):"contract"==this.crmType?this.forSelectionHandleItems(t,["delete"]):"receivables"==this.crmType?this.forSelectionHandleItems(t,["delete"]):"product"==this.crmType?this.forSelectionHandleItems(t,["start","disable"]):void 0},forSelectionHandleItems:function(t,e){for(var i=[],a=0;a<e.length;a++)i.push(t[e[a]]);return i},whetherTypeShowByPermision:function(t){if("transfer"==t)return this.crm[this.crmType].transfer;if("transform"==t)return this.crm[this.crmType].transform;if("export"==t)return this.isSeas?this.crm.pool.excelexport:this.crm[this.crmType].excelexport;if("delete"==t){if("contract"===this.crmType){if(6===this.detail.checkStatus)return 1===this.detail.isAdmin;this.crm[this.crmType].delete}return this.crm[this.crmType].delete}return"put_seas"==t?this.crm[this.crmType].putinpool:"lock"==t||"unlock"==t?this.crm[this.crmType].lock&&1==this.CRMConfig.customerConfig:"add_user"==t||"delete_user"==t?this.crm[this.crmType].teamsave:"alloc"==t?this.crm.pool.distribute:"get"==t?this.crm.pool.receive:"start"==t||"disable"==t?this.crm[this.crmType].status:"deal_status"!=t||this.crm[this.crmType].dealStatus}}},y=(i("vc0M"),i("ZrdR")),k=Object(y.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("flexbox",{staticClass:"t-section"},[a("img",{staticClass:"t-img",attrs:{src:t.crmIcon}}),t._v(" "),a("div",{staticClass:"t-name"},[t._v(t._s(t.name))]),t._v(" "),t.showCancel?a("el-button",{staticClass:"head-handle-button",attrs:{type:"primary"},nativeOn:{click:function(e){t.handleTypeClick("discard")}}},[t._v("作废")]):t._e(),t._v(" "),t.showTransfer?a("el-button",{staticClass:"head-handle-button",attrs:{type:"primary"},nativeOn:{click:function(e){t.handleTypeClick("transfer")}}},[t._v("转移")]):t._e(),t._v(" "),t.showEdit?a("el-button",{staticClass:"head-handle-button",attrs:{type:"primary"},nativeOn:{click:function(e){t.handleTypeClick("edit")}}},[t._v("编辑")]):t._e(),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleTypeClick}},[a("flexbox",{staticClass:"t-more"},[a("div",[t._v("更多")]),t._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"#ccc"}})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.moreTypes,function(e,i){return t.whetherTypeShowByPermision(e.type)?a("el-dropdown-item",{key:i,attrs:{command:e.type}},[t._v(t._s(e.name))]):t._e()}))],1),t._v(" "),a("img",{staticClass:"t-close",attrs:{src:i("cjwK")},on:{click:t.hideView}})],1),t._v(" "),a("flexbox",{staticClass:"h-section",attrs:{align:"stretch"}},t._l(t.headDetails,function(e,i){return a("flexbox-item",{key:i,staticClass:"h-item",attrs:{span:"200"}},[a("div",{staticClass:"h-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"h-value text-one-line"},[t._v(t._s(e.value))])])})),t._v(" "),t._t("default"),t._v(" "),a("transfer-handle",{attrs:{"crm-type":t.crmType,"selection-list":[t.detail],"dialog-visible":t.transferDialogShow},on:{"update:dialogVisible":function(e){t.transferDialogShow=e},handle:t.handleCallBack}}),t._v(" "),a("alloc-handle",{attrs:{"crm-type":t.crmType,"selection-list":[t.detail],"dialog-visible":t.allocDialogShow},on:{"update:dialogVisible":function(e){t.allocDialogShow=e},handle:t.handleCallBack}}),t._v(" "),a("deal-status-handle",{attrs:{"crm-type":t.crmType,"selection-list":[t.detail],visible:t.dealStatusShow},on:{"update:visible":function(e){t.dealStatusShow=e},handle:t.handleCallBack}})],2)},[],!1,null,"24427708",null);k.options.__file="CRMDetailHead.vue";e.a=k.exports},Fpl1:function(t,e,i){"use strict";var a=i("Er7M"),s=i("O1Uw"),n={name:"ExamineCell",components:{RelatedBusinessCell:a.a,FileCell:s.a},mixins:[],props:{data:Object},data:function(){return{}},computed:{relatedListData:function(){return{contacts:this.data.contactsList||[],customer:this.data.customerList||[],business:this.data.businessList||[],contract:this.data.contractList||[]}}},watch:{},mounted:function(){},methods:{getStatusName:function(t){return 0==t?"待审":1==t?"审核通过":2==t?"审核拒绝":3==t?"审核中":4==t?"撤回":""},getStatusColor:function(t){return 0==t?"#F3A633":1==t?"#93E06D":2==t?"#FF0000":3==t?"#F3A633":4==t?"#FF0000":""},imgZoom:function(t,e){this.$bus.emit("preview-image-bus",{index:e,data:t.map(function(t,e,i){return{url:t.filePath,name:t.name}})})},handleCommand:function(t){this.$emit("on-handle",{type:t,data:{item:this.data}})},checkDetail:function(t){this.$emit("on-handle",{type:"view",data:{item:this.data}})},checkRelatedDetail:function(t,e){this.$emit("on-handle",{type:"related-detail",data:{type:t,item:e}})}}},l=(i("qYzP"),i("ZrdR")),o=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[i("div",{staticClass:"list-content"},[i("flexbox",{staticClass:"header"},[i("div",{directives:[{name:"photo",rawName:"v-photo",value:t.data.createUser,expression:"data.createUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.data.createUser.img),expression:"$options.filters.filterUserLazyImg(data.createUser.img)",arg:"background-image"}],staticClass:"div-photo head-img"}),t._v(" "),i("div",{staticClass:"name-time"},[i("span",{staticClass:"name"},[t._v(t._s(t.data.createUser.realname))]),t._v(" "),i("span",{staticClass:"time"},[t._v(t._s(t.data.createtime))])]),t._v(" "),i("div",{staticClass:"rt-setting"},[i("span",{staticClass:"bg-color",style:{"background-color":t.getStatusColor(t.data.examineStatus)}}),t._v(" "),i("span",{staticClass:"dep"},[i("span",[t._v(t._s(t.data.categoryTitle)+" - ")]),t._v(" "),i("span",[t._v(t._s(t.getStatusName(t.data.examineStatus)))])]),t._v(" "),t.data.permission&&(t.data.permission.isChecked||t.data.permission.isUpdate||t.data.permission.isDelete)?i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("i",{staticClass:"el-icon-arrow-down el-icon-more",staticStyle:{color:"#CDCDCD",cursor:"pointer"}}),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.data.permission&&t.data.permission.isChecked?i("el-dropdown-item",{attrs:{command:"withdraw"}},[t._v("撤回")]):t._e(),t._v(" "),t.data.permission&&t.data.permission.isUpdate?i("el-dropdown-item",{attrs:{command:"edit"}},[t._v("编辑")]):t._e(),t._v(" "),t.data.permission&&t.data.permission.isDelete?i("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")]):t._e()],1)],1):t._e()],1)]),t._v(" "),i("div",{staticClass:"row",on:{click:function(e){t.checkDetail(t.data)}}},[t.data.content?i("p",{staticClass:"text"},[t._v(t._s(t.data.content))]):t._e(),t._v(" "),t.data.causeTitle?i("p",{staticClass:"title"},[t._v(t._s(t.data.causeTitle))]):t._e()]),t._v(" "),t.data.file.length>0||t.data.img.length>0?i("div",{staticClass:"accessory"},[i("div",{staticClass:"upload-img-box"},t._l(t.data.img,function(e,a){return i("div",{key:a,staticClass:"img-list",on:{click:function(e){t.imgZoom(t.data.img,a)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.filePath,expression:"imgItem.filePath"}]})])})),t._v(" "),i("div",{staticClass:"accessory-box"},t._l(t.data.file,function(t,e){return i("file-cell",{key:e,attrs:{data:t,"cell-index":e}})}))]):t._e(),t._v(" "),t.relatedListData.contacts.length>0||t.relatedListData.customer.length>0||t.relatedListData.business.length>0||t.relatedListData.contract.length>0?i("div",{staticClass:"related-business"},[i("div",{staticClass:"label"},[t._v("关联业务")]),t._v(" "),t._l(t.relatedListData,function(e,a){return i("div",{key:a},t._l(e,function(e,s){return i("related-business-cell",{key:s,attrs:{data:e,"cell-index":s,type:a,"show-foot":!1},nativeOn:{click:function(i){t.checkRelatedDetail(a,e)}}})}))})],2):t._e()],1)])},[],!1,null,"69582bdc",null);o.options.__file="examineCell.vue";e.a=o.exports},FyKc:function(t,e,i){},HXY3:function(t,e,i){"use strict";var a=i("EXVB");i.n(a).a},Hhli:function(t,e,i){"use strict";var a=i("EP+0"),s=i("I4nk"),n=i.n(s),l=i("uH+S"),o=i.n(l),c={name:"StatisticalOverview",components:{CreateSections:a.a,RadialProgressBar:o.a},props:{data:{type:Object,default:function(){return{allCount:0,archive:0,completionRate:0,overdueRate:0,complete:0,overdue:0,unfinished:0}}},list:Array},data:function(){return{barOption:null,barChart:null}},computed:{showList:function(){return this.list&&this.list.length>3?this.list.slice(0,3):this.list||[]}},watch:{data:function(){this.changeBarData()}},mounted:function(){this.initBar(),this.changeBarData()},methods:{changeBarData:function(){this.barOption.series[0].data=[this.data.allCount||0,this.data.unfinished||0,this.data.complete||0,this.data.overdue||0,this.data.archive||0],this.barChart.setOption(this.barOption,!0)},initBar:function(){this.barChart=n.a.init(document.getElementById("barmain")),this.barOption={tooltip:{show:!1},legend:{show:!1},grid:{top:"15px",left:0,right:0,bottom:"10px",containLabel:!0},xAxis:{type:"category",data:["总任务","未完成","已完成","已逾期","已归档"],axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#666"},axisLine:{lineStyle:{color:"#ECECEC"}},splitLine:{show:!1}},yAxis:{show:!1},series:[{name:"成交客户数",type:"bar",barWidth:10,label:{show:!0,position:"top",color:"#333"},itemStyle:{barBorderRadius:[7.5,7.5,0,0]},color:function(t){return["#0067E5","#0067E5","#0067E5","#FF5D60","#19DBC1"][t.dataIndex]},data:[]}]}}}},r=(i("PmHp"),i("ZrdR")),d=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("create-sections",{attrs:{title:"任务总览"}},[i("flexbox",{staticClass:"content"},[i("div",{staticClass:"content-progress"},[i("radial-progress-bar",{staticClass:"progress",attrs:{diameter:120,"completed-steps":parseFloat(t.data.completionRate)||0,"total-steps":100,"stroke-width":7,"inner-stroke-color":"#E7F2FA","start-color":"#0067E5","stop-color":"#0067E5"}},[i("p",{staticClass:"progress-title"},[t._v("完成率")]),t._v(" "),i("p",{staticClass:"progress-value"},[t._v(t._s(t.data.completionRate||0)),i("span",[t._v("%")])])]),t._v(" "),i("radial-progress-bar",{staticClass:"progress",attrs:{diameter:120,"completed-steps":parseFloat(t.data.overdueRate)||0,"total-steps":100,"stroke-width":7,"inner-stroke-color":"#E8F2FA","start-color":"#FF5D60","stop-color":"#FF5D60"}},[i("p",{staticClass:"progress-title"},[t._v("逾期率")]),t._v(" "),i("p",{staticClass:"progress-value"},[t._v(t._s(t.data.overdueRate||0)),i("span",[t._v("%")])])])],1),t._v(" "),i("div",{staticClass:"content-bar"},[i("div",{attrs:{id:"barmain"}})]),t._v(" "),t.list&&t.list.length>0?i("div",{staticClass:"content-user"},[i("div",{staticClass:"content-user-items"},[t._l(t.showList,function(e,a){return i("div",{key:a,staticClass:"main-user"},[i("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.img),expression:"$options.filters.filterUserLazyImg(item.img)",arg:"background-image"}],key:e.img,staticClass:"div-photo main-user-head"}),t._v(" "),i("div",{staticClass:"main-user-name"},[t._v(t._s(e.realname))])])}),t._v(" "),t.list.length>3?i("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"tooltip-change-border task-tooltip"}},[i("div",{staticClass:"tooltip-content",staticStyle:{margin:"10px 10px 10px 0"},attrs:{slot:"content"},slot:"content"},t._l(t.list,function(e,a){return i("div",{key:a,staticClass:"item-label",staticStyle:{display:"inline-block","margin-right":"10px"}},[a>2?i("span",{staticClass:"k-name"},[t._v(t._s(e.realname))]):t._e()])})),t._v(" "),i("span",{staticClass:"main-user-more"},[i("i",[t._v("...")])])]):t._e()],2),t._v(" "),i("div",{staticClass:"content-user-title"},[t._v("项目负责人")])]):t._e()]),t._v(" "),t._t("default")],2)},[],!1,null,"2234273a",null);d.options.__file="statisticalOverview.vue";e.a=d.exports},Hiqs:function(t,e,i){"use strict";var a=i("dAx4");i.n(a).a},IDsd:function(t,e,i){},IKCp:function(t,e,i){"use strict";var a=document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)},s=document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)},n=i("Mpsw");function l(t,e,i,a){var s,n=!1,l=0;function o(){s&&clearTimeout(s)}function c(){var c=this,r=Date.now()-l,d=arguments;function u(){l=Date.now(),i.apply(c,d)}n||(a&&!s&&u(),o(),void 0===a&&r>t?u():!0!==e&&(s=setTimeout(a?function(){s=void 0}:u,void 0===a?t-r:t)))}return"boolean"!=typeof e&&(a=i,i=e,e=void 0),c.cancel=function(){o(),n=!0},c}var o={isDown:!1,coord:{x:0,y:0}},c=null,r=[],d=function(t){c.style.cursor="pointer",o.isDown=!0,o.coord.x=t.pageX,o.coord.y=t.pageY},u=function(t){c.style.cursor="default",o.isDown=!1,o.coord.x=0,o.coord.y=0},m=function(t){var e=o.coord.x-t.pageX;o.coord.x=t.pageX,v(t)?(c.style.cursor="default",o.isDown=!1):o.isDown&&(c.scrollLeft=c.scrollLeft+e)},h=function(t){c.style.cursor="default",o.isDown=!1},p=function(t){f(t)?(c.style.cursor="default",o.isDown=!1):c.scrollLeft+=t.deltaY},v=function(t,e,i){return void 0===i?l(t,e,!1):l(t,i,!1!==e)}(300,function(t){var e=!1;return r.forEach(function(i){var a=document.getElementsByClassName(i);if(a&&!e)for(var s=0;s<a.length;s++){if(a[s].contains(t.target)){e=!0;break}}}),e}),f=function(t){var e=!1;return r.forEach(function(i){var a=document.getElementsByClassName(i);if(a&&!e)for(var s=0;s<a.length;s++){var n=a[s].getBoundingClientRect();if(t.clientY>n.top&&t.clientY<n.top+n.height&&t.clientX>n.left&&t.clientX<n.left+n.width){e=!0;break}}}),e};e.a=n.default.directive("scrollx",{bind:function(t,e,i){var a=e.value;r=a.ignoreClass},inserted:function(t){c=t,a(t,"mousedown",d),a(t,"mouseout",h),a(t,"wheel",p),a(t,"mouseup",u),a(t,"mousemove",m)},unbind:function(t){s(t,"mousedown",d),s(t,"mouseup",u),s(t,"mouseout",h),s(t,"wheel",p),s(t,"mousemove",m),o={isDown:!1,coord:{x:0,y:0}}}})},IQH5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdGRTgyQUFEQzBBMzExRTg4RTlCRTNDNzA5Q0RDRTJBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjdGRTgyQUFFQzBBMzExRTg4RTlCRTNDNzA5Q0RDRTJBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N0ZFODJBQUJDMEEzMTFFODhFOUJFM0M3MDlDRENFMkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZFODJBQUNDMEEzMTFFODhFOUJFM0M3MDlDRENFMkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7S8sG0AAABaklEQVR42qyUPUsDQRCG94IgGAiagELsU6WxUmITEKwEQYJop6U2/gTxH1gldrFWEASrQDgbP4oDmzR2WqQ4IQiBCAcWviOzsA5zeyf6wtPMx8vu7dwEURQZj7pgT8TOwX5aQ8H4taDE5n0NruG0yDXAstKzwjmj9VrDWfAKQtACl+AOlBXDMueoZod7XtjDTHHRCV+PaJp8ajHG8TiiE9bBofm7yKNOJzx1Tqrpg69IWgUzKXXfXnTCicesD2pgnalxLE0TMtxMufIIbIGhExtybKTUH5CXfeVQKeiBsRIfc04qzDPYv5Y11EaFvllJiZc4J9W0htegoxRUwBVYdGJVjlWU+jPyoqcuem6wBp7F2PjqiwG2DQ32U8Ys5tEnWKIrD0D7H96DPAb2UY5BDG7BLv/4WboA29wTs4cJnAVLKygR6+sGzAmjd7AB7sX6SuQcJqKRGh6Vkz0Isx+9WYMdK7E3X8OXAAMApsZGDBJcTHwAAAAASUVORK5CYII="},Iae0:function(t,e,i){"use strict";var a=i("bS4n"),s=i.n(a),n=i("r4mJ"),l=i.n(n),o=i("S3Kq"),c=i("Qldq"),r=i("vPra"),d=i("1RnH"),u=i("8t5x"),m=i("O1Uw"),h={name:"JournalCell",components:{emoji:o.a,relatedBusiness:d.a,FileCell:m.a},mixins:[],props:{data:Object,logIndex:{type:Number,default:0},showWorkbench:{type:Boolean,default:!1}},data:function(){return{commentsTextarea:"",childCommentsTextarea:"",commentsPopover:!1,replyChildComment:null,replyChildIndex:-1,childCommentsPopover:!1,blurIndex:0,contentLoading:!1,parentTarget:null,awaitMoment:!1,replyList:[]}},computed:s()({},Object(u.b)(["userInfo"]),{allData:function(){var t={};return t.business=this.data.businessList,t.contacts=this.data.contactsList,t.contract=this.data.contractList,t.customer=this.data.customerList,t},allDataShow:function(){return 0!=this.data.businessList.length||0!=this.data.contactsList.length||0!=this.data.contractList.length||0!=this.data.customerList.length}}),watch:{},mounted:function(){var t=this;0!=this.data.isRead||this.showWorkbench||(this.$bus.on("journal-list-box-scroll",function(e){t.observePreview(e)}),this.observePreview(document.getElementById("journal-cell"+this.logIndex).parentNode)),this.replyList=this.data.replyList},beforeDestroy:function(){this.$bus.off("journal-list-box-scroll")},methods:{observePreview:function(t){var e=this;if(0==this.data.isRead){t&&(this.parentTarget=t);var i=this.whetherPreview();!this.awaitMoment&&i&&(this.awaitMoment=!0,setTimeout(function(){e.awaitMoment=!1,e.whetherPreview()&&e.submiteIsRead()},3e3))}},whetherPreview:function(){var t=this.parentTarget.children[this.logIndex];if(this.parentTarget.getBoundingClientRect()){var e=this.parentTarget.getBoundingClientRect().top-t.getBoundingClientRect().top,i=!1;return e<=0&&Math.abs(e)<this.parentTarget.clientHeight?i=!0:e>0&&e<t.clientHeight&&(i=!0),i}return!1},submiteIsRead:function(){var t=this;Object(c.e)({logId:this.showWorkbench?this.data.actionId:this.data.logId}).then(function(e){t.$store.dispatch("GetOAMessageNum","log"),t.data.isRead=1}).catch(function(){})},getCommentList:function(){var t=this;Object(r.b)({typeId:this.data.logId,type:1}).then(function(e){t.replyList=e.data}).catch(function(){})},verifyAwaitInfo:function(){},handleCommand:function(t){this.$emit("on-handle",{type:t,data:{item:this.data}})},checkRelatedDetail:function(t,e){this.$emit("on-handle",{type:"related-detail",data:{type:t,item:e}})},discussDelete:function(t,e,i){var a=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.a)({commentId:t.commentId}).then(function(t){a.$message({type:"success",message:"删除成功!"}),e.splice(i,1),a.$emit("on-handle",{type:"discuss-delete",data:{item:a.data}})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},discussBtn:function(t,e){t.show?(this.$set(t,"show",!1),this.replyChildComment=null):(this.$set(t,"show",!0),this.$set(t,"showComment",!1),this.replyChildComment=t,this.replyChildIndex=e)},childCommentSubmit:function(){var t=this;if(this.replyChildComment&&this.childCommentsTextarea){var e=-1==this.replyChildIndex?this.replyChildComment:this.replyChildComment.childCommentList[this.replyChildIndex];this.contentLoading=!0,Object(r.c)({pid:e.userId,typeId:e.typeId,mainId:0==e.mainId?e.commentId:e.mainId,type:2,content:l()(this.childCommentsTextarea)}).then(function(i){t.childCommentsPopover=!1,i.data.user=t.userInfo,i.data.replyUser=e.user,t.replyChildComment.childCommentList.push(i.data),t.$message.success("回复成功"),t.replyChildComment.show=!1,t.replyChildComment=null,t.contentLoading=!1,t.childCommentsTextarea="",t.$emit("on-handle",{type:"discuss-submit",data:{item:t.data}})}).catch(function(){t.$message.error("回复失败"),t.contentLoading=!1})}},commentSubmit:function(){var t=this;this.commentsTextarea&&(this.contentLoading=!0,Object(r.c)({typeId:this.showWorkbench?this.data.actionId:this.data.logId,type:2,content:l()(this.commentsTextarea)}).then(function(e){t.$set(t.data,"showComment",!1),e.data.childCommentList=[],e.data.show=!1,e.data.user=t.userInfo,t.replyList.push(e.data),t.commentsTextarea="",t.$message.success("回复成功"),t.contentLoading=!1}).catch(function(){t.$message.error("回复失败"),t.contentLoading=!1}))},commentBtn:function(t){t.showComment?this.$set(t,"showComment",!1):(this.replyChildComment&&(this.replyChildComment.show=!1),this.$set(t,"showComment",!0))},selectEmoji:function(t){var e=this.commentsTextarea.split("");e.splice(this.blurIndex,0,t),this.commentsTextarea=e.join(""),this.commentsPopover=!1},childSelectEmoji:function(t){var e=this.childCommentsTextarea.split("");e.splice(this.blurIndex,0,t),this.childCommentsTextarea=e.join(""),this.childCommentsPopover=!1},blurFun:function(t){this.blurIndex=t.target.selectionEnd},imgZoom:function(t,e){this.$bus.emit("preview-image-bus",{index:e,data:t.map(function(t,e,i){return{url:t.filePath,name:t.name}})})}}},p=(i("1LOG"),i("ZrdR")),v=Object(p.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list",attrs:{id:"journal-cell"+t.logIndex}},[a("div",{staticClass:"list-content"},[a("div",{staticClass:"header"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:t.data.createUser,expression:"data.createUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.data.createUser.img),expression:"$options.filters.filterUserLazyImg(data.createUser.img)",arg:"background-image"}],key:t.data.createUser.img,staticClass:"div-photo head-img header-circle"}),t._v(" "),a("div",{staticClass:"row"},[a("p",{staticClass:"row-title"},[a("span",{staticClass:"name"},[t._v(t._s(t.data.createUser.realname))]),t._v(" "),t.showWorkbench?a("span",{staticClass:"item-content"},[t._v(t._s(t.data.actionContent))]):a("span",{staticClass:"read",style:{color:0==t.data.isRead?"#3E84E9":"#ccc"}},[t._v(t._s(0==t.data.isRead?"未读":"已读"))])]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(t._f("moment")(t.data.createTime,"YYYY-MM-DD HH:mm")))]),t._v(" "),a("el-tooltip",{attrs:{disabled:!(t.data.sendUserList.length>0||t.data.sendDeptList.length>0),placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"members-dep-title"},[t.data.sendUserList?a("span",t._l(t.data.sendUserList,function(e,i){return a("span",{key:i},[t._v("\n                  "+t._s(0==t.data.sendDeptList.length&&i==t.data.sendUserList.length-1?e.realname:e.realname+"，")+"\n                ")])})):t._e(),t._v(" "),t._l(t.data.sendDeptList,function(e,i){return a("span",{directives:[{name:"show",rawName:"v-show",value:0!=t.data.sendDeptList.legnth,expression:"data.sendDeptList.legnth != 0"}],key:i},[t._v("\n                "+t._s(i==t.data.sendDeptList.length-1?e.name:e.name+"，")+"\n              ")])})],2)]),t._v(" "),a("p",{staticClass:"row-title",staticStyle:{display:"inline-block"}},[t.data.sendDeptList?a("span",[t._v(t._s(t.data.sendDeptList.length)+" 个部门，")]):t._e(),t._v(" "),t.data.sendUserList?a("span",[t._v(t._s(t.data.sendUserList.length)+"个同事")]):t._e()])])],1),t._v(" "),!t.showWorkbench&&t.data.permission&&(t.data.permission.isUpdate||t.data.permission.isDelete)?a("div",{staticClass:"rt-setting"},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("i",{staticClass:"el-icon-arrow-down el-icon-more",staticStyle:{color:"#CDCDCD",cursor:"pointer"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.data.permission.isUpdate?a("el-dropdown-item",{attrs:{command:"edit"}},[t._v("编辑")]):t._e(),t._v(" "),t.data.permission.isDelete?a("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")]):t._e()],1)],1)],1):t._e()]),t._v(" "),a("div",{staticClass:"text"},[t.data.content?a("p",{staticClass:"row"},[a("span",{staticClass:"title"},[t._v(t._s(1==t.data.categoryId?"今日工作内容":2==t.data.categoryId?"本周工作内容":"本月工作内容")+"：")]),t._v(t._s(t.data.content))]):t._e(),t._v(" "),t.data.tomorrow?a("p",{staticClass:"row"},[a("span",{staticClass:"title"},[t._v(t._s(1==t.data.categoryId?"明日工作内容":2==t.data.categoryId?"下周工作内容":"下月工作内容")+"：")]),t._v(t._s(t.data.tomorrow))]):t._e(),t._v(" "),t.data.question?a("p",{staticClass:"row"},[a("span",{staticClass:"title"},[t._v("遇到的问题：")]),t._v(t._s(t.data.question))]):t._e()]),t._v(" "),a("div",{staticClass:"accessory"},[0!=t.data.img.length?a("div",{staticClass:"upload-img-box"},t._l(t.data.img,function(e,i){return a("div",{key:i,staticClass:"img-list",on:{click:function(e){t.imgZoom(t.data.img,i)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.filePath,expression:"imgItem.filePath"}],key:e.filePath})])})):t._e(),t._v(" "),0!=t.data.file.length?a("div",{staticClass:"accessory-box"},t._l(t.data.file,function(t,e){return a("file-cell",{key:e,attrs:{data:t,"cell-index":e}})})):t._e()]),t._v(" "),t.allDataShow?a("related-business",{attrs:{"margin-left":"0",alterable:!1,"all-data":t.allData},on:{checkRelatedDetail:t.checkRelatedDetail}}):t._e(),t._v(" "),t.replyList&&0!=t.replyList.length?a("div",{staticClass:"discuss"},[a("div",{staticClass:"border"}),t._v(" "),t._l(t.replyList,function(e,s){return a("div",{key:s,staticClass:"discuss-list"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:e.user,expression:"discussItem.user"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.user.img),expression:"$options.filters.filterUserLazyImg(discussItem.user.img)",arg:"background-image"}],key:e.user.img,staticClass:"div-photo head-img header-circle"}),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(e.user.realname))]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(e.createTime))]),t._v(" "),a("div",{staticClass:"rt"},[a("span",{on:{click:function(i){t.discussDelete(e,t.replyList,s)}}},[t._v("删除")]),t._v(" "),a("span",{on:{click:function(i){t.discussBtn(e,-1)}}},[t._v("回复")])]),t._v(" "),a("p",{staticClass:"reply-title"},[a("span",{domProps:{innerHTML:t._s(t.emoji(e.content))}})]),t._v(" "),e.childCommentList&&e.childCommentList.length>0?a("div",{staticClass:"children-reply"},t._l(e.childCommentList,function(i,s){return a("div",{key:s,staticClass:"discuss-list"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:i.user,expression:"childDiscussItem.user"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(i.user.img),expression:"$options.filters.filterUserLazyImg(childDiscussItem.user.img)",arg:"background-image"}],key:i.user.img,staticClass:"div-photo head-img header-circle"}),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(i.user.realname))]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(i.createTime))]),t._v(" "),a("div",{staticClass:"rt"},[a("span",{on:{click:function(a){t.discussDelete(i,e.childCommentList,s)}}},[t._v("删除")]),t._v(" "),a("span",{on:{click:function(i){t.discussBtn(e,s)}}},[t._v("回复")])]),t._v(" "),a("p",{staticClass:"reply-title"},[[a("span",[t._v("回复")]),t._v(" "),i.replyUser?a("span",{staticClass:"reply"},[t._v("@"+t._s(i.replyUser.realname)+"：")]):t._e()],t._v(" "),a("span",{domProps:{innerHTML:t._s(t.emoji(i.content))}})],2)])})):t._e(),t._v(" "),e.show?a("div",{staticClass:"comment-box"},[a("el-input",{attrs:{rows:2,type:"textarea",placeholder:"请输入内容"},on:{blur:t.blurFun},model:{value:t.childCommentsTextarea,callback:function(e){t.childCommentsTextarea=e},expression:"childCommentsTextarea"}}),t._v(" "),a("div",{staticClass:"btn-group"},[a("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"},model:{value:t.childCommentsPopover,callback:function(e){t.childCommentsPopover=e},expression:"childCommentsPopover"}},[a("emoji",{on:{select:t.childSelectEmoji}}),t._v(" "),a("img",{staticClass:"smiling-img",attrs:{slot:"reference",src:i("woiz")},slot:"reference"})],1),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{loading:t.contentLoading,type:"primary"},on:{click:function(e){t.childCommentSubmit()}}},[t._v("回复")]),t._v(" "),a("el-button",{on:{click:function(t){e.show=!1}}},[t._v("取消")])],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"border"})])})],2):t._e()],1),t._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-chat-line-round"},on:{click:function(e){t.commentBtn(t.data)}}},[t._v("回复")])],1),t._v(" "),t.data.showComment?a("div",{staticClass:"comment-box"},[a("el-input",{attrs:{rows:3,type:"textarea",placeholder:"请输入内容"},on:{blur:t.blurFun},model:{value:t.commentsTextarea,callback:function(e){t.commentsTextarea=e},expression:"commentsTextarea"}}),t._v(" "),a("div",{staticClass:"btn-group"},[a("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"},model:{value:t.commentsPopover,callback:function(e){t.commentsPopover=e},expression:"commentsPopover"}},[a("emoji",{on:{select:t.selectEmoji}}),t._v(" "),a("img",{staticClass:"smiling-img",attrs:{slot:"reference",src:i("woiz")},slot:"reference"})],1),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{loading:t.contentLoading,type:"primary"},on:{click:function(e){t.commentSubmit()}}},[t._v("回复")]),t._v(" "),a("el-button",{on:{click:function(e){t.data.showComment=!1}}},[t._v("取消")])],1)],1)],1):t._e()])},[],!1,null,"3bb3d38a",null);v.options.__file="journalCell.vue";e.a=v.exports},IvBF:function(t,e,i){},JHQg:function(t,e,i){},KA8I:function(t,e,i){"use strict";var a=i("JHQg");i.n(a).a},KEDX:function(t,e,i){"use strict";i.r(e);var a=i("rerW"),s=i.n(a),n=i("eAcW"),l=i("fCst"),o=i("jBM/"),c=i.n(o),r=i("IKCp"),d=i("F/D6"),u=i("sl8O"),m={components:{draggable:c.a,newDialog:n.a,particulars:l.a},directives:{scrollx:r.a},props:{workId:[String,Number],permission:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,createTaskListShow:!1,createSubTaskClassId:"hidden",subTaskContent:"",selectMainUser:null,subTaskStopTimeDate:"",ownerList:[],taskListName:"",renameInput:"",taskList:[],taskID:"",detailIndex:-1,detailSection:-1,taskDetailShow:!1}},computed:{canCreateTask:function(){return this.permission.task&&this.permission.task.save},canCreateTaskClass:function(){return this.permission.taskClass&&this.permission.taskClass.save},canUpdateTaskClass:function(){return this.permission.taskClass&&this.permission.taskClass.update},canDeleteTaskClass:function(){return this.permission.taskClass&&this.permission.taskClass.delete}},watch:{workId:function(){this.createTaskListShow=!1,this.taskDetailShow=!1,this.taskList=[],this.getList()}},created:function(){var t=this;this.getList(),this.$bus.$on("search",function(e,i,a){t.getList({mainUserId:e,stopTimeType:i,labelId:a})}),this.$bus.$on("members-update",function(e){t.ownerList=e})},mounted:function(){document.body.ondrop=function(t){t.preventDefault(),t.stopPropagation()},document.getElementById("project-main-container").addEventListener("click",this.taskShowHandle,!1)},beforeDestroy:function(){this.$bus.$off("search"),this.$bus.$off("members-update")},methods:{getList:function(t){var e=this;t?t.workId=this.workId:t={workId:this.workId},this.loading=!0,Object(u.d)(t).then(function(t){e.loading=!1;var i=!0,a=!1,n=void 0;try{for(var l,o=s()(t.data);!(i=(l=o.next()).done);i=!0){var c=l.value;c.checkedNum=0;var r=!0,d=!1,u=void 0;try{for(var m,h=s()(c.list);!(r=(m=h.next()).done);r=!0){var p=m.value;5==p.status?(p.checked=!0,c.checkedNum+=1):p.checked=!1}}catch(t){d=!0,u=t}finally{try{!r&&h.return&&h.return()}finally{if(d)throw u}}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}e.taskList=t.data}).catch(function(){e.loading=!1})},moveEndParentTask:function(t){t&&t.oldIndex!=t.newIndex&&Object(u.e)({workId:this.workId,classIds:this.taskList.map(function(t){return t.classId})}).then(function(t){}).catch(function(){})},moveParentTask:function(t){if(0==t.draggedContext.futureIndex&&-1==this.taskList[0].classId)return!1},moveEndSonTask:function(t){if(t){var e=t.from.id,i=t.to.id;if(e==i&&t.oldIndex==t.newIndex)return;var a=this.taskList.filter(function(t){return t.classId==e})[0],s=a.list;this.updateTaskListCheckNum(a);var n=this.taskList.filter(function(t){return t.classId==i})[0],l=n.list;this.updateTaskListCheckNum(n);var o={};o=e==i?{toList:l.map(function(t){return t.taskId}),toId:i}:{fromList:s.map(function(t){return t.taskId}),fromId:e,toList:l.map(function(t){return t.taskId}),toId:i},Object(u.f)(o).then(function(t){}).catch(function(){})}},updateTaskListCheckNum:function(t){t.checkedNum=t.list.filter(function(t){return t.checked}).length},checkboxChange:function(t,e){t.checked?e.checkedNum++:e.checkedNum--,Object(d.j)({taskId:t.taskId,status:t.checked?5:1}).then(function(t){}).catch(function(){t.checked?e.checkedNum--:e.checkedNum++,t.checked=!t.checked})},delectTaskListClick:function(t,e){var i=this;this.$confirm("您确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.g)({classId:t.classId,workId:i.workId}).then(function(a){i.taskList.splice(e,1),i.$message.success("删除成功"),t.taskHandleShow=!1}).catch(function(){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},archiveTaskListClick:function(t){var e=this;Object(u.b)({classId:t.classId}).then(function(i){e.$message.success("归档成功"),t.taskHandleShow=!1,e.getList()})},renameTaskListClick:function(t){this.renameInput=t.className,t.taskHandleShow=!1},renameSubmit:function(t){var e=this;Object(u.c)({name:this.renameInput,classId:t.classId}).then(function(i){t.className=e.renameInput}).catch(function(){}),t.renameShow=!1},createTaskListSave:function(){var t=this;Object(u.c)({name:this.taskListName,workId:this.workId}).then(function(e){t.taskListName="",t.getList()}).catch(function(){}),this.createTaskListShow=!1},addSubTask:function(t){var e=this;this.loading=!0,Object(d.j)({name:this.subTaskContent,stopTime:this.subTaskStopTimeDate,mainUserId:this.selectMainUser.userId,workId:this.workId,classId:t.classId}).then(function(t){e.createSubTaskClassId="hidden",e.loading=!1,e.getList()}).catch(function(){e.loading=!1})},showOwnerListClick:function(t){t.ownerListShow=!0,0==this.ownerList.length&&this.getOwnerList()},getOwnerList:function(){var t=this;Object(u.n)({workId:this.workId}).then(function(e){t.ownerList=e.data})},createSubTaskClick:function(t){this.subTaskContent="",this.subTaskStopTimeDate="",this.selectMainUser="",this.createSubTaskClassId=t.classId,t.taskHandleShow&&(t.taskHandleShow=!1)},selectOwnerList:function(t,e){this.selectMainUser=e;var i=!0,a=!1,n=void 0;try{for(var l,o=s()(this.ownerList);!(i=(l=o.next()).done);i=!0){var c=l.value;c.userId==e.userId?c.checked=!0:c.checked=!1}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.ownerListShow=!1},showDetailView:function(t,e,i){this.taskID=t.taskId,this.detailIndex=i,this.detailSection=e,this.taskDetailShow=!0},detailHandle:function(t){if(0==t.index||t.index)if("title-check"==t.type){var e=this.taskList[t.section];this.$set(e.list[t.index],"checked",t.value),t.value?e.checkedNum++:e.checkedNum--,this.$set(e,"checkedNum",e.checkedNum)}else if("delete"==t.type)this.taskList[t.section].list.splice(t.index,1);else if("change-stop-time"==t.type){new Date(t.value).getTime()/1e3+86399>new Date(new Date).getTime()/1e3?this.taskList[t.section].list[t.index].isEnd=!1:this.taskList[t.section].list[t.index].isEnd=!0,this.taskList[t.section].list[t.index].stopTime=t.value}else if("change-priority"==t.type)this.taskList[t.section].list[t.index].priority=t.value.id;else if("change-name"==t.type)this.taskList[t.section].list[t.index].name=t.value;else if("change-comments"==t.type){var i=this.taskList[t.section].list[t.index].commentCount;"add"==t.value?this.taskList[t.section].list[t.index].commentCount=i+1:this.taskList[t.section].list[t.index].commentCount=i-1}else"change-sub-task"==t.type?(this.taskList[t.section].list[t.index].childWCCount=t.value.subdonecount,this.taskList[t.section].list[t.index].childAllCount=t.value.allcount):"change-main-user"==t.type?this.taskList[t.section].list[t.index].mainUser=t.value:"change-label"==t.type&&(this.taskList[t.section].list[t.index].labelList=t.value)},closeBtn:function(){this.taskDetailShow=!1},taskShowHandle:function(t){if(this.$refs.particulars&&!this.$refs.particulars.$el.contains(t.target)){for(var e=!0,i=document.getElementsByClassName("board-item"),a=0;a<i.length;a++){if(i[a].contains(t.target)){e=!1;break}}this.taskDetailShow=!e}}}},h=(i("xcVl"),i("ZrdR")),p=Object(h.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-box"},[a("draggable",{directives:[{name:"scrollx",rawName:"v-scrollx",value:{ignoreClass:["ignoreClass"]},expression:"{ ignoreClass :['ignoreClass']}"}],staticClass:"board-column-content-parent",attrs:{id:"task-board-body",list:t.taskList,options:{group:"mission",forceFallback:!1,dragClass:"sortable-parent-drag",filter:".ignore-elements"},move:t.moveParentTask,handle:".board-column-wrapper"},on:{end:t.moveEndParentTask}},[t._l(t.taskList,function(e,s){return a("div",{key:s,staticClass:"board-column",class:{"ignore-elements":-1==e.classId}},[a("flexbox",{staticClass:"board-column-wrapper ignoreClass",attrs:{orient:"vertical",align:"stretch"}},[a("div",{staticClass:"board-column-header"},[a("div",[a("span",{staticClass:"text"},[t._v(" "+t._s(e.className)+" ")]),t._v(" "),a("span",{staticClass:"text-num"},[t._v(t._s(e.checkedNum)+" / "+t._s(e.list.length))]),t._v(" "),t.canUpdateTaskClass&&-1!=e.classId?a("el-popover",{attrs:{placement:"bottom-start",width:"150",trigger:"click"},model:{value:e.taskHandleShow,callback:function(i){t.$set(e,"taskHandleShow",i)},expression:"item.taskHandleShow"}},[a("div",{staticClass:"omit-popover-box"},[a("el-popover",{attrs:{"visible-arrow":!1,placement:"bottom-start",width:"250","popper-class":"task-board-rechristen-popover",trigger:"click"},model:{value:e.renameShow,callback:function(i){t.$set(e,"renameShow",i)},expression:"item.renameShow"}},[a("div",{staticClass:"task-board-rechristen-box"},[a("div",{staticClass:"title"},[a("span",[t._v("重命名")]),t._v(" "),a("span",{staticClass:"el-icon-close rt",on:{click:function(t){e.renameShow=!1}}})]),t._v(" "),a("div",{staticClass:"content"},[a("el-input",{attrs:{value:e.className,size:"mini"},model:{value:t.renameInput,callback:function(e){t.renameInput=e},expression:"renameInput"}}),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.renameSubmit(e)}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.renameShow=!1}}},[t._v("取消")])],1)],1)]),t._v(" "),a("p",{attrs:{slot:"reference"},on:{click:function(i){t.renameTaskListClick(e)}},slot:"reference"},[t._v("重命名")])]),t._v(" "),t.canCreateTask?a("p",{on:{click:function(i){t.createSubTaskClick(e)}}},[t._v("新建任务")]):t._e(),t._v(" "),t.canUpdateTaskClass?a("p",{on:{click:function(i){t.archiveTaskListClick(e)}}},[t._v("归档已完成任务")]):t._e(),t._v(" "),t.canDeleteTaskClass?a("p",{on:{click:function(i){t.delectTaskListClick(e,s)}}},[t._v("删除列表")]):t._e()],1),t._v(" "),a("img",{ref:"imgPopoverSlot",refInFor:!0,staticClass:"img-gd",attrs:{slot:"reference",src:i("pOUR")},slot:"reference"})]):t._e()],1),t._v(" "),0==e.checkedNum?a("el-progress",{attrs:{percentage:0}}):a("el-progress",{attrs:{percentage:e.checkedNum/e.list.length*100}})],1),t._v(" "),a("draggable",{staticClass:"board-column-content",attrs:{list:e.list,options:{group:{name:"missionSon",put:-1!=e.classId},forceFallback:!1,dragClass:"sortable-drag"},id:e.classId},on:{end:t.moveEndSonTask}},t._l(e.list,function(i,n){return a("div",{key:n,ref:"taskRow",refInFor:!0,class:i.checked?"board-item board-item-active":"board-item",style:{"border-color":1==i.priority?"#8bb5f0":2==i.priority?"#FF9668":3==i.priority?"#ED6363":""},on:{click:function(e){t.showDetailView(i,s,n)}}},[i.mainUser?a("div",{directives:[{name:"photo",rawName:"v-photo",value:i.mainUser,expression:"element.mainUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(i.mainUser.img),expression:"$options.filters.filterUserLazyImg(element.mainUser.img)",arg:"background-image"}],key:i.mainUser.img,staticClass:"head-png div-photo"}):t._e(),t._v(" "),a("flexbox",{attrs:{align:"stretch"}},[a("div",{staticStyle:{display:"inline-block"},on:{click:function(t){t.stopPropagation()}}},[a("el-checkbox",{on:{change:function(a){t.checkboxChange(i,e)}},model:{value:i.checked,callback:function(e){t.$set(i,"checked",e)},expression:"element.checked"}})],1),t._v(" "),a("div",{staticClass:"element-label"},[t._v(t._s(i.name))])]),t._v(" "),a("div",{staticClass:"img-group"},[i.stopTime?a("div",{staticClass:"img-box"},[a("i",{staticClass:"wukong wukong-time-task",style:{color:1!=i.isEnd||i.checked?"#999":"red"}}),t._v(" "),a("span",{style:{color:1!=i.isEnd||i.checked?"#999":"red"}},[t._v(t._s(t._f("filterTimestampToFormatTime")(new Date(i.stopTime).getTime(),"MM-DD"))+"截止")])]):t._e(),t._v(" "),i.childAllCount>0?a("div",{staticClass:"img-box"},[a("i",{staticClass:"wukong wukong-sub-task"}),t._v(" "),a("span",[t._v(t._s(i.childWCCount)+"/"+t._s(i.childAllCount))])]):t._e(),t._v(" "),i.fileCount?a("div",{staticClass:"img-box"},[a("i",{staticClass:"wukong wukong-file"}),t._v(" "),a("span",[t._v(t._s(i.fileCount))])]):t._e(),t._v(" "),i.commentCount?a("div",{staticClass:"img-box"},[a("i",{staticClass:"wukong wukong-comment-task"}),t._v(" "),a("span",[t._v(t._s(i.commentCount))])]):t._e(),t._v(" "),i.labelList.length<=2?t._l(i.labelList,function(e,i){return a("div",{key:i,staticClass:"item-label",style:{background:e.color}},[t._v("\n                  "+t._s(e.labelName)+"\n                ")])}):[a("div",{staticClass:"item-label",style:{background:i.labelList[0].color}},[t._v(t._s(i.labelList[0].labelName))]),t._v(" "),a("div",{staticClass:"item-label",style:{background:i.labelList[1].color}},[t._v(t._s(i.labelList[1].labelName))]),t._v(" "),a("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"tooltip-change-border task-tooltip"}},[a("div",{staticStyle:{margin:"10px 10px 10px 0"},attrs:{slot:"content"},slot:"content"},t._l(i.labelList,function(e,i){return a("div",{key:i,staticStyle:{display:"inline-block","margin-right":"10px"}},[i>=2?a("span",{staticClass:"k-name",staticStyle:{"border-radius":"3px",color:"#FFF",padding:"3px 10px"},style:{background:e.color?e.color:"#ccc"}},[t._v(t._s(e.labelName))]):t._e()])})),t._v(" "),a("div",{staticClass:"color-label-more"},[a("i",[t._v("...")])])])]],2)],1)})),t._v(" "),t.createSubTaskClassId==e.classId?a("div",{staticClass:"new-task-input"},[a("el-input",{attrs:{rows:2,type:"textarea",placeholder:"请输入内容"},model:{value:t.subTaskContent,callback:function(e){t.subTaskContent=e},expression:"subTaskContent"}}),t._v(" "),a("div",{staticClass:"img-box"},[a("span",{staticClass:"stop-time"},[t.subTaskStopTimeDate?a("span",{staticClass:"bg-color"},[t._v(t._s(t._f("moment")(t.subTaskStopTimeDate,"MM-DD"))),a("i",{staticClass:"el-icon-close",on:{click:function(e){t.subTaskStopTimeDate=""}}})]):a("i",{staticClass:"wukong wukong-time-task"}),t._v(" "),a("el-date-picker",{style:{width:t.subTaskStopTimeDate?"54px":"18px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.subTaskStopTimeDate,callback:function(e){t.subTaskStopTimeDate=e},expression:"subTaskStopTimeDate"}})],1),t._v(" "),a("el-popover",{attrs:{placement:"bottom-start",width:"250",trigger:"click"},model:{value:e.ownerListShow,callback:function(i){t.$set(e,"ownerListShow",i)},expression:"item.ownerListShow"}},[a("div",{staticClass:"task-board-personnel-list-popover"},[a("el-input",{attrs:{size:"mini",placeholder:"搜索成员"}}),t._v(" "),a("div",{staticClass:"list-box"},t._l(t.ownerList,function(i,s){return a("div",{key:s,class:i.checked?"personnel-list personnel-list-active":"personnel-list",on:{click:function(a){t.selectOwnerList(e,i)}}},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:i,expression:"k"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(i.img),expression:"$options.filters.filterUserLazyImg(k.img)",arg:"background-image"}],key:i.img,staticClass:"div-photo k-img"}),t._v(" "),a("span",[t._v(t._s(i.realname))]),t._v(" "),a("i",{staticClass:"el-icon-check"})])}))],1),t._v(" "),t.selectMainUser?a("div",{directives:[{name:"photo",rawName:"v-photo",value:t.selectMainUser,expression:"selectMainUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.selectMainUser.img),expression:"$options.filters.filterUserLazyImg(selectMainUser.img)",arg:"background-image"}],key:t.selectMainUser.img,staticClass:"div-photo head-img",attrs:{slot:"reference"},on:{click:function(i){t.showOwnerListClick(e)}},slot:"reference"}):a("i",{staticClass:"wukong wukong-user",attrs:{slot:"reference"},on:{click:function(i){t.showOwnerListClick(e)}},slot:"reference"})])],1),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.addSubTask(e)}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.createSubTaskClassId="hidden"}}},[t._v("取消")])],1)],1):t.canCreateTask&&-1!=e.classId?a("div",{staticClass:"new-task",on:{click:function(i){t.createSubTaskClick(e)}}},[a("span",{staticClass:"el-icon-plus"}),t._v(" "),a("span",[t._v("新建任务")])]):t._e()],1)],1)}),t._v(" "),t.canCreateTaskClass?a("div",{staticClass:"board-column-new-list"},[t.createTaskListShow||0!=t.loading?t.createTaskListShow&&0==t.loading?a("div",{staticClass:"input-btn"},[a("el-input",{attrs:{size:"small",placeholder:"列表名"},model:{value:t.taskListName,callback:function(e){t.taskListName=e},expression:"taskListName"}}),t._v(" "),a("div",{staticClass:"button-box"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.createTaskListSave}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.createTaskListShow=!1}}},[t._v("取消")])],1)],1):t._e():a("div",{staticClass:"new-list",on:{click:function(e){t.createTaskListShow=!0}}},[a("span",{staticClass:"el-icon-plus"}),t._v(" "),a("span",[t._v("新建列表")])])]):t._e()],2),t._v(" "),t.taskDetailShow?a("particulars",{ref:"particulars",attrs:{id:t.taskID,"detail-index":t.detailIndex,"detail-section":t.detailSection},on:{"on-handle":t.detailHandle,close:t.closeBtn}}):t._e()],1)},[],!1,null,"3cb1f468",null);p.options.__file="taskBoard.vue";var v=p.exports,f=i("KTTK"),g={props:{workId:[Number,String]},data:function(){return{firstRequst:!0,list:[],loading:!1,currentPage:1,pageSize:15,pageSizes:[15,30,45,60],total:0,fieldList:[],tableHeight:document.documentElement.clientHeight-240,editDialog:!1,editForm:{name:"",data:{}}}},watch:{workId:function(){this.currentPage=1,this.list=[],this.getList(!0)}},mounted:function(){this.firstRequst?(this.firstRequst=!1,this.getList(!0)):this.getList(!1)},created:function(){var t=this;window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-240},this.fieldList.push({prop:"name",width:"200",label:"附件名称"}),this.fieldList.push({prop:"size",width:"200",label:"附件大小"}),this.fieldList.push({prop:"createUserName",width:"200",label:"上传人"}),this.fieldList.push({prop:"createTime",width:"200",label:"上传时间"})},methods:{handleSizeChange:function(t){this.pageSize=t,this.getList(!1)},handleCurrentChange:function(t){this.currentPage=t,this.getList(!1)},getList:function(t){var e=this;this.loading=t,Object(u.j)({page:this.currentPage,limit:this.pageSize,work_id:this.workId}).then(function(t){e.list=t.data.list,e.loading=!1}).catch(function(){e.loading=!1})},headerRowStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},cellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},confirmEdit:function(){var t=this;this.editForm.name&&Object(f.f)({fileId:this.editForm.data.row.fileId,name:this.editForm.name}).then(function(e){t.$message.success("编辑成功"),t.editDialog=!1,t.list[t.editForm.data.$index].name=t.editForm.name}).catch(function(){})},handleFile:function(t,e){var i=this;if("preview"===t){var a=this.list.map(function(t){return t.url=t.filePath,t});this.$bus.emit("preview-image-bus",{index:e.$index,data:a})}else"delete"===t?this.$confirm("您确定要删除该文件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(f.b)({id:e.row.fileId}).then(function(t){i.list.splice(e.$index,1),i.$message.success("操作成功")}).catch(function(){})}).catch(function(){i.$message({type:"info",message:"已取消操作"})}):(this.editForm.data=e,this.editForm.name=e.row.name,this.editDialog=!0)}}},b=(i("vYv6"),Object(h.a)(g,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"attachment"},[i("div",{staticClass:"attachment-body"},[i("el-table",{staticStyle:{width:"100%",border:"1px solid #E6E6E6"},attrs:{data:t.list,height:t.tableHeight,"header-cell-style":t.headerRowStyle,"cell-style":t.cellStyle,align:"center","header-align":"center",stripe:""}},[t._l(t.fieldList,function(t,e){return i("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":""}})}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("flexbox",{attrs:{justify:"center"}},[i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("preview",e)}}},[t._v("预览")]),t._v(" "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("edit",e)}}},[t._v("重命名")]),t._v(" "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("delete",e)}}},[t._v("删除")])],1)]}}])})],2)],1),t._v(" "),i("el-dialog",{attrs:{"append-to-body":!0,visible:t.editDialog,title:"编辑",width:"30%"},on:{"update:visible":function(e){t.editDialog=e}}},[i("el-form",{attrs:{model:t.editForm}},[i("el-form-item",{attrs:{label:"新名称","label-width":"100"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editDialog=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmEdit}},[t._v("确 定")])],1)],1),t._v(" "),i("div",{staticClass:"p-contianer"},[i("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},[],!1,null,"cb1759e4",null));b.options.__file="attachment.vue";var y=b.exports,k=i("Hhli"),w=i("UrT4"),C=i("lT1d"),I=i("ME4h"),A={components:{StatisticalOverview:k.a,StatisticalTask:w.a,StatisticalMember:C.a},props:{workId:[Number,String]},data:function(){return{loading:!1,detailData:{},firstRequst:!0}},watch:{workId:function(){this.getDetail(!0)}},mounted:function(){},activated:function(){this.firstRequst?(this.firstRequst=!1,this.getDetail(!0)):this.getDetail(!1)},methods:{getDetail:function(t){var e=this;this.loading=t,Object(I.a)({workId:this.workId}).then(function(t){e.detailData=t.data,e.loading=!1}).catch(function(){e.loading=!1})}}},x=(i("b9z/"),Object(h.a)(A,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"statistical"},[i("statistical-overview",{staticClass:"statistical-overview",attrs:{data:t.detailData.taskStatistics,list:t.detailData.ownerList}}),t._v(" "),i("flexbox",{staticClass:"statistical-task"},[i("statistical-task",{staticClass:"statistical-task-item",attrs:{list:t.detailData.classStatistics,type:"task",title:"任务列表"}}),t._v(" "),i("statistical-task",{staticClass:"statistical-task-item",attrs:{list:t.detailData.labelStatistics,type:"label",title:"标签分析"}})],1),t._v(" "),i("statistical-member",{staticClass:"statistical-member",attrs:{list:t.detailData.memberTaskStatistics}})],1)},[],!1,null,"26ff79fa",null));x.options.__file="taskStatistical.vue";var D=x.exports,T=i("8GZb"),R={components:{particulars:l.a,TaskCell:T.a},props:{workId:[Number,String]},data:function(){return{loading:!1,taskList:[],firstRequst:!0,taskID:"",detailIndex:-1,taskDetailShow:!1}},watch:{workId:function(){this.taskList=[],this.getList(!0)}},activated:function(){this.firstRequst?(this.firstRequst=!1,this.getList(!0)):this.getList(!1)},mounted:function(){document.getElementById("project-main-container").addEventListener("click",this.taskShowHandle,!1)},methods:{getList:function(t){var e=this;this.loading=t,Object(u.a)({workId:this.workId}).then(function(t){e.loading=!1;var i=!0,a=!1,n=void 0;try{for(var l,o=s()(t.data);!(i=(l=o.next()).done);i=!0){var c=l.value;c.checked=5==c.status}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}e.taskList=t.data}).catch(function(){e.loading=!1})},changeCheckbox:function(t){Object(d.j)({taskId:t.taskId,status:t.checked?5:1}).then(function(t){}).catch(function(){t.checked=!1})},showDetailView:function(t,e){this.taskID=t.taskId,this.detailIndex=e,this.taskDetailShow=!0},detailHandle:function(t){if(0==t.index||t.index)if("title-check"==t.type)this.$set(this.taskList[t.index],"checked",t.value);else if("delete"==t.type||"activate-task"==t.type)this.taskList.splice(t.index,1);else if("change-stop-time"==t.type){new Date(t.value).getTime()/1e3+86399>new Date(new Date).getTime()/1e3?this.taskList[t.index].isEnd=!1:this.taskList[t.index].isEnd=!0,this.taskList[t.index].stopTime=t.value}else if("change-priority"==t.type)this.taskList[t.index].priority=t.value.id;else if("change-name"==t.type)this.taskList[t.index].name=t.value;else if("change-comments"==t.type){var e=this.taskList[t.index].commentCount;"add"==t.value?this.taskList[t.index].commentCount=e+1:this.taskList[t.index].commentCount=e-1}else"change-sub-task"==t.type?(this.taskList[t.index].childWCCount=t.value.subdonecount,this.taskList[t.index].childAllCount=t.value.allcount):"change-main-user"==t.type?this.taskList[t.index].mainUser=t.value:"change-label"==t.type&&(this.taskList[t.index].labelList=t.value)},closeBtn:function(){this.taskDetailShow=!1},titleCheckbox:function(t){var e=!0,i=!1,a=void 0;try{for(var n,l=s()(this.taskList);!(e=(n=l.next()).done);e=!0){var o=n.value;o.taskId==this.indexObjData.taskId&&this.$set(o,"checked",t)}}catch(t){i=!0,a=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw a}}},taskCellHandle:function(t){"view"==t.type&&this.showDetailView(t.data.item,t.data.index)},taskShowHandle:function(t){if(this.$refs.particulars&&!this.$refs.particulars.$el.contains(t.target)){for(var e=!0,i=document.getElementsByClassName("list-box"),a=0;a<i.length;a++){if(i[a].contains(t.target)){e=!1;break}}this.taskDetailShow=!e}}}},E=(i("/mOC"),Object(h.a)(R,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"archiving-task"},[i("div",{directives:[{name:"empty",rawName:"v-empty",value:t.taskList,expression:"taskList"}],staticClass:"archiving-task-body"},t._l(t.taskList,function(e,a){return i("task-cell",{key:a,attrs:{data:e,"data-index":a},on:{"on-handle":t.taskCellHandle}})})),t._v(" "),t.taskDetailShow?i("particulars",{ref:"particulars",attrs:{id:t.taskID,"detail-index":t.detailIndex},on:{"on-handle":t.detailHandle,close:t.closeBtn}}):t._e()],1)},[],!1,null,"3a684254",null));E.options.__file="archivingTask.vue";var M=E.exports,N=i("utuE"),_={components:{MembersDep:N.a},props:{workId:[Number,String],title:String,color:String,isOpen:[Number,String],addMembersData:Array,name:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,projectSetShow:!1,colorList:["#53D397","#20C1BD","#58DADA","#0FC9E7","#3498DB","#4586FF","#8983F3","#AEA1EA","#FF6699","#F24D70","#FF6F6F"],tabType:"base",setColor:"",setTitle:"",setIsOpen:0,openOptions:[{value:0,label:"私有：只有加入的成员才能看见此项目"},{value:1,label:"公开：企业所有成员都可以看见此项目"}],membersList:[],optionList:[]}},watch:{addMembersData:function(){this.membersList=this.addMembersData||[]},tabType:function(t){"member"==t&&0==this.optionList.length&&this.getGroupList()}},created:function(){this.membersList=this.addMembersData||[]},beforeDestroy:function(){},methods:{getGroupList:function(){var t=this;Object(u.k)().then(function(e){t.optionList=e.data||[]}).catch(function(){})},projectSetting:function(){this.setColor=this.color,this.setTitle=this.title,this.setIsOpen=this.isOpen,this.tabType="base",this.$emit("click")},submite:function(){var t=this;"base"==this.tabType?(this.loading=!0,Object(u.p)({name:this.setTitle,color:this.setColor,isOpen:this.setIsOpen,workId:this.workId}).then(function(e){t.loading=!1,t.$message.success("操作成功"),t.$emit("submite",t.setTitle,t.setColor,t.setIsOpen),t.close()}).catch(function(){t.loading=!1})):(this.loading=!0,Object(u.h)({list:this.membersList,workId:this.workId}).then(function(e){t.loading=!1,t.$message.success("操作成功"),t.close()}).catch(function(){t.loading=!1}))},close:function(){this.projectSetShow=!1,this.$emit("close")},userSelectChange:function(t,e){var i=this;Object(u.p)({workId:this.workId,ownerUserId:t.map(function(t){return t.userId}).join(",")}).then(function(t){i.membersList=t.data,i.$emit("handle","member",t.data),i.$message.success("添加成功")}).catch(function(){})},deleteMember:function(t,e){var i=this;Object(u.m)({workId:this.workId,ownerUserId:t.userId}).then(function(t){i.membersList.splice(e,1),i.$message.success("删除成功")}).catch(function(){})}}},L=(i("/rQu"),Object(h.a)(_,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-settings"},[a("el-popover",{attrs:{placement:"bottom-start",width:"400","popper-class":"project-settings-list-top",trigger:"click"},model:{value:t.projectSetShow,callback:function(e){t.projectSetShow=e},expression:"projectSetShow"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"project-settings-box"},[a("p",{staticClass:"project-settings-title-top"},[a("span",[t._v("项目设置")]),t._v(" "),a("span",{staticClass:"el-icon-close rt",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"title-checked"},[a("span",{staticClass:"span-item",style:{color:"base"==t.tabType?"#3E84E9":"#333333"},on:{click:function(e){t.tabType="base"}}},[t._v("基础设置")]),t._v(" "),0==t.isOpen?a("span",{staticClass:"span-item",style:{color:"member"==t.tabType?"#3E84E9":"#333333"},on:{click:function(e){t.tabType="member"}}},[t._v("成员管理")]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"base"==t.tabType,expression:"tabType == 'base'"}],staticClass:"infrastructure"},[a("div",{staticClass:"row"},[a("span",{staticClass:"label name"},[t._v("项目名称")]),t._v(" "),a("div",{staticClass:"color-dynamic"},[a("el-input",{attrs:{size:"mini"},model:{value:t.setTitle,callback:function(e){t.setTitle=e},expression:"setTitle"}}),t._v(" "),a("span",{staticClass:"dynamic-span",style:{background:t.setColor}})],1)]),t._v(" "),a("div",{staticClass:"row"},[a("span",{staticClass:"label"},[t._v("图标颜色")]),t._v(" "),a("div",{staticClass:"color-box"},t._l(t.colorList,function(e,i){return a("span",{key:i,style:{background:e},on:{click:function(i){t.setColor=e}}})}))]),t._v(" "),a("div",{staticClass:"row"},[a("span",{staticClass:"label name"},[t._v("可见范围")]),t._v(" "),a("div",{staticClass:"color-dynamic"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.setIsOpen,callback:function(e){t.setIsOpen=e},expression:"setIsOpen"}},t._l(t.openOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"member"==t.tabType,expression:"tabType == 'member'"}],staticClass:"add-members"},[a("members-dep",{attrs:{"user-checked-data":t.membersList,"close-dep":!0,"content-block":!1},on:{popoverSubmit:t.userSelectChange}},[a("div",{staticClass:"img-span",attrs:{slot:"membersDep"},slot:"membersDep"},[a("img",{attrs:{src:i("LlMb"),alt:""}}),t._v(" "),a("span",{staticClass:"add-title"},[t._v("添加成员")])])]),t._v(" "),a("div",{staticClass:"member-section"},t._l(t.membersList,function(e,i){return a("div",{key:i,staticClass:"member-row"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.img),expression:"$options.filters.filterUserLazyImg(item.img)",arg:"background-image"}],key:e.img,staticClass:"div-photo"}),t._v(" "),a("span",{staticClass:"member-row-name"},[t._v(t._s(e.realname))]),t._v(" "),a("div",{staticClass:"rt"},[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.roleId,callback:function(i){t.$set(e,"roleId",i)},expression:"item.roleId"}},t._l(t.optionList,function(t){return a("el-option",{key:t.roleId,attrs:{label:t.roleName,value:t.roleId}})})),t._v(" "),a("span",{staticClass:"el-icon-close",on:{click:function(a){t.deleteMember(e,i)}}})],1)])}))],1)]),t._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submite}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.close}},[t._v("取消")])],1)]),t._v(" "),a("p",{staticClass:"title",attrs:{slot:"reference"},on:{click:t.projectSetting},slot:"reference"},[t._v("项目设置")])])],1)},[],!1,null,"587e3f67",null));L.options.__file="projectSettings.vue";var j=L.exports,S=i("UinD"),O=i("7Qib"),B={props:{workId:[Number,String]},data:function(){return{zIndex:Object(O.h)(),menuList:[{label:"成员",id:"1",expand:!1,list:[]},{label:"截止时间",id:"2",expand:!1,list:[{id:"1",name:"今天",type:"time",checked:!1},{id:"2",name:"明天",type:"time",checked:!1},{id:"3",name:"本周",type:"time",checked:!1},{id:"4",name:"本月",type:"time",checked:!1},{id:"5",name:"未设置截止时间",type:"time",checked:!1},{id:"6",name:"已延期",type:"time",checked:!1},{id:"7",name:"今日更新",type:"time",checked:!1}]},{label:"标签",id:"3",expand:!1,list:[]}]}},created:function(){this.getUserList(),this.getTagList()},mounted:function(){document.getElementById("app").addEventListener("click",this.taskShowHandle,!1)},methods:{getUserList:function(){var t=this;this.menuList[0].list=[],Object(u.n)({workId:this.workId}).then(function(e){t.menuList[0].list=e.data.map(function(t){return t.checked=!1,t.name=t.realname,t.type="user",t})})},getTagList:function(){var t=this;this.menuList[2].list=[],Object(S.c)().then(function(e){t.menuList[2].list=e.data.map(function(t){return t.id=t.labelId,t.checked=!1,t.type="tag",t})}).catch(function(){})},close:function(){this.$emit("close")},rowChecked:function(t){if("time"==t.type){var e=!0,i=!1,a=void 0;try{for(var n,l=s()(this.menuList[1].list);!(e=(n=l.next()).done);e=!0){var o=n.value;t.id==o.id?o.checked=!o.checked:o.checked=!1}}catch(t){i=!0,a=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw a}}}else t.checked=!t.checked;var c=[],r=!0,d=!1,u=void 0;try{for(var m,h=s()(this.menuList[0].list);!(r=(m=h.next()).done);r=!0){var p=m.value;p.checked&&c.push(p.userId)}}catch(t){d=!0,u=t}finally{try{!r&&h.return&&h.return()}finally{if(d)throw u}}var v="",f=!0,g=!1,b=void 0;try{for(var y,k=s()(this.menuList[1].list);!(f=(y=k.next()).done);f=!0){var w=y.value;if(w.checked){v=w.id;break}}}catch(t){g=!0,b=t}finally{try{!f&&k.return&&k.return()}finally{if(g)throw b}}var C=[],I=!0,A=!1,x=void 0;try{for(var D,T=s()(this.menuList[2].list);!(I=(D=T.next()).done);I=!0){var R=D.value;R.checked&&C.push(R.id)}}catch(t){A=!0,x=t}finally{try{!I&&T.return&&T.return()}finally{if(A)throw x}}this.$bus.$emit("search",c,v,C)},resetBtn:function(){var t=!0,e=!1,i=void 0;try{for(var a,n=s()(this.menuList);!(t=(a=n.next()).done);t=!0){var l=a.value,o=!0,c=!1,r=void 0;try{for(var d,u=s()(l.list);!(o=(d=u.next()).done);o=!0){d.value.checked=!1}}catch(t){c=!0,r=t}finally{try{!o&&u.return&&u.return()}finally{if(c)throw r}}}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this.$bus.$emit("search",[],"",[])},rowFun:function(t){t.expand?t.expand=!1:t.expand=!0},taskShowHandle:function(t){this.$el.contains(t.target)||this.close()}}},G=(i("dwXQ"),Object(h.a)(B,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-fade"}},[i("el-card",{staticClass:"project-screening",style:{"z-index":t.zIndex}},[i("p",{staticClass:"header"},[i("span",{staticClass:"label"},[t._v("任务筛选")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:t.resetBtn}},[t._v("重置")]),t._v(" "),i("span",{staticClass:"rt el-icon-close",on:{click:t.close}})],1),t._v(" "),i("div",{staticClass:"content"},t._l(t.menuList,function(e,a){return i("div",{key:a,staticClass:"menu-list"},[i("p",{staticClass:"item-label",on:{click:function(i){t.rowFun(e)}}},[t._v("\n          "+t._s(e.label)+"\n          "),i("span",{class:e.expand?"el-icon-arrow-right item-expand":"el-icon-arrow-down item-expand"})]),t._v(" "),t._l(e.list,function(a,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.expand,expression:"item.expand == false"}],key:s,class:["item-list",a.checked?"item-list-active":""],on:{click:function(e){t.rowChecked(a)}}},["user"==a.type?i("div",{directives:[{name:"photo",rawName:"v-photo",value:a,expression:"val"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(a.img),expression:"$options.filters.filterUserLazyImg(val.img)",arg:"background-image"}],key:a.img,staticClass:"div-photo"}):t._e(),t._v(" "),"tag"==a.type?i("i",{staticClass:"wukong wukong-tag",staticStyle:{"margin-right":"10px","vertical-align":"text-top"},style:{color:a.color}}):t._e(),t._v(" "),i("span",[t._v(t._s(a.name))]),t._v(" "),i("span",{staticClass:"el-icon-check rt"})])})],2)}))])],1)},[],!1,null,"1390f531",null));G.options.__file="taskScreening.vue";var Z=G.exports,U={name:"Members",components:{MembersDep:N.a},props:{visible:{type:Boolean,default:!1},workId:[Number,String],list:Array,isOpen:[String,Number],permission:{type:Object,default:function(){return{}}}},data:function(){return{zIndex:Object(O.h)(),loading:!1,userList:[]}},computed:{canUpdateWork:function(){return 1!=this.isOpen&&this.permission.work&&this.permission.work.update}},watch:{visible:function(t){t?this.userList=this.list||[]:this.$emit("close")},userList:function(){this.$bus.$emit("members-update",this.userList)}},mounted:function(){document.getElementById("app").addEventListener("click",this.taskShowHandle,!1)},methods:{userSelectChange:function(t,e){var i=this;this.loading=!0,Object(u.p)({workId:this.workId,ownerUserId:t.map(function(t){return t.userId}).join(",")}).then(function(t){i.loading=!1,i.userList=t.data,i.$emit("handle","member",t.data),i.$message.success("添加成功")}).catch(function(){i.loading=!1})},deleteUser:function(t,e){var i=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.m)({workId:i.workId,ownerUserId:t.userId}).then(function(t){i.userList.splice(e,1),i.$message.success("删除成功")})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},close:function(){this.$emit("update:visible",!1),this.$emit("close")},taskShowHandle:function(t){this.visible&&!this.$el.contains(t.target)&&this.close()}}},F=(i("sx/1"),Object(h.a)(U,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-fade"}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"add-members-project-screening",style:{"z-index":t.zIndex}},[a("div",{staticClass:"header"},[a("span",{staticClass:"label"},[t._v("成员"),a("span",{staticClass:"color-a"},[t._v("（"+t._s(t.userList.length)+"）")])]),t._v(" "),a("i",{staticClass:"rt el-icon-close",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"content"},[t.canUpdateWork?a("members-dep",{attrs:{"user-checked-data":t.userList,"close-dep":!0},on:{popoverSubmit:t.userSelectChange}},[a("div",{staticClass:"img-span",attrs:{slot:"membersDep"},slot:"membersDep"},[a("img",{attrs:{src:i("LlMb"),alt:""}}),t._v(" "),a("span",{staticClass:"add-title"},[t._v("添加成员")])])]):t._e(),t._v(" "),t._l(t.userList,function(e,i){return a("div",{key:i,staticClass:"item-list"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.img),expression:"$options.filters.filterUserLazyImg(item.img)",arg:"background-image"}],key:e.img,staticClass:"div-photo"}),t._v(" "),a("span",[t._v(t._s(e.realname)+"\n        ")]),t._v(" "),t.canUpdateWork?a("i",{staticClass:"el-icon-close",on:{click:function(a){t.deleteUser(e,i)}}}):t._e()])})],2)])],1)},[],!1,null,"f01ec0a4",null));F.options.__file="members.vue";var Y={components:{TaskBoard:v,Attachment:y,TaskStatistical:D,ArchivingTask:M,ProjectSettings:j,TaskScreening:Z,Members:F.exports,MembersDep:N.a},data:function(){return{workId:"",projectName:"",projectColor:"",projectData:{isOpen:0},activeName:"task-board",projectHandleShow:!1,membersShow:!1,membersList:[],screeningButtonShow:!0,screeningShow:!1,permission:{}}},computed:{canUpdateWork:function(){return this.permission.work&&this.permission.work.update}},beforeRouteUpdate:function(t,e,i){this.workId=t.params.id,this.membersShow=!1,this.screeningShow=!1,this.getDetail(),this.getMemberList(),i()},created:function(){this.activeName="task-board",this.workId=this.$route.params.id,this.getDetail(),this.getMemberList()},methods:{getDetail:function(){var t=this;Object(u.o)({workId:this.workId}).then(function(e){var i=e.data;t.projectData=i,t.projectColor=i.color,t.projectName=i.name,t.permission=i.authList.work||{}}).catch(function(){})},tabClick:function(t){this.screeningButtonShow="task-board"==this.activeName},getMemberList:function(){var t=this;Object(u.n)({workId:this.workId}).then(function(e){t.membersList=e.data||[],t.$bus.$emit("members-update",t.membersList)}).catch(function(){})},userSelectChange:function(t,e){var i=this;Object(u.p)({workId:this.workId,ownerUserId:t.map(function(t){return t.userId}).join(",")}).then(function(t){i.membersList=t.data,i.$bus.$emit("members-update",t.data),i.$message.success("添加成功")}).catch(function(){})},deleteProject:function(){var t=this;this.$confirm("确定要删除项目吗？删除后此项目中的所有任务将一并彻底删除，无法恢复","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.i)({workId:t.workId}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.$bus.$emit("delete-project",t.workId)}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},exitProject:function(){var t=this;this.$confirm('确认退出 "'+this.projectName+'"',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.l)({workId:t.workId}).then(function(e){t.$message({type:"success",message:"退出成功!"}),t.$bus.$emit("delete-project",t.workId)}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"取消操作"})})},archiveProject:function(){var t=this;this.$confirm('确认归档项目 "'+this.projectName+'"',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.p)({workId:t.workId,status:3}).then(function(e){t.$message({type:"success",message:"归档成功"}),t.$bus.$emit("delete-project",t.workId)}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"取消操作"})})},setSubmite:function(t,e,i){this.projectData.isOpen!=i?(this.getDetail(),this.getMemberList()):(this.projectColor=e,this.projectName=t,this.$bus.$emit("project-setting",t,this.workId))},projectSettingsHandle:function(t,e){"member"==t&&(this.membersList=e)},membersHandle:function(t,e){"member"==t&&(this.$bus.$emit("members-update",e),this.membersList=e)}}},z=(i("6yV+"),Object(h.a)(Y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-list",attrs:{direction:"column"}},[a("div",{staticClass:"nav-box"},[a("div",{staticClass:"title"},[a("flexbox",{staticClass:"title-left lt"},[a("i",{staticClass:"wukong wukong-subproject",style:{color:t.projectColor?t.projectColor:"#4AB8B8"}}),t._v(" "),a("span",[t._v(t._s(t.projectName))]),t._v(" "),a("el-popover",{attrs:{placement:"bottom-start","popper-class":"project-settings-182",width:"182"},model:{value:t.projectHandleShow,callback:function(e){t.projectHandleShow=e},expression:"projectHandleShow"}},[a("div",{staticClass:"project-list-popover-btn-list"},[a("members-dep",{attrs:{"user-checked-data":t.membersList,"close-dep":!0},on:{popoverSubmit:t.userSelectChange}},[t.canUpdateWork&&1!=t.projectData.isOpen?a("p",{attrs:{slot:"membersDep"},on:{click:function(e){t.projectHandleShow=!1}},slot:"membersDep"},[t._v("添加项目成员")]):t._e()]),t._v(" "),t.canUpdateWork?a("project-settings",{attrs:{"work-id":t.workId,title:t.projectName,color:t.projectColor,"is-open":t.projectData.isOpen,"add-members-data":t.membersList},on:{close:function(e){t.projectHandleShow=!1},submite:t.setSubmite,handle:t.projectSettingsHandle,click:function(e){t.projectHandleShow=!1}}}):t._e(),t._v(" "),t.canUpdateWork?a("p",{on:{click:t.archiveProject}},[t._v("归档项目")]):t._e(),t._v(" "),t.canUpdateWork?a("p",{on:{click:t.deleteProject}},[t._v("删除项目")]):t._e(),t._v(" "),0==t.projectData.isOpen?a("p",{on:{click:t.exitProject}},[t._v("退出项目")]):t._e()],1),t._v(" "),a("img",{staticClass:"img-right",attrs:{slot:"reference",src:i("IQH5")},slot:"reference"})])],1),t._v(" "),a("div",{staticClass:"title-right rt"},[a("img",{attrs:{src:i("z/qj"),alt:""},on:{click:function(e){t.membersShow=!0}}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.screeningButtonShow,expression:"screeningButtonShow"}],attrs:{src:i("pEgN"),alt:""},on:{click:function(e){t.screeningShow=!0}}})])],1),t._v(" "),a("div",{staticClass:"nav"},[a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"任务板",name:"task-board"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"附件",name:"attachment"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"任务统计",name:"task-statistical"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"归档任务",name:"archiving-task"}})],1)],1)]),t._v(" "),a("div",{staticClass:"content"},[a("keep-alive",[a(t.activeName,{tag:"component",attrs:{"work-id":t.workId,permission:t.permission}})],1)],1),t._v(" "),t.screeningShow?a("task-screening",{attrs:{"work-id":t.workId},on:{close:function(e){t.screeningShow=!1}}}):t._e(),t._v(" "),a("members",{attrs:{"work-id":t.workId,list:t.membersList,"is-open":t.projectData.isOpen,permission:t.permission,visible:t.membersShow},on:{"update:visible":function(e){t.membersShow=e},handle:t.membersHandle}})],1)},[],!1,null,"84546d38",null));z.options.__file="index.vue";e.default=z.exports},Krvl:function(t,e,i){},LlMb:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAATCAYAAACUef2IAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEzNjBFQUJFRTcxNzExRTg5NUFERjE0QjY3QjJCMTI1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEzNjBFQUJGRTcxNzExRTg5NUFERjE0QjY3QjJCMTI1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTM2MEVBQkNFNzE3MTFFODk1QURGMTRCNjdCMkIxMjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTM2MEVBQkRFNzE3MTFFODk1QURGMTRCNjdCMkIxMjUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz518FzOAAABB0lEQVR42mK0a3nJgAWoAnEHELtA+XuAuAKIbzMQCViwiKkD8QkgFkASCwJiJyC2AOKbxBjMhEWsDc1QGBCAyjGQa7ALHvVulBhMFYDN4D141O/CI/eQkMHVQPwBi/gHqBwuIEfI4BvQ2F8HxJ+heB1U7AYlyY0BmqSCidD/EM2l/6H0I2QX+wLxPqgL/+PAn6FqfKB65IGYEYoZkNjyMINbgHgTEDsCMQ8eF/JA1WyG6sGbKnwIRAouUA31JQw8Qje4iILkWojElkc32IQCg01olfMY8Rl8hgKDT+MzuJ8Cg/vxGQxKOq1kGNoK1Ys3jGuA2B+I9wPxVzyGfYWq8YPqwQkAAgwA++EzJAdx7GYAAAAASUVORK5CYII="},M6tP:function(t,e,i){},ME4h:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var a=i("t3Un");function s(t){return Object(a.a)({url:"work/workStatistics",method:"post",data:t})}},MEpo:function(t,e,i){"use strict";var a=i("pTlS");i.n(a).a},MKFU:function(t,e,i){},MqKM:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALsAAADTCAYAAADZN2JdAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjcwRTM0MzU5RENGODExRThBNTZGRjRENjNBNUY3NDcyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjcwRTM0MzVBRENGODExRThBNTZGRjRENjNBNUY3NDcyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzBFMzQzNTdEQ0Y4MTFFOEE1NkZGNEQ2M0E1Rjc0NzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzBFMzQzNThEQ0Y4MTFFOEE1NkZGNEQ2M0E1Rjc0NzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4biGhVAAAX/klEQVR42uydCZhdVZHH63U6CaSzdGftJglZIZmEJGRAIkSIKMiOCJJhJGYYkU0BcTAMOCMoI6iIfsriAgiMgCgyiAkjiAhkhgQIJBDTCQSydGff1yZLQxLrf8+5ndvdb7nv3nP3+n1ffVn69VvO/b+6deqcqpPbuXMnCa44lO0qtovYRrHtY/sb26Nsv2L7SIYo3uRE7K4YyvYc2xEFfv4a27lsG2Wo4kuFDEFJqtj+pIVez3YOWze2arYvsC1n+zjbH9k6yHCJ2JPMtWwjdMhyPNszbE1s29ke10Jv1D+bIsMlYk8yF+s/v6FF3pYNbN/Wf/9nGa6iXCAxe3zpyLaXbT9bZz0pzUd/tlU6Zu8rw5aXj7G9znYa21/EsyefZhmCgtwC58r2IFuNiD1+fMj2jp54fqrI407Vf9bLkOXlGLYz9d8HsN0lYo8nj+o/7yCVmWlLX0fM/rgMV15u1l7dZkoU8bvE7KWBwOeSysjAc9/E9hJbJdsZbLeRysMj1/6JInF9Vhmvxy/X5v83sY1hWydijxeyqOSdp9g+V+BnSONOZtstYUx8WMY2ju3f2d5m20UqDYnswpVsJ4rQ83IZ23lFfn4221K260htxxDPLiSOfqT2C51Vxu+s1/OiX2hnIp5diD2f13Obszx8QX5EavsFFvC6itiFuIK9Qo+w/Z6tt4/nQXbrB6S2aRilUq6RYIB/ZHuabaCB58I+oy+xvSie/SBY6LmC7Vm2l9l+yFYruouEt3XoscDn8/w329gghJ7kCSqEPoNUntvJWrZT2BaJ/iIBzhNpxpu1aN2yQTuup4N+c0nkmjxCB3Vs94vmIgMb5v6H7Wi287XHL8XzpBaXng7jm5hEii01n0BqgUeIjgNsf9Cx/NeLPA6LSZdoz04i9vyUWoD4L5JMU1xE/xO26QV+fr8OPUOhnJj9ELbT2T7NNpjU/u51elKCJeGlIQ7ivWxfKfEYFF38RvQWC/ppnfRx/N8etmFsa+Ik9pyePHyL7bASsdq/kSpiCBpU9/+Nitd8LmH7B5Kq/7hwvtaI02FdHeYbKCX2LqS2uH7O5fNhJ9tn2WaH8N4f0vFeMfAlvc/Q69XpO5ptqE7qRWoBBR7LLsKGc0CFk70CuIPUTsh9+u/bSO2j2awNzgGrhg3a0rzHBqnFqaSqv4aH5Bhdib1Cz5DPKfM58YQoZng94Pc+hO1dtk5FHrNaD+qeMp4XX/BjSaXOxug/j6IAlq8LsE3fter1n/PZ5lE6qqCq9Wd6xkUYGqrYcYu52+PzwjudpMUYJHe7uBVez/bjIj/vyXYyqb3ox+sMQseYiQRZizf1HfMVUotoTQkVPCq+3mdbGRexV+lbqp89Dqu0eIK8VdXp2LxLiS/eMH3Hsecgx+rJNnL1x1Hy+r00a9Fjj/2zJOWAvsSOFm8mSswWU/B7vb/HdmOJx9yihYFCAezKG5Sy64hxfoLtd2wLRdblif2XbJcbeg3E7p/Rk7MgQBiC4ooecjktIPaH2X5NIS3WJIVCCy8DDb7GBFKraZ0C+gxbSG0CExSj9Xis1N7+VGpf/ylib5ORMD0peTzA2Pgu8WLtgHO5kNTeE8T0l5JaCBSx55nUmQaLCvcG4GWQ4/4mhVDDmGCwCPeATjpgrLqJ2A8yP6DXwyLP7QZj9dt0vH5jVi9gmdQ6xgzF41UyQVXL7AsDjPWw0f9HHn8XHhzbEqbJpNQ3KHK+ldQqc+q3VRTy7Gj59lSAr4sJ1NRyv5ikuuRioeq7InQj9NOhJe7kp2fVswMsx78VoKj26Th+uovHomfLz0ktUgnBgbWIr+owJzOeHSzXYgxqTwYyM8jQnFwiZMGi0Zsi9FCAd6/XYWbqivHdbPFF6PAIBZc2xAkWk/JMij+pY8kjRIORgP6MXyZ3pXWJ9+w28L7XBPgeECahOf1w/e/OOqb/qwg9UtBmeg7bDZSSqi+3HwLx8n8G+D6QK/8zqdW+1/RtVMrqoge7P9Gw6AUyu6oe2zDGyV0Be3khvmwllUF7Ju2e3eZrbI/Jdc8kOBoGx19+O6l33XLfNKrF0Zpshlz7TAK93KKvf03axQ6QisR+99ly7TPLmXpudUTaxQ526Q+8QK57ZjlSC35i2sUOkB/HIsQSue6ZBZvxkDY+L+1iB2hwgzrO9XLdMwtWuZ+kgyeBp1bspD37qdrTC9kEq+soA7w8zm/SZMtqtKLAwlAXufbRsnnzZlq1ahXZ17Z79+7Uv39/6tWrV9AvjWwdGpn+NO1iB+fqW5qxviv79++3rLJSDglxQ0NDAzU2Nub92eDBg2nQoEFhCB4e/oG0i5107IaNY0YKP3DhPvroIxo2bJgo2YVHr6+vp1wuZ4m6X79+1v+vW7eOVqxYQQcOHKCxY8dSTU3gKXJs3/4ixezE7yBWwh6j4j25XbN3717rIq1evZp27dolai4BQhdw+OGHW9a5c2fLIHzbo69cGUojLjuGPzftYgfYC7/f75MsW7bMCmHgkfB3oTg7dqjWPIjP21Jbq46bCvFYoUrt2SekWexj9Le6wu+F27BhA1VUVFCHDh2sW/SWLVtE0cWC5QMHlFvt0L70wP4/OI8QQbICzXEHpFHs+FB/Ip+lfLggS5YsafFSuCWDpUuX0r59+0TVhZTVpUtL7J4vngddu3YN+23VmtBE3MSOpjxP+P0Wb9q0id544w3rdtupUydL6BD8oYceasXtc+bMsTy+0J66ujrrz/fff7/VXXDr1q0tzsMOZ0IGd/sHKeLOZCazMT9ju8rrL+/evdu6IPZFgpc68sgjrRwxaGpqovfee8/6E1RXV9Pw4cOpqqpKVO4IYxYsWGCJG3Ts2NEKAzHRB71796ZRo0ZZ2ZqI+A8y1zcoMrH/q/7megIZF6QY7XgS+eCBAwe2uyi4mGvWrLHCGevN88/xuCFDhojSHWOEXDsyWHbIh3h9wIABVkYmQqEDvCFsIHw+qWIfSao41/PK6Z49eywBI4QBCFmQV+/Zs2erx23bts3y/nYaEvlieHc7VhVaz3twt7TvkhGL3An2UY2jCPZT+RU74vRXSZ1W4RuEMBCzfZEQq9uLSfD89sogcsf4/z59+oiqkwkOUDiL1GprYsR+B6k2dEY9EhY+IGzcksePH2/dhufOnWv9214wyZdeExIFapnvSYrYcWbSSxTQwhTCGqwIYoKKfTHw+sgkjBgxQmSSDnCo23gK/tytFrwKFQcA30cBFt5iMoVsAhaXIHR4cpmIpgpoCCdc5+IudvSQCdTFwps7xY3QBXl3IVVgW/gVcRY7zgW9IYw3h7AFK37IziB1JqSS75M6QDl2Ys/pSUUo54QiXYasy9ChQ63FESGV9NCJjthNULFH+ddpGGHMAxYvXkzNzc0iNxcghERyoO3ahyGQgkSXglfj4tmxcnN7Wi6eCL08MFYYs6CcLqnWirm4iP06islWTVMXT4jVmOHU8SlBvoDbws5qMrx4FCcmTZokSi7CzJkzw3qp75A6pTuQb5Vbz369FrwgBAlyzZdFGcag/8LX5DoIIXETBXQ4sRuxI1aXM0aFsEDOfWoUYkcN11dl/IWQCeRom1JPiKKMGhl7IWRwvtY5YYodmZprZdyFiLg+TLGfTQdPsBOEsDmR1Il9oYj9KhlvIWKuDEPsg9lOkbEWIgYHTncLWuyXkJxDKkQP+qRMDlrsF8s4CzHBmBbz7Y05RiamxUH3A7STM9WKDyWHOCgARSpCO7BxCW3M1gXh2SfL+BbHpNABnitff0ahRaMXBhHG5ETsQgwxIva2YQxaGwyOw6dDjxi001i/fr118kacQMgRRBgjFARVTH3ZNpgU++lx+XQQOvoVxhEpAI8klDmN1PFFxsKYM+Ly6eDRBcGkI3Z6dhRnHB+XT+YMXUaPHm38+RcuXCjySRanaefs+egQp2c/mdTBT4IQRzCpOdpUGCOFmELcOdFUGPMJGUt3mF5U8kJGF6KQlfF8erbt2dETZpzI2B1RCx1kdCHqBBNhzDHkvq2GIEQF6lMH+RX7eBnHMmZKHD5EfRhChheiPEcglSL28pFFpUjBMZPT/Xj2o2QMhQSJ3VcYM1LGUEgIR/kRO/YKd5UxFBICai1yXsU+WMZPSBBojVfndYIqYi+TOCwqeSFFC1FD2dZkTuxNTU3WVuAw97wnUejAXohKQSYJmn3FSxjTP8mfOmyhC7HAUxgDscuZ6GUSh0UlP2FMCujrNWZP9Kfv379/6N5dFpUip6dXsfdM8qfGOalejniX4o1k31y9hjFS6StkwrND7J1l7ISEcYhXsUsbKiETYq+khDcwjSLPjp42W7dupQ8++ID279+fiHGqqKigqqoqqqmpoVwul3Sxe0qFQeiJPhwsijw7hL5z587ECB3gveI9b9u2LQ2e3dNeLqlO8gA8ujXiXbtaqc/KyngPI5wBnALugjB49ywCz74zyR8gCrHZHj0JQrc8Gr9HvFfne084TV49e6I/fZR59iQIPYnv1QWeNibBs++WwERIGHu8in2vjJ2QFbFLF3whaWzxGrNvSfKnjiLPHhTNzc2t/t2pUyeRdX42exV7KJ4d20uxmGFalEkXOnL2KKhA9VM+unXrRocddpgI35Bn3xhWNqBjx47WRU1ilY9pduzYQatWrSo5FlgIWrx4MdXV1VHv3r1F5gpPJ3AgZl8TltgB9oKbLHxISq47X/jVVugYl0Jjs3btWusuIKjh8OrZl4chdOd+DAge+0sQfsD8ePqk72eHuOG1u3fv3kroWKWF53fG8RB8Vlc/29Dg1bM3BC30Qw5pv0kN4kdYk4JNSZ6prq6mUaNGWQJu69GxaQtfYmesDqeA8Efw5qADFXshodvs2bMns8XSiL8HDhxY8nF9+7Yutyw0kc0Qe72G3hA7Tg5uCuJdIVT58MMPrT9F6K1xm11p+ziZ3NMSSMur2ME7QbwrXJi9e/da8SfE7fwSSPsL92PoRI58p3qvv2iLPfDZGsRtC16E7p7t27e3+jcmshlngV+xvxXGu4TI4elF7O5AfO4stsACUxL71cRF7JVhih0ghhdKg5Tj8uUHkw4QOVZSBZrv17PPheOVcYyX0J3x+qBBg2TLgMrCNPoV+y4/3xjBvNCdi0lDhw618u4CzfLzyxWmnkgwgwg9HLG/LGMZLQ0NDSL04rxiSuwvkcfaPsE/dnsOGzROFaG3Att63zIlduS4XpUxjQZnPh0LR7Lhqx3Pkc/mAG27gT0rYxoNWH+wQT5dyCt2Min252RMo0cWjtoBj/5n02JHTNQgYxstbWtRBcK+5gOmxY4n/L2Mbfh06dKl5e/OiapgUc02A8Pk50ny1bM9wTZNxjdcsLfdzf72DDOB7SG2i8jnFl8nb7ItlbEVYshktttNhTE2j8m4CjHlRrapJsX+ECW84WkSsWtMpRqpJPezfcpEzA4a2F5g+4yMazhgBRXdBGywy1EKNQqC7Z9Psh1HqkzPl2cHv5AxDY8NG1r3/UHbDKEoWGLGImgfE2KfIRNVIeYM1x6+k1+xo5jjpzKe4dC2ZUbbfwsFOYntQbaSDYhK9Y3DRPVWUkl9Ich7ck2N1WMHnRiw21G6CJTFxWzvsn3Xq2cH6Cdzj4xlOEDgaJ4kQvfErVr0nsVOOpSR9Wsh7iCM+RWplVbPYt8ksXvyyUj7ks6kEivDvYod/JhUcYeQUAFlaHMZUpF/ZOtR7gTVBo3B7yw1AYiCZcuW0a5du8q/5/noHoyj0XGeKE79SEJ/eHRiW79+fct7zwCj2J5iO4OtuVyx2979crbD4/Sp0PbZi9j9gGwJPCUOFMCpGEkC/ewzArYT3M12RblhDECv5Gly8VSaEKVzSfKSeK94z3AOGQLO+UYvnh2gsONqthPj8mnQJQuFD7Z3HzlyJNXW1pb8vZkzZ3qf9nMI1LNnT8sEI8xjG08uFoY8gNAbHe/+Uq5rwqb5a9hi1bCxV69eLX93bqYSEgFK7j7L9s2Anh8FvffBL3q5D8/Xk9XY4Oxuizh606ZNIqHkgDADHur7WpRBMJhtstegE6tV78UpHu3Xr1/Lv5GhQbZEiD3o8OXcXYuo4cWAXusCr2LHqQKXkYGKb1Ng4mWnABG/r1ixouBjnW2zM5KKiyP5NIQ04flsiwJ4vbF+rvT/sf0kTt4dOW+bxsbGdqdW2CDUsZF9KJGBGP3dPP+/Xcfwpg+jrq0w8IYXxmX0ELv36KEWznBuU319fd7T5ZyFEhlLxcWFF0s4SlQfnUPqZDxTNPkVO25F/0Sqv3sswOkUOF/VDlfmz5/fatEJDYicYnfG+kIoYPCnuAiBX2e71GCovNJEwArPfnVcRhJZmSFDhrTE4lgqnzdvXovA0RbanrziLiB9FUMFleRfJPfHsaPLxc2GXnumqdkZijx+GZcRxUITepvb6Uhs2Fq0aJHl5Z21nShqFkIFwn2+zN+5jfy3dsHd4UGTO5iuZTuaiuwnDhNU/QwbNsyaqNodcp0nz6FyH1sNTOxcxJcqyGPpMf9IQXuNp9m+51GoX2JDu7STPL72o4hATIodaaPPk+rxPiAuHh6CRwizefPmVj9Df5bZs2eLrw0HHOd4iY/429YWLtjwMn8Xk13k78l0khkrYWeyfRCXUUbsjr0ySEtKK2j/d0sPbNSa2O7z5Tdqzz6vjN/Badgn269dGdC3+Auk9hPHRl1IMcIwYYVXR2GzydbQmPSaXrWN0z55rEfgLumBdWSurHOtFjxW8L+C71+Bx2Eh5V79uJZUXC7ACpYr2X5GHneyOXcljh49Wtwqgs6FB5c0Jk2alKS3jrz62aS2iZsCvUaw2voxtjqtM3yxIJzppM5gakUu4HKtb7D90Msvzpo1S459L+LxJ06cmLS3PV2LM7KZdtAbQ+7Ut5KykcWewtTV1SXxbZ9Lqvo/l1axg1vIw5ZgxIdJqO8M26NjTLBollD+he0HUb14LsSq8++QudUwIdncRGr/emrFDm7QHzIn1zvTIN+OjV7/m7YwxskdpFJG0m0/28DZofK/Y5rFDlCZgv3KTXLNMw0mHhelXeykb19YHFgj1zzTnJcFsQMcMIxNY6/LNc8sx2VF7AB7abAUeJ9c90zSN0tiB9h/ixZlqErZLdc/tqDf5xOGn/ODrIndBkeFHMv2tugqdrzMNk5PKB82+LyNWRU7QAuFj5NqonpANBY56DmCBaBPs63U1+TLpPa5mOD5MD9MLsZ9uz9J6nDX4aK5SJinQ8t8d1r0H3mGPBy86wBfHPR3nJ9Vz9721jmW1F4K2f4YHpg3YaV7QpGQEo/BDsa3fLzOb8MUetw9uxPUtv5chzhCcDxHqlOE2/NvccrFLLYjynydJfrLtCXLMXsh4GFOIFUBtUI0Gchc6Qxt5Rz0jFI5tC9/o4zfeYftlLCFniSx2zHe42wj2b5FqtWx4A8000FXiHHaq3thvZ5f3UnFU8dIM6KQB5VFjVF82FyCD5bCSQDT9G23q+i2LDZr4d1DZnPdvXUsj7swGm9iwx/qRmfqCW2kvcTziR2V4A+QqusTBD8sI3UQ72slHjeGVJMteP1yqnVQTP0sqeNktngRO76JtXKdBEPgiJdjXcTxI328BhYkL/USs0thhRAm3X0KHbjK0uUTO1qNrZZrIBhgOeluXEVAouFdn6/zmpsH5TJ08rEQX8boUOSYMiMLxOzIIl3mNWYXhFQiBwoJInZBcMkoUlsGsEPyQBtDDv8PpPLvhcKX2QV+143h+Z8kteYiYneArpzoOdjscWDTboh/0UO9T5nj+jtSi0j58uNdSNWZFjo/CcUgx5P3Brt4/gvIZYvFLMXsOHNzIgmlwCkXU8oQm5sV2AZS3QScIOW43dB7xt6ekt1vs+LZMcOfIDp2RTk7S3E3cHNa4qw8/2ci5WjjKvWYFbHjNj1HdOyKcrs9TCZ12kq+moPdOjS6rsjvvkneq9LwZcM5ANMkjGkfsz+s40uZmLcHx3yiTA5ldxvT+AElzy5kBvFwgohdEETsgiBiF4RsiX0w2wukWtrJqmR7QypuBrkvjhnB9v+UzlVfLEYhbdgrqdkY1BqeJD6kJNjPcaGLx6Evy9EpH4tH2KYmUez7JDRyBboXDyzxmCrKxoENqFMdFsYLmRbmLNGxK9ysUuI2n4Umr6FpxrTYcTv6K6ktm0J7sEqJU0eudvl4dM3FBrY0tv+ztxJ8PawX/LsAAwCCNM/Y5PLeRgAAAABJRU5ErkJggg=="},N0PQ:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZGRjBCRTYxRTBBNzExRTg5QkREOEQxRjlDMkUxOUExIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZGRjBCRTYyRTBBNzExRTg5QkREOEQxRjlDMkUxOUExIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkZGMEJFNUZFMEE3MTFFODlCREQ4RDFGOUMyRTE5QTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkZGMEJFNjBFMEE3MTFFODlCREQ4RDFGOUMyRTE5QTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz704RrgAAABwUlEQVR42uSXz0sCQRTH36h1sGNlaHjpVJoHC0KCOnVJOwSdqmM/6NZ/EF071rluQaduGQWd9BZEqWBhQQQmHYIQikDU6bs6G8Oy4q7sskYPPuzOzFu+++a9mZ1lnHNywlzkkDkm7JEb7/m8rWIDoVBHEc+DEuAaSmLMtqk+An6dfr8Ys0T4BHxJUbUzJq6q/yc47kR4CXg1fevgTcf3Faxp+vrAsuHikqxH054A5y2mWvYxnEaPwZTc/Kl1zJPJBt27gbR667YlnUjYMNWMORMxi8edETZhH+AZ9IIx4LZb+A5sieskGALfYMWW4hIFdQtmwJyIVt5gruEziucfrF5OVbAKZsGpzq42BVIQH+6suFovlRRQojnTzWethl73IO52wYaVEd+DcTDSaFUqRPV6c6RYJJ5ON8WJFqwuLkWl/7cWMhmE4SLm8xHP5YhFIkrEJPsYibhqQDgKCur3moXDROUy8Wy2KRoMqn5PZoQLBoSnxTf7otHyeonFYsSiUVlUsUMzwttAOfnV2my3e2ATvKjiFAjIPpdg30yOr0DYRL6VpbMDFoEPPIpz2EGrl2fyn0S3Hm8tNfbv/p1+BBgA+Vdv2Iz9D6cAAAAASUVORK5CYII="},NGu6:function(t,e,i){},NKOo:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkyNEZERDVFRjEzRTExRTg4QkY0RTZEOTBENUJDRDVFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjkyNEZERDVGRjEzRTExRTg4QkY0RTZEOTBENUJDRDVFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTI0RkRENUNGMTNFMTFFODhCRjRFNkQ5MEQ1QkNENUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTI0RkRENURGMTNFMTFFODhCRjRFNkQ5MEQ1QkNENUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4jB+1jAAAAxUlEQVR42sxUQQ4CIQwEs0f1vKuJPkS/wSt5hu5D1oPLrnevWJJyaQIMGw5OMimhZVJaivbeq5bYqcbo4sJau1nEGFOV4YPo2eIZMnIFvSf8OlfD4PwSj7xOcc9xGmnKmzgUbnYmzmiXP8RTQTD4V1RwFoKTsAE90aGCKx+IuAgbM1xQQcc1KtUQFlxEU17CVl9ZCl6FrW6KA7vc9NkMHKfQhx0m4ZYQC/sHjivOsuKRGonPTIYjx0GC8SPYBP33P/ZPgAEAKNUs9Dp9fGoAAAAASUVORK5CYII="},"NUP+":function(t,e,i){},O1Uw:function(t,e,i){"use strict";var a=i("7Qib"),s=i("KTTK"),n={name:"FileCell",props:{cellIndex:Number,data:Object,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!1},module_id:[String,Number]},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{downloadClick:function(){Object(a.b)({path:this.data.filePath,name:this.data.name})},deleteClick:function(){var t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)({id:t.data.fileId}).then(function(e){t.$message.success("操作成功"),t.$emit("delete",t.cellIndex,t.data)}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},l=(i("qrtF"),i("ZrdR")),o=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("flexbox",{staticClass:"cell"},[a("img",{staticClass:"cell-head",attrs:{src:i("6KEE"),alt:""}}),t._v(" "),a("div",{staticClass:"cell-body",class:{"cursor-pointer":t.cursorPointer}},[a("span",[t._v(t._s(t.data.name.length>20?t.data.name.substring(0,20)+"...":t.data.name))]),t._v(" "),a("span",{staticClass:"size"},[t._v("("+t._s(t.data.size)+")")])]),t._v(" "),a("div",{staticClass:"cell-foot"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.downloadClick}},[t._v("下载")]),t._v(" "),t.showDelete?a("i",{staticClass:"el-icon-delete",on:{click:t.deleteClick}}):t._e()],1)])},[],!1,null,"02fe3bf2",null);o.options.__file="index.vue";e.a=o.exports},ODkR:function(t,e,i){},OPCT:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVENDNERTkxRTA5QjExRThBQkRDQjRERjVBMjY3MzE0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVENDNERTkyRTA5QjExRThBQkRDQjRERjVBMjY3MzE0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUQ0M0RFOEZFMDlCMTFFOEFCRENCNERGNUEyNjczMTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUQ0M0RFOTBFMDlCMTFFOEFCRENCNERGNUEyNjczMTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7c1/V2AAABIElEQVR42mL8//8/AwicPXuWgVxgbGwMZzMRUBsGxBeB+AXITigfL2DBIxcCxHlA7AnEz4CYB4gnQ+VW4dKEz4UNQBwNNQwEvgBxBhAn4XMhPgMFgPghmthPIP5NroF/cYgzkmsgMw7x/+Qa+AGIZbBEIgu5BjYC8VIgloLyQbE8E4gXkJtsVkMt3Ak1DOTiDiBeSa6BDFDNK0nJNdi8rArEa4H4IzQC0PFHqLwqMQaqA/ERID4IxIrQJIKOFaDyR6Dq8Xq5DYon4fHVe6g8J1RtMD4XugDxYiKDazYQu5GSbMgC6AbuAeJYIvWmAPEuQmFYDQ3w/1Cvv8dikCDU0mIgtifkwhtAbAdV+BBHsnkIlbeDqieYsG+ixxwpACDAAIZEQR7SM/O0AAAAAElFTkSuQmCC"},Op00:function(t,e,i){"use strict";var a=i("+9th"),s={name:"TaskCell",components:{},mixins:[],props:{data:Object,dataIndex:Number},data:function(){return{}},computed:{},watch:{},mounted:function(){},methods:{taskOverClick:function(t){var e=this;Object(a.g)({taskId:t.taskId,status:t.checked?5:1}).then(function(t){e.$store.dispatch("GetOAMessageNum","task")}).catch(function(){t.checked=!1})},rowFun:function(t){this.$emit("on-handle",{type:"view",data:{item:this.data,index:this.dataIndex}})},onmouseoverFun:function(t){this.$refs.itemSpan.offsetWidth>this.$refs.listLeft.offsetWidth-21?this.$set(t,"show",!0):this.$set(t,"show",!1)}}},n=(i("nPgy"),i("ZrdR")),l=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"taskRow",staticClass:"list",style:{"border-left-color":1==t.data.priority?"#8bb5f0":2==t.data.priority?"#FF9668":3==t.data.priority?"#ED6363":"transparent"},on:{click:function(e){t.rowFun(t.data)}}},[i("div",{ref:"listLeft",staticClass:"list-left"},[i("div",{class:t.data.checked?"title title-active":"title",on:{click:function(t){t.stopPropagation()}}},[i("el-checkbox",{on:{change:function(e){t.taskOverClick(t.data)}},model:{value:t.data.checked,callback:function(e){t.$set(t.data,"checked",e)},expression:"data.checked"}})],1),t._v(" "),i("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"task-tooltip tooltip-change-border"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",[t._v(t._s(t.data.name))])]),t._v(" "),i("span",{ref:"itemSpan",class:t.data.checked?"item-name-active":"item-name"},[t._v("\n        "+t._s(t.data.name)+"\n      ")])])],1),t._v(" "),i("div",{staticClass:"list-right"},[t.data.labelList&&t.data.labelList.length>0?i("div",{staticClass:"tag-box"},[t.data.labelList.length<=2?t._l(t.data.labelList,function(e,a){return i("div",{key:a,staticClass:"item-label"},[i("span",{staticClass:"k-name",style:{background:e.color}},[t._v(t._s(e.labelName))])])}):[i("span",{staticClass:"k-name",style:{background:t.data.labelList[0].color}},[t._v(t._s(t.data.labelList[0].labelName))]),t._v(" "),i("span",{staticClass:"k-name",style:{background:t.data.labelList[1].color}},[t._v(t._s(t.data.labelList[1].labelName))]),t._v(" "),i("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"tooltip-change-border task-tooltip"}},[i("div",{staticClass:"tooltip-content",staticStyle:{margin:"10px 10px 10px 0"},attrs:{slot:"content"},slot:"content"},t._l(t.data.labelList,function(e,a){return i("div",{key:a,staticClass:"item-label",staticStyle:{display:"inline-block","margin-right":"10px"}},[a>=2?i("span",{staticClass:"k-name",staticStyle:{"border-radius":"3px",color:"#FFF",padding:"3px 10px"},style:{background:e.color||"#ccc"}},[t._v(t._s(e.labelName))]):t._e()])})),t._v(" "),i("span",{staticClass:"color-label-more"},[i("i",[t._v("...")])])])]],2):t._e(),t._v(" "),i("div",{staticClass:"img-group"},[t.data.relationCount?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-relevance"}),t._v(" "),i("span",[t._v(t._s(t.data.relationCount))])]):t._e(),t._v(" "),t.data.childAllCount>0?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-sub-task"}),t._v(" "),i("span",[t._v(t._s(t.data.childWCCount)+"/"+t._s(t.data.childAllCount))])]):t._e(),t._v(" "),t.data.fileCount?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-file"}),t._v(" "),i("span",[t._v(t._s(t.data.fileCount))])]):t._e(),t._v(" "),t.data.commentCount?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-comment-task"}),t._v(" "),i("span",[t._v(t._s(t.data.commentCount))])]):t._e(),t._v(" "),t.data.stopTime?i("div",{staticClass:"img-box"},[i("i",{staticClass:"wukong wukong-time-task",style:{color:1!=t.data.isEnd||t.data.checked?"#999":"red"}}),t._v(" "),i("span",{style:{color:1!=t.data.isEnd||t.data.checked?"#999":"red"}},[t._v(t._s(t._f("moment")(t.data.stopTime,"MM-DD"))+" 截止")])]):t._e()]),t._v(" "),i("div",{staticClass:"item-own-box"},[t.data.mainUser&&t.data.mainUser.id?i("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",[t._v(t._s(t.data.mainUser.realname))])]),t._v(" "),i("div",{directives:[{name:"photo",rawName:"v-photo",value:t.data.mainUser,expression:"data.mainUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.data.mainUser.img),expression:"$options.filters.filterUserLazyImg(data.mainUser.img)",arg:"background-image"}],staticClass:"div-photo"})]):t._e()],1)])])},[],!1,null,"4b690c7d",null);l.options.__file="taskCell.vue";e.a=l.exports},PmHp:function(t,e,i){"use strict";var a=i("XYVu");i.n(a).a},QJC7:function(t,e,i){"use strict";var a=i("3yi6"),s=i("5tgW"),n=i("vG5h"),l=i("qbf4"),o=i("UcQx"),c=i("6zBA"),r={name:"RecordLog",components:{FollowRecordCell:a.a},props:{id:[String,Number],crmType:{type:String,default:""}},data:function(){return{loading:!1,loadMoreLoading:!0,isPost:!1,page:1,list:[]}},computed:{},watch:{id:function(t){this.refreshList()}},mounted:function(){var t=this;this.$bus.on("follow-log-refresh",function(e){"record-log"==e.type&&t.refreshList()});var e=document.getElementById("follow-log-content");e.onscroll=function(){var i=e.scrollTop+e.clientHeight-e.scrollHeight;Math.abs(i)<10&&1==t.loadMoreLoading&&(t.isPost?t.loadMoreLoading=!1:(t.isPost=!0,t.page++,t.getList()))},this.getList()},activated:function(){},deactivated:function(){},beforeDestroy:function(){this.$bus.off("follow-log-refresh")},methods:{getList:function(){var t=this;this.loading=!0;var e={customer:n.v,leads:s.i,contacts:l.j,business:o.j,contract:c.j}[this.crmType],i={page:this.page,limit:10};i[this.crmType+"Id"]=this.id,e(i).then(function(e){t.list=t.list.concat(e.data),e.data.length<10?t.loadMoreLoading=!1:t.loadMoreLoading=!0,t.loading=!1,t.isPost=!1}).catch(function(){t.isPost=!1,t.loading=!1})},refreshList:function(){this.page=1,this.list=[],this.getList()},cellHandle:function(t){"delete"==t.type&&this.list.splice(t.data.index,1)}}},d=(i("+JiW"),i("ZrdR")),u=Object(d.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{directives:[{name:"empty",rawName:"v-empty",value:0===t.list.length,expression:"list.length === 0"}]},[i("div",{staticClass:"log-items"},[t._l(t.list,function(e,a){return i("follow-record-cell",{key:a,attrs:{item:e,index:a,"crm-type":t.crmType},on:{"on-handle":t.cellHandle}})}),t._v(" "),i("div",{staticClass:"load"},[i("el-button",{attrs:{loading:t.loadMoreLoading,type:"text"}},[t._v(t._s(t.loadMoreLoading?"加载更多":"没有更多了"))])],1)],2)])])},[],!1,null,"05b8da62",null);u.options.__file="RecordLog.vue";e.a=u.exports},QY39:function(t,e,i){"use strict";var a=i("8GhS"),s=i("vG5h"),n=i("qbf4"),l=i("UcQx"),o=i("6zBA"),c=i("5tgW"),r={name:"TransferHandle",components:{XhUserCell:a.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:""},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],removeType:1,handleType:1,addsTypes:[]}},computed:{showRemoveType:function(){return"leads"!=this.crmType&&"contacts"!=this.crmType}},watch:{dialogVisible:{handler:function(t){this.visible=t},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{handleCancel:function(){this.visible=!1,this.$emit("update:dialogVisible",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;0===this.usersList.length?this.$message.error("请选择变更负责人"):(this.loading=!0,this.getRequest()(this.getParams()).then(function(e){t.$message({type:"success",message:"操作成功"}),t.loading=!1,t.handleCancel(),t.$emit("handle",{type:"transfer"})}).catch(function(){t.loading=!1}))},getRequest:function(){return"leads"===this.crmType?c.m:"customer"===this.crmType?s.C:"contacts"===this.crmType?n.n:"business"===this.crmType?l.s:"contract"===this.crmType?o.p:void 0},getParams:function(){var t={newOwnerUserId:this.usersList[0].userId,transferType:this.removeType};2===this.removeType&&(t.power=this.handleType);var e=this,i=this.selectionList.map(function(t,i,a){return t[e.crmType+"Id"]});return t[this.crmType+"Ids"]=i.join(","),"customer"===this.crmType&&(t.changeType=this.addsTypes.join(",")),t}}},d=(i("Hiqs"),i("ZrdR")),u=Object(d.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.visible,"append-to-body":!0,title:"批量转移",width:"400px"},on:{"update:visible":function(e){t.visible=e},close:t.handleCancel}},[i("div",{staticClass:"handle-box"},[i("flexbox",{staticClass:"handle-item"},[i("div",{staticClass:"handle-item-name"},[t._v("变更负责人为：")]),t._v(" "),i("xh-user-cell",{staticClass:"handle-item-content",attrs:{placeholder:"点击选择"},on:{"value-change":t.userChage}})],1),t._v(" "),t.showRemoveType?i("flexbox",{staticClass:"handle-item"},[i("div",{staticClass:"handle-item-name"},[t._v("将原负责人：")]),t._v(" "),i("el-radio-group",{model:{value:t.removeType,callback:function(e){t.removeType=e},expression:"removeType"}},[i("el-radio",{attrs:{label:1}},[t._v("移出")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("转为团队成员")])],1)],1):t._e(),t._v(" "),2==t.removeType?i("flexbox",{staticClass:"handle-item"},[i("div",{staticClass:"handle-item-name"},[t._v("权限：")]),t._v(" "),i("el-radio-group",{model:{value:t.handleType,callback:function(e){t.handleType=e},expression:"handleType"}},[i("el-radio",{attrs:{label:1}},[t._v("只读")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("读写")])],1)],1):t._e(),t._v(" "),"customer"===t.crmType?i("flexbox",{staticClass:"handle-item"},[i("div",{staticClass:"handle-item-name"},[t._v("同时变更负责人至：")]),t._v(" "),i("el-checkbox-group",{model:{value:t.addsTypes,callback:function(e){t.addsTypes=e},expression:"addsTypes"}},[i("el-checkbox",{attrs:{label:"1",checked:""}},[t._v("联系人")]),t._v(" "),i("el-checkbox",{attrs:{label:"2"}},[t._v("商机")]),t._v(" "),i("el-checkbox",{attrs:{label:"3"}},[t._v("合同")])],1)],1):t._e()],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.handleConfirm(e)}}},[t._v("保存")])],1)])},[],!1,null,"76132cce",null);u.options.__file="TransferHandle.vue";e.a=u.exports},Qldq:function(t,e,i){"use strict";i.d(e,"d",function(){return s}),i.d(e,"a",function(){return n}),i.d(e,"c",function(){return l}),i.d(e,"b",function(){return o}),i.d(e,"e",function(){return c});var a=i("t3Un");function s(t){return Object(a.a)({url:"OaLog/queryList",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function n(t){return Object(a.a)({url:"OaLog/addOrUpdate",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function l(t){return Object(a.a)({url:"OaLog/addOrUpdate",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function o(t){return Object(a.a)({url:"OaLog/deleteById",method:"post",data:t})}function c(t){return Object(a.a)({url:"OaLog/readLog",method:"post",data:t})}},RWfq:function(t,e,i){"use strict";var a=i("WSI/");i.n(a).a},S3Kq:function(t,e,i){"use strict";var a=i("EPZ6"),s=i.n(a),n=i("sCIN"),l={name:"Emoji",data:function(){return{emojiData:n.a,pannels:["表情","自然","物品","地点","符号"],activeIndex:0}},computed:{emojis:function(){var t=this;return this.pannels.map(function(e){return s()(t.emojiData[e])})}},created:function(){},methods:{changeActive:function(t){this.activeIndex=t},getPureName:function(t){return t.replace(/:/g,"")},selectItem:function(t){this.$emit("select",t)}}},o=(i("gwVn"),i("ZrdR")),c=Object(o.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"emoji"},[i("ul",{staticClass:"emoji-controller"},t._l(t.pannels,function(e,a){return i("li",{key:a,class:{active:a===t.activeIndex},on:{click:function(e){t.changeActive(a)}}},[t._v("\n      "+t._s(e)+"\n    ")])})),t._v(" "),i("ul",{staticClass:"emoji-container"},t._l(t.emojis,function(e,a){return a===t.activeIndex?i("li",{key:a,staticStyle:{padding:"0"}},[t._v("\n      "+t._s(e)+"--"+t._s(a)+"\n      "),t._l(e,function(e,a){return i("a",{key:a,attrs:{href:"javascript:;"},on:{click:function(i){t.selectItem(e)}}},[i("span",{staticClass:"emoji-item",class:"sprite-"+t.getPureName(e),attrs:{title:e}})])})],2):t._e()}))])},[],!1,null,"41efe20e",null);c.options.__file="emoji.vue";e.a=c.exports},TG2k:function(t,e,i){"use strict";var a=i("22Mu");i.n(a).a},TxnW:function(t,e,i){"use strict";var a=i("x/Kp");i.n(a).a},U05J:function(t,e,i){"use strict";var a=i("mX3o"),s=i("2qvR"),n={name:"Sections",components:{},props:{title:{type:String,default:""},mColor:{type:String,default:"#FF6767"},contentHeight:{type:String,default:"327px"},showF:{type:Boolean,default:!1},fItems:{type:Array,default:function(){return[]}},showNoData:{type:Boolean,default:!1}},data:function(){return{fIndex:-1}},computed:{},mounted:function(){},methods:{fClick:function(t){this.fIndex=t.type,this.$emit("f-click","val")}}},l=(i("+jv/"),i("ZrdR")),o=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section"},[t.title&&t.title.length>0?a("div",{staticClass:"section-header"},[a("div",{staticClass:"section-mark",style:{"border-left-color":t.mColor}}),t._v(" "),a("div",{staticClass:"section-title"},[t._v(t._s(t.title))]),t._v(" "),t.showF?a("flexbox",{staticClass:"f-container"},t._l(t.fItems,function(e,i){return a("div",{key:i,staticClass:"f-item",class:{"f-item-select":t.fIndex==e.type},on:{click:function(i){t.fClick(e)}}},[t._v(t._s(e.title))])})):t._e()],1):t._e(),t._v(" "),a("div",{staticClass:"content",style:{height:t.contentHeight}},[t.showNoData?a("div",{staticClass:"no-data-container"},[a("img",{staticClass:"no-data",attrs:{src:i("MqKM")}}),t._v(" "),a("div",{staticClass:"no-data-name"},[t._v("暂无数据")])]):t._e(),t._v(" "),t._t("default")],2)])},[],!1,null,"6c7ff334",null);o.options.__file="Sections.vue";var c=o.exports,r=i("KzkL"),d=i("7Qib"),u={name:"MapView",components:{},props:{title:{type:String,default:""},lat:{type:Number,default:0},lng:{type:Number,default:0}},data:function(){return{}},computed:{},mounted:function(){this.$el.style.zIndex=Object(d.h)(),document.body.appendChild(this.$el);var t=new BMap.Map("choicemap",{enableMapClick:!1}),e=new BMap.Point(this.lng,this.lat);t.centerAndZoom(e,18),t.enableScrollWheelZoom();var i=new BMap.Marker(e);t.addOverlay(i);var a=new BMap.InfoWindow(this.title);i.addEventListener("click",function(){t.openInfoWindow(a,e)})},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{hiddenView:function(){this.$emit("hidden")}}},m=(i("W+Ms"),Object(l.a)(u,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"map-view"},[e("div",{attrs:{id:"choicemap"}}),this._v(" "),e("i",{staticClass:"el-icon-close map-close",on:{click:this.hiddenView}})])},[],!1,null,"803c97bc",null));m.options.__file="MapView.vue";var h={name:"CRMBaseInfo",components:{Sections:c,MapView:m.exports},filters:{addressShow:function(t){return t.replace(/,/g," ")},fileName:function(t){return(t.name&&t.name.length>10?t.name.substring(0,10)+"...":t.name)+"("+Object(d.d)(t.size)+")"}},mixins:[a.a],props:{id:[String,Number],detail:{type:Object,default:function(){return{}}},crmType:{type:String,default:""}},data:function(){return{list:[],fifterList:[],showMapView:!1,mapViewInfo:{},address:{value:{location:"",address:"",detailAddress:""}}}},computed:{},watch:{id:function(t){this.getBaseInfo()}},mounted:function(){this.getBaseInfo()},activated:function(){},deactivated:function(){},methods:{getBaseInfo:function(){var t=this;this.loading=!0,Object(r.z)({types:s.a[this.crmType],id:this.id}).then(function(e){t.list=e.data,t.list.forEach(function(e){t.filtersData(e)}),t.loading=!1}).catch(function(){t.loading=!1})},handleFile:function(t,e,i){if("preview"===t){var a=e.value.map(function(t){return t.url=t.filePath,t});this.$bus.emit("preview-image-bus",{index:i,data:a})}else"download"===t&&Object(d.b)({path:e.filePath,name:e.name})},checkMapView:function(t){t.value&&""!==t.value&&(this.mapViewInfo={title:t.value.location,lat:Number(t.value.lat),lng:Number(t.value.lng)},this.showMapView=!0)},filtersData:function(t){"user"==t.formType?t.value.length?this.fifterList.push({name:t.name,value:t.value[0].realname}):this.fifterList.push({name:t.name,value:""}):"structure"==t.formType?this.fifterList.push({name:t.name,value:t.value[0].deptName}):["customer","contacts","business"].includes(t.formType)?this.fifterList.push({name:t.name,value:t.value[t.formType+"Name"]}):["typeName","statusName"].includes(t.formType)?this.fifterList.push({name:t.name,value:t.value[t.formType]}):"contract"==t.formType?this.fifterList.push({name:t.name,value:t.value.contractNum}):"floatnumber"==t.formType?this.fifterList.push({name:t.name,value:Object(d.j)(t.value)}):"category"==t.formType?this.fifterList.push({name:t.name,value:this.detail.categoryName}):"map_address"==t.formType?this.address=t:this.fifterList.push(t)}}},p=(i("rFS/"),Object(l.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"b-cont"},[a("div",[a("sections",{staticClass:"b-cells",attrs:{title:"基本信息","m-color":"#46CDCF","content-height":"auto"}},[a("flexbox",{staticStyle:{padding:"10px 8px 0"},attrs:{gutter:0,wrap:"wrap"}},[t._l(t.fifterList,function(e,s){return a("flexbox-item",{key:s,staticClass:"b-cell",attrs:{span:.5}},["file"===e.formType?a("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[a("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"b-cell-value"},t._l(e.value,function(s,n){return a("flexbox",{key:n,staticClass:"f-item"},[a("img",{staticClass:"f-img",attrs:{src:i("6KEE")}}),t._v(" "),a("div",{staticClass:"f-name"},[t._v(t._s(t._f("fileName")(s)))]),t._v(" "),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){t.handleFile("preview",e,n)}}},[t._v("预览")]),t._v(" "),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(e){t.handleFile("download",s,n)}}},[t._v("下载")])],1)}))]):a("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[a("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"b-cell-value"},[t._v(t._s(e.value))])])],1)}),t._v(" "),"customer"===t.crmType&&t.address?a("flexbox",{attrs:{gutter:0,wrap:"wrap"}},[a("flexbox-item",{staticClass:"b-cell",attrs:{span:.5},nativeOn:{click:function(e){t.checkMapView(t.address)}}},[a("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[a("div",{staticClass:"b-cell-name"},[t._v("定位")]),t._v(" "),a("div",{staticClass:"b-cell-value",staticStyle:{color:"#3E84E9",cursor:"pointer"}},[t._v(t._s(t.address.value.location))])])],1),t._v(" "),a("flexbox-item",{staticClass:"b-cell",attrs:{span:.5}},[a("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[a("div",{staticClass:"b-cell-name"},[t._v("区域")]),t._v(" "),a("div",{staticClass:"b-cell-value"},[t._v(t._s(t._f("addressShow")(t.address.value.address)))])])],1),t._v(" "),a("flexbox-item",{staticClass:"b-cell",attrs:{span:.5}},[a("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[a("div",{staticClass:"b-cell-name"},[t._v("详细地址")]),t._v(" "),a("div",{staticClass:"b-cell-value"},[t._v(t._s(t.address.value.detailAddress))])])],1)],1):t._e()],2)],1)],1),t._v(" "),t.showMapView?a("map-view",{attrs:{title:t.mapViewInfo.title,lat:t.mapViewInfo.lat,lng:t.mapViewInfo.lng},on:{hidden:function(e){t.showMapView=!1}}}):t._e()],1)},[],!1,null,"cd165e7a",null));p.options.__file="CRMBaseInfo.vue";e.a=p.exports},UEWd:function(t,e,i){"use strict";var a=i("7Qib"),s=i("KTTK"),n={name:"MixAdd",components:{CrmRelative:i("mkuN").a},props:{showRelativeBusiness:{type:Boolean,default:!1},showRelativeContacts:{type:Boolean,default:!1},id:[String,Number],crmType:{type:String,default:""}},data:function(){return{content:"",inputAutosize:{minRows:1,maxRows:6},barItems:[{img:i("S1Xc"),title:"图片",type:"img",data:"image/*"},{img:i("rl4O"),title:"附件",type:"file",data:"*.*"}],imgFiles:[],files:[],business:[],contacts:[],showRelativeType:"",batchId:""}},computed:{},mounted:function(){this.showRelativeBusiness&&this.barItems.push({img:i("i91G"),title:"关联商机",type:"business",show:!1}),this.showRelativeContacts&&this.barItems.push({img:i("OPCT"),title:"关联联系人",type:"contacts",show:!1}),this.$on("submit-info",function(){this.$emit("mixadd-info",{content:this.content,files:this.files,images:this.imgFiles,business:this.business,contacts:this.contacts,batchId:this.batchId})})},beforeDestroy:function(){this.$off("submit-info")},methods:{resetInfo:function(){this.content="",this.imgFiles=[],this.files=[],this.business=[],this.contacts=[],this.showRelativeType="",this.batchId=""},checkRelativeInfos:function(t){"business"==this.showRelativeType?this.business=t.data:"contacts"==this.showRelativeType&&(this.contacts=t.data)},barClick:function(t){this.showRelativeType=t.type,"business"==t.type?t.show=!0:"contacts"==t.type&&(t.show=!0)},uploadFile:function(t){var e=this,i=t.target.files;if(i.length){for(var a=0;a<i.length;a++){if(-1==i[a].type.indexOf("image")&&"img"==this.showRelativeType)return void this.$message.error("请上传正确的文件类型")}var s="image/*"==t.target.accept?"img":"file",n=i[0];this.sendFileRequest(n,s,function(){for(var a=1;a<i.length;a++){var n=i[a];e.sendFileRequest(n,s)}t.target.value=""})}},sendFileRequest:function(t,e,i){var n=this,l={file:t,type:e};this.batchId&&(l.batchId=this.batchId),Object(s.d)(l).then(function(s){""==n.batchId&&(n.batchId=s.batchId),s.size=Object(a.d)(t.size),"img"==e?n.imgFiles.push(s):(s.icon=Object(a.g)(t),n.files.push(s)),i&&i()}).catch(function(){})},deleteAllImg:function(){this.imgFiles=[]},deleteImgOrFile:function(t,e,i){var a=this;Object(s.b)({id:e.fileId}).then(function(e){"image"==t?a.imgFiles.splice(i,1):a.files.splice(i,1),a.$message.success("操作成功")}).catch(function(){})},mouseImgOver:function(t,e){t.showDelete=!0,this.$set(this.imgFiles,e,t)},mouseImgLeave:function(t,e){t.showDelete=!1,this.$set(this.imgFiles,e,t)},inputFocus:function(){var t=this;this.inputAutosize={minRows:3,maxRows:6},this.$nextTick(function(){t.$refs.textarea.resizeTextarea()})}}},l=(i("kblT"),i("ZrdR")),o=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mix-container"},[a("div",{staticClass:"i-cont"},[a("el-input",{ref:"textarea",attrs:{autosize:t.inputAutosize,type:"textarea",clearable:"",resize:"none",placeholder:"请输入内容"},on:{focus:t.inputFocus},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),t.imgFiles.length>0?a("section",{staticClass:"img-cont"},[a("flexbox",{attrs:{wrap:"wrap"}},[t._l(t.imgFiles,function(e,i){return a("div",{key:i,staticClass:"img-item",style:{"background-image":"url("+e.url+")"},on:{mouseover:function(a){t.mouseImgOver(e,i)},mouseleave:function(a){t.mouseImgLeave(e,i)}}},[e.showDelete?a("div",{staticClass:"img-delete",on:{click:function(a){t.deleteImgOrFile("image",e,i)}}},[t._v("×")]):t._e()])}),t._v(" "),a("div",{staticClass:"img-item-add"},[a("input",{staticClass:"img-item-iput",attrs:{type:"file",accept:"image/*",multiple:""},on:{change:t.uploadFile}})])],2),t._v(" "),a("div",{staticClass:"img-bar",on:{click:t.deleteAllImg}},[t._v("全部删除")])],1):t._e(),t._v(" "),t.files.length>0?a("section",{staticClass:"file-cont"},[a("flexbox",{staticClass:"f-header"},[a("img",{staticClass:"f-logo",attrs:{src:i("rl4O")}}),t._v(" "),a("div",{staticClass:"f-name"},[t._v("附件")])]),t._v(" "),a("div",{staticClass:"f-body"},t._l(t.files,function(e,i){return a("flexbox",{key:i,staticClass:"f-item"},[a("img",{staticClass:"f-img",attrs:{src:e.icon}}),t._v(" "),a("div",{staticClass:"f-name"},[t._v(t._s(e.name+"("+e.size+")"))]),t._v(" "),a("div",{staticClass:"close-button",on:{click:function(a){t.deleteImgOrFile("file",e,i)}}},[t._v("×")])])})),t._v(" "),a("div",{staticClass:"img-bar",on:{click:function(e){t.files=[]}}},[t._v("全部删除")])],1):t._e(),t._v(" "),t.business.length>0?a("section",{staticClass:"c-cont"},[a("flexbox",{staticClass:"c-header"},[a("img",{staticClass:"c-logo",attrs:{src:i("i91G")}}),t._v(" "),a("div",{staticClass:"c-name"},[t._v("商机")])]),t._v(" "),a("div",{staticClass:"c-body"},[a("flexbox",{attrs:{wrap:"wrap"}},t._l(t.business,function(e,i){return a("flexbox",{key:i,staticClass:"c-item"},[a("div",{staticClass:"c-item-name"},[t._v(t._s(e.businessName))]),t._v(" "),a("div",{staticClass:"c-item-close",on:{click:function(e){t.business.splice(i,1)}}},[t._v("×")])])}))],1)],1):t._e(),t._v(" "),t.contacts.length>0?a("section",{staticClass:"c-cont"},[a("flexbox",{staticClass:"c-header"},[a("img",{staticClass:"c-logo",attrs:{src:i("OPCT")}}),t._v(" "),a("div",{staticClass:"c-name"},[t._v("联系人")])]),t._v(" "),a("div",{staticClass:"c-body"},[a("flexbox",{attrs:{wrap:"wrap"}},t._l(t.contacts,function(e,i){return a("flexbox",{key:i,staticClass:"c-item"},[a("div",{staticClass:"c-item-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"c-item-close",on:{click:function(e){t.contacts.splice(i,1)}}},[t._v("×")])])}))],1)],1):t._e(),t._v(" "),a("flexbox",{staticClass:"bar-cont"},[t._l(t.barItems,function(e,i){return["img"==e.type||"file"==e.type?a("flexbox",{key:i,staticClass:"bar-item",nativeOn:{click:function(i){t.barClick(e)}}},[a("input",{staticClass:"bar-input",attrs:{accept:e.data,type:"file",multiple:""},on:{change:t.uploadFile}}),t._v(" "),a("img",{staticClass:"bar-img",attrs:{src:e.img}}),t._v(" "),a("div",{staticClass:"bar-title"},[t._v(t._s(e.title))])]):a("el-popover",{key:i,attrs:{placement:"bottom",width:"700","popper-class":"no-padding-popover",trigger:"click"},model:{value:e.show,callback:function(i){t.$set(e,"show",i)},expression:"item.show"}},[a("crm-relative",{ref:"crmrelative",refInFor:!0,attrs:{show:e.show,radio:!1,action:{type:"condition",data:{moduleType:t.crmType,customerId:t.id}},"selected-data":"business"==e.type?{business:t.business}:{contacts:t.contacts},"crm-type":e.type},on:{close:function(t){e.show=!1},changeCheckout:t.checkRelativeInfos}}),t._v(" "),a("flexbox",{staticClass:"bar-item",attrs:{slot:"reference"},nativeOn:{click:function(i){t.barClick(e)}},slot:"reference"},[a("img",{staticClass:"bar-img",attrs:{src:e.img}}),t._v(" "),a("div",{staticClass:"bar-title"},[t._v(t._s(e.title))])])],1)]})],2)],1)},[],!1,null,"e146eed2",null);o.options.__file="MixAdd.vue";e.a=o.exports},UNCs:function(t,e,i){},UZZ0:function(t,e,i){"use strict";var a=i("ODkR");i.n(a).a},UrT4:function(t,e,i){"use strict";var a=i("EP+0"),s=i("I4nk"),n=i.n(s),l={name:"StatisticalTask",components:{CreateSections:a.a},props:{title:{type:String,default:""},type:String,list:{type:Array,default:function(){return[]}}},data:function(){return{barOption:null,barChart:null,id:Math.ceil(100*Math.random())}},computed:{},watch:{list:function(){this.changeBarData()}},mounted:function(){this.initBar(),this.changeBarData()},methods:{changeBarData:function(){for(var t=[],e=[],i=[],a=0;a<this.list.length;a++){var s=this.list[a];"task"==this.type?(t.push(s.className),e.push(s.undone),i.push(s.complete)):"label"==this.type&&(t.push(s.name),e.push(s.undone),i.push(s.complete))}this.barOption.xAxis[0].data=t,this.barOption.series[0].data=i,this.barOption.series[1].data=e,this.barChart.setOption(this.barOption,!0)},initBar:function(){this.barChart=n.a.init(document.getElementById("barmain"+this.id)),this.barOption={color:["#6ca2ff","#ff7474"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["已完成","未完成"],bottom:"0px",itemWidth:14},grid:{top:"20px",left:"20px",right:"20px",bottom:"30px",containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#666"},axisLine:{lineStyle:{color:"#ECECEC"}},splitLine:{show:!1}}],yAxis:{splitNumber:3,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#ECECEC"}},axisLabel:{textStyle:{color:"#666"}}},series:[{name:"已完成",type:"bar",stack:"one",barWidth:"15%",data:[]},{name:"未完成",type:"bar",stack:"one",barWidth:"15%",data:[]}]}}}},o=(i("xJIx"),i("ZrdR")),c=Object(o.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("create-sections",{attrs:{title:this.title}},[e("div",{staticClass:"barmain",attrs:{id:"barmain"+this.id}})])},[],!1,null,"24ba25ea",null);c.options.__file="statisticalTask.vue";e.a=c.exports},V47a:function(t,e,i){"use strict";var a=i("8GhS"),s=i("vG5h"),n={name:"AllocHandle",components:{XhUserCell:a.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:""},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,visible:!1,usersList:[]}},computed:{},watch:{dialogVisible:{handler:function(t){this.visible=t},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{handleCancel:function(){this.visible=!1,this.$emit("update:dialogVisible",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;if(0===this.usersList.length)this.$message.error("请选择负责人");else{var e=this,i=this.selectionList.map(function(t,i,a){return t[e.crmType+"Id"]}),a={userId:this.usersList[0].userId};a.ids=i.join(","),this.loading=!0,Object(s.c)(a).then(function(e){t.$message({type:"success",message:"操作成功"}),t.loading=!1,t.$emit("handle",{type:"alloc"}),t.handleCancel()}).catch(function(){t.loading=!1})}}}},l=(i("uwnL"),i("ZrdR")),o=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.visible,"append-to-body":!0,title:"批量分配",width:"400px"},on:{"update:visible":function(e){t.visible=e},close:t.handleCancel}},[i("div",{staticClass:"handle-box"},[i("flexbox",{staticClass:"handle-item",attrs:{align:"stretch"}},[i("div",{staticClass:"handle-item-name",staticStyle:{"margin-top":"8px"}},[t._v("请选择：")]),t._v(" "),i("xh-user-cell",{staticClass:"handle-item-content",attrs:{placeholder:"点击选择"},on:{"value-change":t.userChage}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.handleConfirm(e)}}},[t._v("保存")])],1)])},[],!1,null,"3de0db8e",null);o.options.__file="AllocHandle.vue";e.a=o.exports},VPPU:function(t,e,i){"use strict";var a=i("FyKc");i.n(a).a},VQRf:function(t,e,i){"use strict";var a=i("tCAo");i.n(a).a},"W+Ms":function(t,e,i){"use strict";var a=i("zyZ9");i.n(a).a},W1y5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY5ODdCOEY0RjEzRTExRTg4MDFDQjJFRTcwNkU5RTg5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY5ODdCOEY1RjEzRTExRTg4MDFDQjJFRTcwNkU5RTg5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Njk4N0I4RjJGMTNFMTFFODgwMUNCMkVFNzA2RTlFODkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Njk4N0I4RjNGMTNFMTFFODgwMUNCMkVFNzA2RTlFODkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7uaZGgAAABJElEQVR42szUsUsCcRjG8VOc2hrEIRByKUpsMVKkKWlwyiVEjAqp/yBoEqxNcGtrjRDOQSeDMIiItnBKHCJwC0QSG4Kg83vwTtfdecMP9ODDLXcP9z4v9/MZhqGpvPya4iug6/rMv/AVUZWBEbSxrrLDEu6x9q9DDy8vYhdxbOAT1xhLaBpdL4FhlLGHRzzhAc/4w61MaIbuoOcWeIoLXGEZXw7P3WAVTbnbBp6jgBTep9SRwAkOnUbOooikjLWPTcSwhBAaErIlX3aEO7vABRmxIqVvS3cvqKKPIT5Qkw7NsJbTlnMI4gyXOMC3zZi/qCNvDbMGmtvsIIOBS28/OLYLswbGZP2DKYtYwcjLr/fmYauaW5g1MKPitPHN/QGrPHAiwAAPnT18oLTDPwAAAABJRU5ErkJggg=="},WAol:function(t,e,i){},"WSI/":function(t,e,i){},XYVu:function(t,e,i){},Y9eb:function(t,e,i){},YAPy:function(t,e,i){},Ytqn:function(t,e,i){},ZfAJ:function(t,e,i){"use strict";var a=i("vG5h"),s={name:"DealStatusHandle",components:{},mixins:[],props:{visible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:""},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,status:1,options:[{label:"已成交",value:1},{label:"未成交",value:0}]}},computed:{},watch:{},mounted:function(){},methods:{handleCancel:function(){this.status=1,this.$emit("update:visible",!1)},handleConfirm:function(){var t=this,e=this,i=this.selectionList.map(function(t,i,a){return t[e.crmType+"Id"]}).join(","),s={dealStatus:this.status};s.ids=i,this.loading=!0,Object(a.a)(s).then(function(e){t.$message({type:"success",message:"操作成功"}),t.loading=!1,t.$emit("handle",{type:"deal_status"}),t.handleCancel()}).catch(function(){t.loading=!1})}}},n=(i("g9Ri"),i("ZrdR")),l=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.visible,"append-to-body":!0,title:"客户成交状态",width:"400px"},on:{close:t.handleCancel}},[i("div",{staticClass:"handle-box"},[i("flexbox",{staticClass:"handle-item",attrs:{align:"stretch"}},[i("div",{staticClass:"handle-item-name",staticStyle:{"margin-top":"8px"}},[t._v("成交状态：")]),t._v(" "),i("el-select",{staticClass:"handle-item-content",attrs:{placeholder:"请选择"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.handleConfirm(e)}}},[t._v("保存")])],1)])},[],!1,null,"00e920f2",null);l.options.__file="DealStatusHandle.vue";e.a=l.exports},Zo18:function(t,e,i){},ZoTo:function(t,e,i){},"ZvC+":function(t,e,i){},aQEv:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkFDQzQxN0UzRjEzRTExRTg4OTVERjc2ODY3QjhBOUEzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkFDQzQxN0U0RjEzRTExRTg4OTVERjc2ODY3QjhBOUEzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QUNDNDE3RTFGMTNFMTFFODg5NURGNzY4NjdCOEE5QTMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUNDNDE3RTJGMTNFMTFFODg5NURGNzY4NjdCOEE5QTMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz64l2hjAAAAl0lEQVR42mL8//8/AzUBC4hYvXo1xQaFhoaCaSYksYdA/J9E/BCrC6FAHk0OpIGRVJcyMVAZDAoD5YB4FxB/htJylBo4F4gPALEklF6IK1KwAVyJ1BuIfwHxJCCuJ8WFjFjwHiAuAWJuIM4D4mOUejkZiB2B+CWUTiDFy9jAIyB2HZ6x/JHasSwwPGOZkdolNtVLG4AAAwAT5zYzSD9CggAAAABJRU5ErkJggg=="},"aQg/":function(t,e,i){"use strict";var a=i("d0bK"),s=i("Op00"),n=i("KzkL"),l=i("7Qib"),o={name:"TaskLog",components:{TaskCell:s.a,Particulars:function(){return Promise.all([i.e("chunk-3043"),i.e("chunk-3264")]).then(i.bind(null,"+Gvz"))}},mixins:[a.a],props:{id:[String,Number],crmType:{type:String,default:""}},data:function(){return{loading:!1,loadMoreLoading:!0,isPost:!1,page:1,list:[]}},computed:{},watch:{id:function(t){this.refreshList()}},mounted:function(){var t=this,e=document.getElementById("follow-log-content");e.onscroll=function(){var i=e.scrollTop+e.clientHeight-e.scrollHeight;Math.abs(i)<10&&1==t.loadMoreLoading&&(t.isPost?t.loadMoreLoading=!1:(t.isPost=!0,t.page++,t.getList()))},this.getList()},activated:function(){},deactivated:function(){},methods:{getList:function(){var t=this;this.loading=!0;var e={page:this.page,limit:10};e[this.crmType+"Ids"]=this.id,Object(n.o)(e).then(function(e){e.data.list.forEach(function(t){5==t.status&&(t.checked=!0)}),t.list=t.list.concat(e.data.list),e.data.list.length<10?t.loadMoreLoading=!1:t.loadMoreLoading=!0,t.loading=!1,t.isPost=!1}).catch(function(){t.isPost=!1,t.loading=!1})},refreshList:function(){this.page=1,this.list=[],this.getList()},taskCellHandle:function(t){var e=this;"view"==t.type&&this.showDetailView(t.data.item,t.data.index,function(){e.$nextTick(function(){document.body.appendChild(e.$refs.taskShade),e.$refs.taskShade.style.zIndex=Object(l.h)(),e.$refs.taskShade.addEventListener("click",e.handleDocumentClick,!1)})})},handleDocumentClick:function(t){t.stopPropagation(),this.$refs.taskShade==t.target&&(this.taskDetailShow=!1)}}},c=(i("0dCj"),i("ZrdR")),r=Object(c.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{directives:[{name:"empty",rawName:"v-empty",value:0===t.list.length,expression:"list.length === 0"}]},[i("div",{staticClass:"log-items"},[t._l(t.list,function(e,a){return i("task-cell",{key:a,attrs:{data:e,"data-index":a},on:{"on-handle":t.taskCellHandle}})}),t._v(" "),i("div",{staticClass:"load"},[i("el-button",{attrs:{loading:t.loadMoreLoading,type:"text"}},[t._v(t._s(t.loadMoreLoading?"加载更多":"没有更多了"))])],1)],2)]),t._v(" "),t.taskDetailShow?i("div",{ref:"taskShade",staticClass:"full-container"},[i("particulars",{staticClass:"d-view",attrs:{id:t.taskID,"detail-index":t.detailIndex},on:{"on-handle":t.detailHandle,close:t.closeBtn}})],1):t._e()])},[],!1,null,"349b10d0",null);r.options.__file="TaskLog.vue";e.a=r.exports},aoc0:function(t,e,i){"use strict";var a=i("n68K");i.n(a).a},b66W:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJENDIzNzVCMzRGRDExRTlCRDgyQTA3MzY5OTQ4MjNEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjJENDIzNzVDMzRGRDExRTlCRDgyQTA3MzY5OTQ4MjNEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MkQ0MjM3NTkzNEZEMTFFOUJEODJBMDczNjk5NDgyM0QiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MkQ0MjM3NUEzNEZEMTFFOUJEODJBMDczNjk5NDgyM0QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4erItaAAACF0lEQVR42uyZzytEURTHv8agqVFMFLIgv3/ElvKzjCJWsqNsZmMhkSmFpSkKf4CymJ1YUExkIRZSEpL8LCssxEKZ8fM5p2uSMcq8N3PnTebUeT/uPefez3vn/nwvxjqqxAMYJ+0gtUBfck/qJB0w0mGMtAf6lORPNreBDp3Qv9gMOgy3P7EYECESBf23oEatBcSQVuYBdcVAYQaQkijSbx+A4ytg/QjYOgOUcILmpgF9TeLsK2lJQvkBzm+ACZc4Sw99dSEw2ekf0t8DsS37SAUtoBDbW4CEAOLBtvZW4SsF1ECNsq+ZKo4LvDKG7W8WZYQctKoAyE5VH8Is8q0tkgCqpZ15RQpoSaZ20Px0CaAWcxBWGGYJoI9P2kE9zxJAT2+0gx5fSwBd2tUOqqaMgEE3T4SqFbX+qmYmxwKwexm4H/uwr7Qp9PUNGJoFlvf+7sO27MO+UhclXOGU6+/2bKsW8n8tnL3S6PCfvjoY3Yqok2C9uZCDtk0BD+7vaYkmYL5XB6E3xX9dN5T+zG8q18kbVWhr+fQqVu62enG/dvgF3lUjrtmGV/XvSphAPS/A4g7QXkEFxQLdVqG+wjbvSph7/cwGsH3+ez7nsU3YOxPPNiNzNI6WUZskzfncPl/QctB1QKPBgWgSuuj1DLKyLzRUEv1IFgWNBNC7COC8Y1BnBIBO8/Bkh/gey79xknUG6P0hNvwhwACsUYLT2eAwmwAAAABJRU5ErkJggg=="},"b9z/":function(t,e,i){"use strict";var a=i("vusS");i.n(a).a},cEue:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYzNEQ2RDE3MzRFNTExRTlCRjI5QUEzN0UzNDcxMUZDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjYzNEQ2RDE4MzRFNTExRTlCRjI5QUEzN0UzNDcxMUZDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjM0RDZEMTUzNEU1MTFFOUJGMjlBQTM3RTM0NzExRkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjM0RDZEMTYzNEU1MTFFOUJGMjlBQTM3RTM0NzExRkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4/GDLpAAABSElEQVR42oySvU4CURCFD/cVVHp+X0Cihp4QXkBXDBW/L0HCW0CgJGC0tSCEghJNtLDmr8ME9QUs0DPu3XXvLmaZ5BQ7d767c89M5LtehycUdUVdUxfUCfVOPVK31B21c4ojHjhO3VOn+D9eqEtq5fzJAWchIPT5TNf/wkq3E8VhEdX1SkCLyrhHrRYQi5nlySTQbHozUm8JXDIKBwOg0WBj8T+wWgWGQ38HJTFM3Dw20qkUUKkA4zGQzwPdLrBc+uE3FQAl5nNgMqGvNHY02gdKHAn8EUin00AuR1voS6EAJBL74E+BnwNguQx0OsB0CvR6QK1mv92MV4H7Rsqi+e02sF7b34uFfUGx6If7Yphc8GSMKzyk23Old1VmvT0Q3Or6nbOeYmdW7y5Cdjur693ddi44o+RxD9SG+pJ56u8bfe7O7UeAAQCsHFF+l0CFAgAAAABJRU5ErkJggg=="},cSWN:function(t,e,i){"use strict";var a=i("oNhu");i.n(a).a},cYid:function(t,e,i){"use strict";var a=i("mX3o"),s=i("EgJF"),n=i("vG5h"),l=i("UcQx"),o=i("7Qib"),c={name:"RelativeContract",components:{CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-3043"),i.e("chunk-7fee")]).then(i.bind(null,"uMjE"))},CRMCreateView:s.default},mixins:[a.a],props:{id:[String,Number],crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{}}}},data:function(){return{nopermission:!1,list:[],fieldList:[],tableHeight:"400px",showFullDetail:!1,isCreate:!1,contractId:"",createActionInfo:{type:"relative",crmType:this.crmType,data:{}}}},computed:{},watch:{id:function(t){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getFieldList:function(){this.fieldList.push({prop:"num",width:"200",label:"合同编号"}),this.fieldList.push({prop:"contractName",width:"200",label:"合同名称"}),this.fieldList.push({prop:"customerName",width:"200",label:"客户名称"}),this.fieldList.push({prop:"money",width:"200",label:"合同金额"}),this.fieldList.push({prop:"startTime",width:"200",label:"开始日期"}),this.fieldList.push({prop:"endTime",width:"200",label:"结束日期"}),this.fieldList.push({prop:"checkStatus",width:"200",label:"状态"})},getDetail:function(){var t=this;this.loading=!0;var e={customer:n.p,business:l.h}[this.crmType],i={pageType:0};i[this.crmType+"Id"]=this.id,e(i).then(function(e){0==t.fieldList.length&&t.getFieldList(),t.nopermission=!1,t.loading=!1,t.list=e.data}).catch(function(e){102==e.code&&(t.nopermission=!0),t.loading=!1})},fieldFormatter:function(t,e){return"checkStatus"===e.property?this.getStatusName(t.checkStatus):"money"==e.property?Object(o.j)(t[e.property]):t[e.property]},getStatusName:function(t){return 0==t?"待审核":1==t?"通过":2==t?"拒绝":3==t?"审核中":4==t?"撤回":5==t?"未提交":6==t?"已作废":""},handleRowClick:function(t,e,i){this.contractId=t.contractId,this.showFullDetail=!0},headerRowStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},cellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}},createClick:function(){"business"==this.crmType?(this.createActionInfo.data.customer=this.detail,this.createActionInfo.data.business=this.detail):"customer"==this.crmType&&(this.createActionInfo.data.customer=this.detail),this.isCreate=!0},createSaveSuccess:function(){this.getDetail()}}},r=(i("HXY3"),i("ZrdR")),d=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"empty",rawName:"v-empty",value:t.nopermission,expression:"nopermission"}],staticClass:"rc-cont",attrs:{"xs-empty-icon":"nopermission","xs-empty-text":"暂无权限"}},[t.isSeas?t._e():i("flexbox",{staticClass:"rc-head",attrs:{direction:"row-reverse"}},[i("el-button",{staticClass:"rc-head-item",attrs:{type:"primary"},nativeOn:{click:function(e){return t.createClick(e)}}},[t._v("新建合同\n    ")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%",border:"1px solid #E6E6E6"},attrs:{data:t.list,height:t.tableHeight,"header-cell-style":t.headerRowStyle,"cell-style":t.cellStyle,stripe:""},on:{"row-click":t.handleRowClick}},t._l(t.fieldList,function(e,a){return i("el-table-column",{key:a,attrs:{prop:e.prop,formatter:t.fieldFormatter,label:e.label,"show-overflow-tooltip":""}})})),t._v(" "),i("c-r-m-full-screen-detail",{attrs:{visible:t.showFullDetail,id:t.contractId,"crm-type":"contract"},on:{"update:visible":function(e){t.showFullDetail=e}}}),t._v(" "),t.isCreate?i("c-r-m-create-view",{attrs:{action:t.createActionInfo,"crm-type":"contract"},on:{"save-success":t.createSaveSuccess,"hiden-view":function(e){t.isCreate=!1}}}):t._e()],1)},[],!1,null,"241fcc5a",null);d.options.__file="RelativeContract.vue";e.a=d.exports},cviI:function(t,e,i){"use strict";i.r(e);var a={props:{diameter:{type:Number,required:!1,default:200},totalSteps:{type:Number,required:!0,default:10},completedSteps:{type:Number,required:!0,default:0},startColor:{type:String,required:!1,default:"#bbff42"},stopColor:{type:String,required:!1,default:"#429321"},strokeWidth:{type:Number,required:!1,default:10},animateSpeed:{type:Number,required:!1,default:1e3},innerStrokeColor:{type:String,required:!1,default:"#323232"},fps:{type:Number,required:!1,default:60},timingFunc:{type:String,required:!1,default:"linear"}},data:()=>({gradient:{fx:.99,fy:.5,cx:.5,cy:.5,r:.65},gradientAnimation:null,currentAngle:0,strokeDashoffset:0}),computed:{radius(){return this.diameter/2},circumference(){return Math.PI*this.innerCircleDiameter},stepSize(){return 0===this.totalSteps?0:100/this.totalSteps},finishedPercentage(){return this.stepSize*this.completedSteps},circleSlice(){return 2*Math.PI/this.totalSteps},animateSlice(){return this.circleSlice/this.totalPoints},innerCircleDiameter(){return this.diameter-2*this.strokeWidth},innerCircleRadius(){return this.innerCircleDiameter/2},totalPoints(){return this.animateSpeed/this.animationIncrements},animationIncrements(){return 1e3/this.fps},hasGradient(){return this.startColor!==this.stopColor},containerStyle(){return{height:`${this.diameter}px`,width:`${this.diameter}px`}},progressStyle(){return{height:`${this.diameter}px`,width:`${this.diameter}px`,strokeWidth:`${this.strokeWidth}px`,strokeDashoffset:this.strokeDashoffset,transition:`stroke-dashoffset ${this.animateSpeed}ms ${this.timingFunc}`}},strokeStyle(){return{height:`${this.diameter}px`,width:`${this.diameter}px`,strokeWidth:`${this.strokeWidth}px`}},innerCircleStyle(){return{width:`${this.innerCircleDiameter}px`}}},methods:{getStopPointsOfCircle(t){const e=[];for(let i=0;i<t;i++){const t=this.circleSlice*i;e.push(this.getPointOfCircle(t))}return e},getPointOfCircle:t=>({x:.5+.5*Math.cos(t),y:.5+.5*Math.sin(t)}),gotoPoint(){const t=this.getPointOfCircle(this.currentAngle);this.gradient.fx=t.x,this.gradient.fy=t.y},changeProgress({isAnimate:t=!0}){if(this.strokeDashoffset=(100-this.finishedPercentage)/100*this.circumference,this.gradientAnimation&&clearInterval(this.gradientAnimation),!t)return void this.gotoNextStep();const e=(this.completedSteps-1)*this.circleSlice;let i=(this.currentAngle-e)/this.animateSlice;const a=Math.abs(i-this.totalPoints)/this.totalPoints,s=i<this.totalPoints;this.gradientAnimation=setInterval(()=>{s&&i>=this.totalPoints||!s&&i<this.totalPoints?clearInterval(this.gradientAnimation):(this.currentAngle=e+this.animateSlice*i,this.gotoPoint(),i+=s?a:-a)},this.animationIncrements)},gotoNextStep(){this.currentAngle=this.completedSteps*this.circleSlice,this.gotoPoint()}},watch:{totalSteps(){this.changeProgress({isAnimate:!0})},completedSteps(){this.changeProgress({isAnimate:!0})},diameter(){this.changeProgress({isAnimate:!0})},strokeWidth(){this.changeProgress({isAnimate:!0})}},created(){this.changeProgress({isAnimate:!1})}},s=(i("rOqc"),i("ZrdR")),n=Object(s.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"radial-progress-container",style:t.containerStyle},[i("div",{staticClass:"radial-progress-inner",style:t.innerCircleStyle},[t._t("default")],2),t._v(" "),i("svg",{staticClass:"radial-progress-bar",attrs:{width:t.diameter,height:t.diameter,version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[i("defs",[i("radialGradient",{attrs:{id:"radial-gradient"+t._uid,fx:t.gradient.fx,fy:t.gradient.fy,cx:t.gradient.cx,cy:t.gradient.cy,r:t.gradient.r}},[i("stop",{attrs:{offset:"30%","stop-color":t.startColor}}),t._v(" "),i("stop",{attrs:{offset:"100%","stop-color":t.stopColor}})],1)],1),t._v(" "),i("circle",{style:t.strokeStyle,attrs:{r:t.innerCircleRadius,cx:t.radius,cy:t.radius,fill:"transparent",stroke:t.innerStrokeColor,"stroke-dasharray":t.circumference,"stroke-dashoffset":"0","stroke-linecap":"round"}}),t._v(" "),i("circle",{style:t.progressStyle,attrs:{transform:"rotate(270, "+t.radius+","+t.radius+")",r:t.innerCircleRadius,cx:t.radius,cy:t.radius,fill:"transparent",stroke:"url(#radial-gradient"+t._uid+")","stroke-dasharray":t.circumference,"stroke-dashoffset":t.circumference,"stroke-linecap":"round"}})])])},[],!1,null,null,null);n.options.__file="RadialProgressBar.vue";e.default=n.exports},d0bK:function(t,e,i){"use strict";e.a={components:{},data:function(){return{taskID:"",detailIndex:-1,taskDetailShow:!1}},mounted:function(){},methods:{closeBtn:function(){this.taskDetailShow=!1},showDetailView:function(t,e,i){this.taskID=t.taskId,this.detailIndex=e,this.taskDetailShow=!0,i&&i()},detailHandle:function(t){if(0==t.index||t.index)if("title-check"==t.type)this.$set(this.list[t.index],"checked",t.value);else if("delete"==t.type)this.list.splice(t.index,1);else if("change-stop-time"==t.type){new Date(t.value).getTime()/1e3+86399>new Date(new Date).getTime()/1e3?this.list[t.index].isEnd=!1:this.list[t.index].isEnd=!0,this.list[t.index].stopTime=t.value}else if("change-priority"==t.type)this.list[t.index].priority=t.value.id;else if("change-name"==t.type)this.list[t.index].name=t.value;else if("change-comments"==t.type){var e=this.list[t.index].commentCount;"add"==t.value?this.list[t.index].commentCount=e+1:this.list[t.index].commentCount=e-1}else"change-sub-task"==t.type&&(this.list[t.index].childWCCount=t.value.subdonecount,this.list[t.index].childAllCount=t.value.allcount)}},deactivated:function(){}}},dAx4:function(t,e,i){},dJEe:function(t,e,i){"use strict";var a=i("guA3");i.n(a).a},disj:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMyOTk2REJDRjEzRTExRThCRDc5QUY4MjY4MDIwRUEwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMyOTk2REJERjEzRTExRThCRDc5QUY4MjY4MDIwRUEwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzI5OTZEQkFGMTNFMTFFOEJENzlBRjgyNjgwMjBFQTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzI5OTZEQkJGMTNFMTFFOEJENzlBRjgyNjgwMjBFQTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6CD0GBAAABgElEQVR42qyUv0oDQRDGk8MmWCoqXucLqCCCKRLxCSw81EIQ9QEsgg/hHwjWgkIKI6egAUslsVAIFrEW7RQU00Xtcn4j38Kw7IriDfxud3ZmP25n/2STJMmkaT3yieP430JRFH23gScu44ugBl5BwrbGcd88Z2AENMEOaFFgnG2L403muZdsid2AczANOlb8AmyCXeZNgUffH0r/CJyBFYeYsQ7jp8wPfIILYAisq7FhS0z7kjfIeU7BJbAPPuiH4A4U6Bfoh/Q/wQHnOQUnQEP5T3IawAkosY04buwKjPoE+3k0tNW5CVts61b8BfT5BN/AgDWhCDYURSsuNWz7BG+tCVKrYy5T/nCOfqhyTF2dghWwDHKqhmNqmQ3Wy9Qwx/yKT7DKmpStjdH2rPpl5ld9N6XLM3XNvuzsu+Ng94JtMAvyzPVevQcmyQ24B3vgkhsmp2AGrPFP88z/8S4b0UkwzwdhlWJtblyJy+z+5nHQyz8kf7Js2i92kEnZvgQYAAVWXg0YNwZ9AAAAAElFTkSuQmCC"},dwXQ:function(t,e,i){"use strict";var a=i("1Mp6");i.n(a).a},eAcW:function(t,e,i){"use strict";var a=i("6ZY3"),s=i.n(a),n=i("1RnH"),l=i("0hym"),o=i("F/D6"),c=i("7Qib"),r={components:{relatedBusiness:n.a,XhUser:l.a},props:{visible:Boolean,params:Object,action:{type:Object,default:function(){return{type:"create"}}}},data:function(){var t=this,e=function(e,i,a){t.formData.startTime&&t.formData.stopTime&&Object(c.e)(t.formData.startTime)>Object(c.e)(t.formData.stopTime)&&a(new Error("开始时间必须小于结束时间")),a()};return{loading:!1,formData:{priority:0},formList:[{label:"任务名称",field:"name"},{label:"负责人",field:"mainUserName",type:"popover"},{label:"开始时间",field:"startTime",type:"time"},{label:"结束时间",field:"stopTime",type:"time"},{label:"优先级",field:"priority",type:"priority"},{label:"任务描述",field:"description",type:"textarea"}],colleaguesList:[],popoverModel:!1,rules:{name:[{required:!0,message:"任务名称不能为空",trigger:"blur"},{max:50,message:"任务名称长度最多为50个字符",trigger:"blur"}],startTime:[{validator:e,trigger:"blur"}],stopTime:[{validator:e,trigger:"blur"}]},relevanceAll:{},allData:{},radio:!0}},watch:{visible:function(t){t&&"create"==this.action.type&&(this.action.data?this.formData=s()({priority:0},this.action.data):(this.formData={priority:0},this.colleaguesList=[],this.relevanceAll={},this.allData={}))}},methods:{handleClose:function(){this.formData={priority:0},this.$emit("handleClose")},dialogVisibleSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;var i=s()({},t.formData);i={mainUserId:0==t.colleaguesList.length?"":t.colleaguesList[0].userId,startTime:t.formData.startTime||"",stopTime:t.formData.stopTime||"",description:t.formData.description,priority:t.formData.priority,name:t.formData.name,customerIds:t.relevanceAll.customerIds?","+t.relevanceAll.customerIds.join(",")+",":"",contactsIds:t.relevanceAll.contactsIds?","+t.relevanceAll.contactsIds.join(",")+",":"",businessIds:t.relevanceAll.businessIds?","+t.relevanceAll.businessIds.join(",")+",":"",contractIds:t.relevanceAll.contractIds?","+t.relevanceAll.contractIds.join(",")+",":""},t.params&&s()(i,t.params),t.loading=!0,Object(o.j)(i).then(function(e){t.$message.success("创建成功"),t.loading=!1,t.handleClose(),t.$emit("submit")}).catch(function(){t.loading=!1})})},checkInfos:function(t){this.relevanceAll=t},changeCheckout:function(t){this.colleaguesList=t.data},selectDelect:function(t,e){this.radio&&this.$refs.xhuser[0].changeCheckout([]),this.colleaguesList.splice(e,1)}}},d=(i("we71"),i("VQRf"),i("ZrdR")),u=Object(d.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-task-dialog"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.visible,"show-close":!1,"close-on-click-modal":!1,"before-close":t.handleClose,title:"新建任务",width:"700px"},on:{"update:visible":function(e){t.visible=e}}},[a("img",{staticClass:"el-icon-close",attrs:{src:i("lg/4"),alt:""},on:{click:t.handleClose}}),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules}},[t._l(t.formList,function(e,i){return a("el-form-item",{key:i,class:"el-form-item-"+e.field,attrs:{label:e.label,prop:e.field}},["textarea"==e.type?a("el-input",{attrs:{autosize:{minRows:4},type:"textarea"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}}):"time"==e.type?a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}}):"priority"==e.type?a("div",{staticClass:"priority-box"},[a("el-radio-group",{attrs:{fill:"red","text-color":"#FFF"},model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}},[a("el-radio",{attrs:{label:3}},[t._v("高")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("中")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("低")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("无")])],1)],1):"popover"==e.type?a("div",{staticClass:"type-popover"},[a("el-popover",{attrs:{placement:"bottom-end",width:"280",trigger:"click"}},[a("xh-user",{ref:"xhuser",refInFor:!0,attrs:{radio:t.radio,"selected-data":t.colleaguesList},on:{changeCheckout:t.changeCheckout}}),t._v(" "),a("div",{staticClass:"select-box",attrs:{slot:"reference"},slot:"reference"},[t._l(t.colleaguesList,function(e,i){return a("span",{key:i,staticClass:"select-box-span"},[t._v("\n                "+t._s(e.realname)+"\n                "),a("span",{staticClass:"el-icon-close",on:{click:function(a){a.stopPropagation(),t.selectDelect(e,i)}}})])}),t._v(" "),a("span",{staticClass:"el-icon-plus"})],2)],1)],1):a("el-input",{model:{value:t.formData[e.field],callback:function(i){t.$set(t.formData,e.field,i)},expression:"formData[item.field]"}})],1)}),t._v(" "),a("related-business",{attrs:{"all-data":t.allData,"margin-left":"0"},on:{checkInfos:t.checkInfos}})],2),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.dialogVisibleSubmit}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.handleClose}},[t._v("取消")])],1)],1)],1)},[],!1,null,"c70b59a2",null);u.options.__file="newDialog.vue";e.a=u.exports},eLCz:function(t,e,i){"use strict";var a=i("M6tP");i.n(a).a},eOzp:function(t,e,i){"use strict";var a=i("8GhS"),s=i("vG5h"),n=i("6zBA"),l=i("UcQx"),o={name:"TeamsHandle",components:{XhUserCell:a.p},mixins:[],props:{dialogVisible:{type:Boolean,required:!0,default:!1},title:{type:String,default:""},crmType:{type:String,default:""},selectionList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,visible:!1,usersList:[],handleType:1,addsTypes:[]}},computed:{},watch:{dialogVisible:{handler:function(t){this.visible=t},deep:!0,immediate:!0}},mounted:function(){this.visible=this.dialogVisible},methods:{handleCancel:function(){this.visible=!1,this.$emit("update:dialogVisible",!1)},userChage:function(t){this.usersList=t.value},handleConfirm:function(){var t=this;if(0===this.usersList.length)this.$message.error("请选择团队成员");else{var e=this,i=this.selectionList.map(function(t,i,a){return t[e.crmType+"Id"]}),a=this.usersList.map(function(t,e,i){return t.userId}),o={ids:i.join(","),memberIds:a.join(",")};"customer"===this.crmType&&"添加团队成员"==this.title&&(o.changeType=this.addsTypes.join(","));var c=void 0;"添加团队成员"==this.title?(o.power=this.handleType,c={customer:s.A,contract:n.n,business:l.o}[this.crmType]):c={customer:s.z,contract:n.m,business:l.n}[this.crmType],this.loading=!0,c(o).then(function(e){t.$message({type:"success",message:"操作成功"}),t.loading=!1,t.handleCancel(),t.$emit("handle",{type:"添加团队成员"==t.title?"add_user":"delete_user"})}).catch(function(){t.loading=!1})}}}},c=(i("RWfq"),i("ZrdR")),r=Object(c.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.title,visible:t.visible,"append-to-body":!0,width:"400px"},on:{"update:visible":function(e){t.visible=e},close:t.handleCancel}},[i("div",{staticClass:"handle-box"},[i("flexbox",{staticClass:"handle-item",attrs:{align:"stretch"}},[i("div",{staticClass:"handle-item-name",staticStyle:{"margin-top":"8px"}},[t._v("选择团队成员：")]),t._v(" "),i("xh-user-cell",{staticClass:"handle-item-content",attrs:{radio:!1,placeholder:"点击选择（多选）"},on:{"value-change":t.userChage}}),t._v(" "),"添加团队成员"!=t.title?i("div",{staticClass:"tips"},[t._v("此操作不可移除数据负责人")]):t._e()],1),t._v(" "),"添加团队成员"==t.title?i("flexbox",{staticClass:"handle-item"},[i("div",{staticClass:"handle-item-name"},[t._v("权限：")]),t._v(" "),i("el-radio-group",{model:{value:t.handleType,callback:function(e){t.handleType=e},expression:"handleType"}},[i("el-radio",{attrs:{label:1}},[t._v("只读")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("读写")])],1)],1):t._e(),t._v(" "),"添加团队成员"==t.title&&"customer"===t.crmType?i("flexbox",{staticClass:"handle-item"},[i("div",{staticClass:"handle-item-name"},[t._v("同时添加至：")]),t._v(" "),i("el-checkbox-group",{model:{value:t.addsTypes,callback:function(e){t.addsTypes=e},expression:"addsTypes"}},[i("el-checkbox",{attrs:{label:"2"}},[t._v("商机")]),t._v(" "),i("el-checkbox",{attrs:{label:"3"}},[t._v("合同")])],1)],1):t._e()],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.handleConfirm(e)}}},[t._v("保存")])],1)])},[],!1,null,"78a1d691",null);r.options.__file="TeamsHandle.vue";e.a=r.exports},fCst:function(t,e,i){"use strict";var a=i("rerW"),s=i.n(a),n=i("bS4n"),l=i.n(n),o=i("r4mJ"),c=i.n(o),r=i("F/D6"),d=i("sl8O"),u=i("KTTK"),m=i("5tqf"),h=i("utuE"),p={props:{newTagTitle:String,newTagInput:String,bgColorProps:String},data:function(){return{colorList:["#53D397","#20C1BD","#58DADA","#0FC9E7","#3498DB","#4586FF","#8983F3","#AEA1EA","#FF6699","#F24D70","#FF6F6F"],input:this.newTagInput,showBgColor:""}},watch:{bgColorProps:function(t){this.showBgColor=t||"#53D397"}},mounted:function(){this.showBgColor=this.bgColorProps||"#53D397"},methods:{back:function(){this.$emit("back")},close:function(){this.$emit("close")},changeColor:function(t){this.$emit("changeColor",t)},tagCreateSubmit:function(){this.$emit("tagCreateSubmit",this.input,this.showBgColor)},tagCancel:function(){this.$emit("tagCancel")}}},v=(i("BKBN"),i("ZrdR")),f=Object(v.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"new-tag-dialog"},[i("div",{staticClass:"title"},[i("span",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v(" "),i("span",[t._v(t._s(t.newTagTitle))]),t._v(" "),i("span",{staticClass:"el-icon-close rt",on:{click:t.close}})]),t._v(" "),i("div",{staticClass:"search"},[i("el-input",{attrs:{maxlength:10,size:"mini",placeholder:"输入标签名，最多十个字符"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),i("span",{staticClass:"checked-color",style:{background:t.showBgColor}})],1),t._v(" "),i("div",{staticClass:"color-box"},t._l(t.colorList,function(e,a){return i("span",{key:a,style:{background:e},on:{click:function(i){t.changeColor(e)}}})})),t._v(" "),i("div",{staticClass:"footer"},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.tagCreateSubmit}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"medium"},on:{click:t.tagCancel}},[t._v("取消")])],1)])},[],!1,null,"b8f3e1f0",null);f.options.__file="newTag.vue";var g=f.exports,b={props:{editTagList:Array},data:function(){return{inputModel:"",list:this.editTagList}},watch:{inputModel:function(t){this.list=this.editTagList.filter(function(e){return e.name.indexOf(t)>-1})}},methods:{back:function(){this.$emit("back")},close:function(){this.$emit("close")},deleteBtn:function(t){this.$emit("deleteBtn",t)},editBtn:function(t){this.$emit("editBtn",t)}}},y=(i("Ad61"),Object(v.a)(b,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-tag-dialog"},[i("div",{staticClass:"title"},[i("span",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v(" "),i("span",[t._v("标签管理")]),t._v(" "),i("span",{staticClass:"el-icon-close rt",on:{click:t.close}})]),t._v(" "),i("div",{staticClass:"search"},[i("el-input",{attrs:{maxlength:10,size:"mini",placeholder:"输入标签名，最多十个字符"},model:{value:t.inputModel,callback:function(e){t.inputModel=e},expression:"inputModel"}})],1),t._v(" "),i("div",{staticClass:"content"},t._l(t.list,function(e,a){return i("div",{key:a,staticClass:"tag-list"},[i("span",{staticClass:"tag-name",style:{background:e.color?e.color:"#ccc"}},[t._v("\n        "+t._s(e.name.length>10?e.name.substring(0,10)+"...":e.name)+"\n      ")]),t._v(" "),i("div",{staticClass:"rt"},[i("span",{staticClass:"el-icon-edit",on:{click:function(i){t.editBtn(e)}}}),t._v(" "),i("span",{staticClass:"el-icon-delete",on:{click:function(i){t.deleteBtn(e)}}})])])}))])},[],!1,null,"8364fd04",null));y.options.__file="editTag.vue";var k=y.exports,w=i("UinD"),C={components:{NewTag:g,EditTag:k},props:{taskData:{type:Object,default:function(){return{}}},placement:String},data:function(){return{tagShow:!1,tagContent:0,tagInputChange:"",editTagList:[],particularsTagList:[],particularsTagListCopy:[],newTagTitle:"",newTagInput:"",bgColorProps:"",editTagId:"",popoverWidth:"220"}},watch:{tagInputChange:function(t){this.particularsTagList=this.particularsTagListCopy.filter(function(e){return e.name.indexOf(t)>-1})}},mounted:function(){},methods:{createTagFun:function(){this.newTagTitle="创建新标签",this.newTagInput="",this.tagContent=1,this.popoverWidth="330"},editBtn:function(t){this.editTagId=t.labelId,this.newTagTitle="编辑标签",this.tagContent=3,this.bgColorProps=t.color,this.newTagInput=t.name},managementTag:function(){this.popoverWidth="400",this.tagContent=2},tagBtn:function(t,e){var i=this,a=e.filter(function(e){return t.check?e.check&&e.labelId!=t.labelId:e.check||e.labelId==t.labelId});for(var s in t.check?Object(r.j)({taskId:this.taskData.taskId,labelId:a.map(function(t){return t.labelId}).join(",")}).then(function(e){var a=i.taskData.labelList;for(var s in a)if(t.labelId==a[s].labelId){a.splice(s,1);break}t.check=!1}):Object(r.j)({taskId:this.taskData.taskId,labelId:a.map(function(t){return t.labelId}).join(",")}).then(function(e){t.check=!0,t.labelName=t.name,i.taskData.labelList.push(t)}),e)e[s].labelId==t.labelId?document.getElementsByClassName("tag-list")[s].style.background="#F7F8FA":document.getElementsByClassName("tag-list")[s].style.background="#FFF"},changeColor:function(t){this.bgColorProps=t},tagClose:function(){this.tagShow=!1},tagCreateSubmit:function(t,e){var i=this,a=this;"创建新标签"==this.newTagTitle?Object(w.e)({name:t,color:e}).then(function(t){i.tagClose(),i.tagListFun(),i.$message.success("创建成功")}):Object(w.e)({name:t,labelId:this.editTagId,color:e}).then(function(n){var l=!0,o=!1,c=void 0;try{for(var r,d=s()(a.editTagList);!(l=(r=d.next()).done);l=!0){var u=r.value;u.labelId==a.editTagId&&(u.name=t,u.color=e)}}catch(t){o=!0,c=t}finally{try{!l&&d.return&&d.return()}finally{if(o)throw c}}i.tagContent=2})},tagCancel:function(){"创建新标签"==this.newTagTitle?(this.tagClose(),this.$message.info("已取消创建")):this.tagContent=2},back:function(){"创建新标签"==this.newTagTitle?(this.tagContent=0,this.popoverWidth="220"):"编辑标签"==this.newTagTitle&&3==this.tagContent?this.tagContent=2:2==this.tagContent&&(this.tagContent=0,this.popoverWidth="220")},deleteBtn:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){e.tagShow=!0,e.managementTag(),Object(w.a)({labelId:t.labelId}).then(function(i){for(var a in e.editTagList)e.editTagList[a].labelId==t.labelId&&e.editTagList.splice(a,1);e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"}),e.tagShow=!0,e.managementTag()})},tagListFun:function(){var t=this;Object(w.c)().then(function(e){var i=!0,a=!1,n=void 0;try{for(var l,o=s()(e.data);!(i=(l=o.next()).done);i=!0){var c=l.value;if(t.taskData.labelList){var r=!0,d=!1,u=void 0;try{for(var m,h=s()(t.taskData.labelList);!(r=(m=h.next()).done);r=!0){if(m.value.labelId==c.labelId){c.check=!0;break}c.check=!1}}catch(t){d=!0,u=t}finally{try{!r&&h.return&&h.return()}finally{if(d)throw u}}}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.editTagList=e.data,t.particularsTagList=e.data,t.particularsTagListCopy=e.data})},referenceFun:function(){this.tagContent=0,this.editTagList&&!this.editTagList.length&&this.tagListFun()}}},I=(i("20cK"),Object(v.a)(C,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-index"},[i("el-popover",{attrs:{placement:t.placement,width:t.popoverWidth,trigger:"click"},model:{value:t.tagShow,callback:function(e){t.tagShow=e},expression:"tagShow"}},[0==t.tagContent?i("div",{staticClass:"tag-popover-box"},[i("div",{staticClass:"tag-top"},[i("span",[t._v("选择标签")]),t._v(" "),i("span",{staticClass:"el-icon-close rt cursor-pointer",on:{click:function(e){t.tagShow=!1}}})]),t._v(" "),i("el-input",{attrs:{placeholder:"搜索标签","prefix-icon":"el-icon-search",size:"small"},model:{value:t.tagInputChange,callback:function(e){t.tagInputChange=e},expression:"tagInputChange"}}),t._v(" "),i("div",{staticClass:"tag-content"},t._l(t.particularsTagList,function(e,a){return i("div",{key:a,staticClass:"tag-list",on:{click:function(i){t.tagBtn(e,t.particularsTagList)}}},[i("i",{staticClass:"wukong wukong-black-label",style:{color:e.color}}),t._v(" "),i("span",{staticClass:"item-label"},[t._v(t._s(e.name))]),t._v(" "),e.check?i("span",{staticClass:"el-icon-check rt"}):t._e()])})),t._v(" "),i("div",{staticClass:"tag-footer"},[i("p",{staticClass:"footer-row cursor-pointer",on:{click:t.createTagFun}},[i("span",{staticClass:"el-icon-plus"}),t._v(" "),i("span",[t._v("创建新标签")])]),t._v(" "),i("p",{staticClass:"footer-row cursor-pointer",on:{click:t.managementTag}},[i("span",{staticClass:"el-icon-setting"}),t._v(" "),i("span",[t._v("标签管理")])])])],1):1==t.tagContent?i("new-tag",{attrs:{"new-tag-title":t.newTagTitle,"new-tag-input":t.newTagInput,"bg-color-props":t.bgColorProps},on:{changeColor:t.changeColor,close:t.tagClose,tagCreateSubmit:t.tagCreateSubmit,tagCancel:t.tagCancel,back:t.back}}):2==t.tagContent?i("editTag",{attrs:{"edit-tag-list":t.editTagList},on:{back:t.back,close:t.tagClose,editBtn:t.editBtn,deleteBtn:t.deleteBtn}}):3==t.tagContent?i("new-tag",{attrs:{"new-tag-title":t.newTagTitle,"new-tag-input":t.newTagInput,"bg-color-props":t.bgColorProps},on:{changeColor:t.changeColor,close:t.tagClose,tagCreateSubmit:t.tagCreateSubmit,tagCancel:t.tagCancel,back:t.back}}):t._e(),t._v(" "),i("span",{attrs:{slot:"reference"},on:{click:t.referenceFun},slot:"reference"},[t._t("editIndex")],2)],1)],1)},[],!1,null,"34720cec",null));I.options.__file="tagIndex.vue";var A=I.exports,x=i("omC7"),D=i.n(x),T=i("0hym"),R={components:{XhUser:T.a},props:{taskData:{type:Object,default:function(){return{}}},text:String,time:[String,Number],subData:Object,subTaskCom:{type:String,default:""},taskId:[Number,String],checkboxData:{type:Boolean,default:!1}},data:function(){return{subtasksDate:"",xhUserData:[],subtaskChange:!1,num:0,subtasksTextarea:"",isNum:0,showUserPopover:!1}},computed:{ownerListRequest:function(){return d.n},workId:function(){return this.taskData.workId}},watch:{},created:function(){"edit"==this.subTaskCom&&(this.subtasksTextarea=this.text?this.text:"",this.subtasksDate=this.time,"{}"!==D()(this.subData)?this.subData.mainUser&&(this.subtaskChange=!0,this.xhUserData=[this.subData.mainUser]):(this.xhUserData=[],this.subtaskChange=!1))},methods:{subtasksSubmit:function(t){var e=this;this.subtasksTextarea=this.subtasksTextarea.split(/[\n]/).join(""),this.subtasksTextarea&&0==this.num?(this.num=1,"new"==this.subTaskCom?(this.$emit("on-handle",{type:"add",result:"success"}),Object(r.j)({pid:this.taskData.taskId,name:this.subtasksTextarea,stopTime:this.subtasksDate,mainUserId:0!=this.xhUserData.length?this.xhUserData[0].userId:""}).then(function(t){e.taskData.childTask.push({name:e.subtasksTextarea,stopTime:e.subtasksDate,taskId:t.data.taskId,mainUser:e.xhUserData.length>0?e.xhUserData[0]:null}),e.$message.success("子任务创建成功"),e.subtasksTextarea="",e.subtasksDate="",e.subtaskChange=!1,e.num=0}).catch(function(){e.$emit("on-handle",{type:"add",result:"error"}),e.$message.error("子任务创建失败"),e.num=0})):"edit"==this.subTaskCom&&(1==this.isNum||this.text!=this.subtasksTextarea||this.subtasksDate!=this.time?(this.$emit("on-handle",{type:"edit",result:"success"}),Object(r.j)({taskId:this.taskId,stopTime:this.subtasksDate,mainUserId:this.xhUserData.length>0?this.xhUserData[0].id:"",name:this.subtasksTextarea}).then(function(t){var i=e.taskData.childTask;for(var a in i)if(i[a].taskId==e.taskId){var s=i[a];s.name=e.subtasksTextarea,s.stopTime=e.subtasksDate,s.mainUser=e.xhUserData.length>0?e.xhUserData[0]:null,i.splice(a,1,s);break}e.num=0,e.$message.success("子任务编辑成功")}).catch(function(){e.$emit("on-handle",{type:"edit",result:"error"}),e.$message.error("子任务编辑失败"),e.num=0})):this.$emit("on-handle",{type:"cancel"}))):this.$emit("on-handle",{type:"cancel"})},xhUserCheckout:function(t){0!=t.data.length?(this.subtaskChange=!0,0!=this.xhUserData.length?(this.$set(this.xhUserData[0],"img",t.data[0].img),this.$set(this.xhUserData[0],"realname",t.data[0].realname)):this.xhUserData=t.data,this.isNum=1):(this.isNum=0,this.subtaskChange=!1),this.showUserPopover=!1},subtasksDateFun:function(){this.$refs.subtasksDate.change()}}},E=(i("lQJL"),Object(v.a)(R,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"task-sub"},[i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.subtasksSubmit,expression:"subtasksSubmit"}],staticClass:"subtasks-content"},[i("div",{staticClass:"checkbox-box subtasks-box"},[i("el-checkbox",{attrs:{disabled:""},model:{value:t.checkboxData,callback:function(e){t.checkboxData=e},expression:"checkboxData"}})],1),t._v(" "),i("div",{staticClass:"subtasks-content-box"},[i("el-input",{attrs:{maxlength:50,type:"textarea",autosize:"",placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.subtasksSubmit(e):null}},model:{value:t.subtasksTextarea,callback:function(e){t.subtasksTextarea=e},expression:"subtasksTextarea"}})],1),t._v(" "),i("flexbox",{staticClass:"subtasks-content-png"},[i("div",{staticClass:"time"},[i("el-date-picker",{ref:"subtasksDate",style:{width:t.subtasksDate?"54px":"28px"},attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.subtasksDate,callback:function(e){t.subtasksDate=e},expression:"subtasksDate"}}),t._v(" "),t.subtasksDate?i("span",{staticClass:"bg-color"},[t._v(t._s(t._f("moment")(t.subtasksDate,"MM-DD")))]):i("i",{staticClass:"wukong wukong-time-task",on:{click:t.subtasksDateFun}})],1),t._v(" "),i("el-popover",{attrs:{placement:"bottom-end",width:"280",trigger:"click"},model:{value:t.showUserPopover,callback:function(e){t.showUserPopover=e},expression:"showUserPopover"}},[i("xh-user",{ref:"xhuser",attrs:{"info-request":t.ownerListRequest,"info-params":{workId:t.workId},"selected-data":t.xhUserData,radio:""},on:{changeCheckout:t.xhUserCheckout}}),t._v(" "),i("div",{staticClass:"select-box",attrs:{slot:"reference"},slot:"reference"},[t.subtaskChange?t._l(t.xhUserData,function(e,a){return i("span",{key:a},[i("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",{on:{click:function(e){t.showUserPopover=!0}}},[t._v(t._s(e.realname))])]),t._v(" "),i("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.img),expression:"$options.filters.filterUserLazyImg(item.img)",arg:"background-image"}],key:e.img||e.userId,staticClass:"div-photo"})])],1)}):i("i",{staticClass:"wukong wukong-user"})],2)],1)],1)],1)])},[],!1,null,"866fdac0",null));E.options.__file="subTask.vue";var M=E.exports,N=i("S3Kq"),_=i("1RnH"),L=i("O1Uw"),j=i("uMjE"),S=i("8t5x"),O=i("7Qib"),B={components:{membersDep:h.a,emoji:N.a,relatedBusiness:_.a,XhUser:T.a,TagIndex:A,CRMFullScreenDetail:j.default,SubTask:M,FileCell:L.a},props:{id:[String,Number],detailIndex:Number,detailSection:Number,appendToBody:{type:Boolean,default:!1}},data:function(){return{zIndex:Object(O.h)(),commentsActivities:!0,commentsTextarea:"",childCommentsTextarea:"",replyChildComment:null,replyChildIndex:-1,contentLoading:!1,commentsPopover:!1,childCommentsPopover:!1,priorityVisible:!1,particularsList:[{id:3,label:"高",color:"#ED6363"},{id:2,label:"中",color:"#FF9668"},{id:1,label:"低",color:"#8bb5f0"},{id:0,label:"无",color:"#ccc"}],addSubtasks:!0,nameVinput:!1,taskDataName:"",addDescriptionShow:!1,addDescriptionTextarea:"",subTaskProgress:0,blurIndex:0,addComments:!1,allData:{},isComment:!0,commentsLoading:!1,relatedID:"",relatedCRMType:"",showRelatedDetail:!1,subTaskID:null,loading:!1,taskData:null,activityList:[],fileList:[],replyList:[]}},computed:l()({},Object(S.b)(["userInfo"]),{ownerListRequest:function(){return d.n},workId:function(){return this.taskData.workId},labelList:function(){return this.taskData&&this.taskData.labelList||[]}}),watch:{id:function(t){this.initInfo(),this.getDetail(),this.getCommentList(),this.getActivityList()},labelList:function(t){this.$emit("on-handle",{type:"change-label",value:t,index:this.detailIndex,section:this.detailSection})}},mounted:function(){this.appendToBody&&document.body.appendChild(this.$el),this.id&&(this.getDetail(),this.getCommentList(),this.getActivityList())},beforeDestroy:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{initInfo:function(){this.taskData=null,this.subTaskProgress=0,this.allData={business:[],contacts:[],contract:[],customer:[]},this.taskData=null,this.activityList=[],this.fileList=[]},getDetail:function(){var t=this;this.loading=!0,Object(r.g)({taskId:this.id}).then(function(e){var i=e.data;if(i.checked=5==i.status,i.childTask){var a=!0,n=!1,l=void 0;try{for(var o,c=s()(i.childTask);!(a=(o=c.next()).done);a=!0){var r=o.value;5==r.status?(r.checked=!0,t.subTaskProgress++):r.checked=!1}}catch(t){n=!0,l=t}finally{try{!a&&c.return&&c.return()}finally{if(n)throw l}}}t.fileList=e.data.file,t.allData={business:i.businessList||[],contacts:i.contactsList||[],contract:i.contractList||[],customer:i.customerList||[]},t.taskData=i,t.loading=!1}).catch(function(){t.loading=!1,t.closeBtn()})},getActivityList:function(){var t=this;Object(r.h)({taskId:this.id}).then(function(e){t.activityList=e.data}).catch(function(){})},getCommentList:function(){var t=this;Object(r.a)({typeId:this.id,type:1}).then(function(e){t.replyList=e.data}).catch(function(){})},titleCheckbox:function(t){var e=this;this.taskData.checked=t,Object(r.j)({taskId:this.id,status:this.taskData.checked?5:1}).then(function(i){e.$emit("on-handle",{type:"title-check",value:t,index:e.detailIndex,section:e.detailSection}),e.$store.dispatch("GetOAMessageNum","task")}).catch(function(){e.$emit("on-handle",{type:"title-check",value:!e.taskData.checked,index:e.detailIndex,section:e.detailSection}),e.taskData.checked=!e.taskData.checked})},closeBtn:function(){this.$emit("close")},footerTitle:function(t){switch(t){case 0:this.commentsActivities=!0,this.isComment=!0;break;case 1:this.commentsActivities=!1,this.isComment=!1}},priorityBtn:function(t,e){var i=this;this.taskData.priority=t.id,Object(r.j)({taskId:this.id,priority:t.id}).then(function(e){i.$emit("on-handle",{type:"change-priority",value:t,index:i.detailIndex,section:i.detailSection}),i.priorityVisible=!1}).catch(function(){i.$message.error("编辑失败"),i.taskData.priority=e})},moreDelete:function(){var t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){Object(r.e)({taskId:t.id}).then(function(e){t.$message.success("删除成功"),t.$emit("on-handle",{type:"delete",index:t.detailIndex,section:t.detailSection}),t.$emit("close")}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},moreArchive:function(){var t=this;this.$confirm("此操作将归档该任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){Object(r.d)({taskId:t.id}).then(function(e){t.$message.success("操作成功"),t.$emit("on-handle",{type:"delete",index:t.detailIndex,section:t.detailSection}),t.$emit("close")}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},httpRequest:function(t){var e=this;Object(u.d)({file:t.file,batchId:this.taskData.batchId}).then(function(t){t.filePath=t.url,e.fileList.push(t),e.$message.success("上传成功")}).catch(function(){})},accessoryDeleteFun:function(t,e){this.fileList.splice(t,1)},addSubtasksBtn:function(){this.addSubtasks=!this.addSubtasks},subtasksCheckbox:function(t,e){var i=this;e?(this.$set(t,"checked",!0),this.subTaskProgress++):(this.$set(t,"checked",!1),this.subTaskProgress--),this.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:this.subTaskProgress,allcount:this.taskData.childTask.length},index:this.detailIndex,section:this.detailSection}),Object(r.j)({taskId:t.taskId,status:e?5:1}).then(function(t){}).catch(function(){i.$message.error("子任务标记失败"),e?(i.$set(t,"checked",!1),i.subTaskProgress--):(i.$set(t,"checked",!0),i.subTaskProgress++),i.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:i.subTaskProgress,allcount:i.taskData.childTask.length},index:i.detailIndex,section:i.detailSection})})},editOwnerList:function(t,e){var i=this;Object(r.j)({taskId:this.id,ownerUserId:t.map(function(t){return t.userId}).join(",")}).then(function(e){i.taskData.ownerUserList=t}).catch(function(){})},deleteOwnerList:function(t,e){var i=this;Object(r.j)({taskId:this.id,ownerUserId:this.taskData.ownerUserList.filter(function(e){return e.userId!=t.userId}).map(function(t){return t.userId}).join(",")}).then(function(t){i.taskData.ownerUserList.splice(e,1)}).catch(function(){})},editMainUser:function(t){var e=this;Object(r.j)({taskId:this.id,mainUserId:t?t.data[0].userId:""}).then(function(i){t?e.$set(e.taskData,"mainUser",t.data[0]):e.$set(e.taskData,"mainUser",null),e.$emit("on-handle",{type:"change-main-user",value:t?t.data[0]:null,index:e.detailIndex,section:e.detailSection})}).catch(function(){})},nameVShow:function(t){var e=this;Object(r.j)({name:t,taskId:this.id}).then(function(i){e.nameVinput=!1,e.$emit("on-handle",{type:"change-name",value:t,index:e.detailIndex,section:e.detailSection}),e.taskData.name=t}).catch(function(){})},endTimeChange:function(t){var e=this;Object(r.j)({stopTime:t,taskId:this.id}).then(function(i){e.$emit("on-handle",{type:"change-stop-time",value:t,index:e.detailIndex,section:e.detailSection})}).catch(function(){})},addDescriptionSubmit:function(){var t=this;Object(r.j)({taskId:this.id,description:this.addDescriptionTextarea}).then(function(e){t.addDescriptionShow=!1,t.$set(t.taskData,"description",t.addDescriptionTextarea)}).catch(function(){})},selectEmoji:function(t){var e=this.commentsTextarea.split("");e.splice(this.blurIndex,0,t),this.commentsTextarea=e.join(""),this.commentsPopover=!1},selectEmojiChild:function(t){var e=this.childCommentsTextarea.split("");e.splice(this.blurIndex,0,t),this.childCommentsTextarea=e.join(""),this.childCommentsPopover=!1},addCommentsClick:function(){var t=this;this.addComments=!0,this.$nextTick(function(){t.$refs.commentsTextareaRef.focus()})},commentsSub:function(){var t=this;this.commentsTextarea&&(this.commentsLoading=!0,Object(r.m)({typeId:this.id,type:1,content:c()(this.commentsTextarea)}).then(function(e){e.data.childCommentList=[],e.data.show=!1,e.data.user=t.userInfo,t.replyList.push(e.data),t.commentsTextarea="",t.$emit("on-handle",{type:"change-comments",value:"add",index:t.detailIndex,section:t.detailSection}),t.commentsLoading=!1}).catch(function(){t.commentsLoading=!1}))},childCommentSubmit:function(){var t=this;if(this.replyChildComment&&this.childCommentsTextarea){var e=-1==this.replyChildIndex?this.replyChildComment:this.replyChildComment.childCommentList[this.replyChildIndex];Object(r.m)({pid:e.userId,typeId:e.typeId,mainId:0==e.mainId?e.commentId:e.mainId,type:1,content:c()(this.childCommentsTextarea)}).then(function(i){t.childCommentsPopover=!1,i.data.user=t.userInfo,i.data.replyUser=e.user,t.replyChildComment.childCommentList.push(i.data),t.replyChildComment.show=!1,t.replyChildComment=null,t.childCommentsTextarea="",t.$emit("on-handle",{type:"change-comments",value:"add",index:t.detailIndex,section:t.detailSection})}).catch(function(){})}},discussDelete:function(t,e,i){var a=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){Object(r.l)({commentId:t.commentId}).then(function(t){e.splice(i,1),a.$emit("on-handle",{type:"change-comments",value:"delete",index:a.detailIndex,section:a.detailSection})}).catch(function(){})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},discussBtn:function(t,e){var i=this;t.show?(this.$set(t,"show",!1),this.replyChildComment=null):(this.$set(t,"show",!0),this.replyChildComment=t,this.replyChildIndex=e,this.$nextTick(function(){i.$refs.childCommentsTextareaRef[0].focus()}))},blurFun:function(t){this.blurIndex=t.target.selectionEnd},checkInfos:function(t){var e=this;Object(r.b)({taskId:this.id,customerIds:t.customerIds&&t.customerIds.length?","+t.customerIds.join(",")+",":"",contactsIds:t.contactsIds&&t.contactsIds.length?","+t.contactsIds.join(",")+",":"",businessIds:t.businessIds&&t.businessIds.length?","+t.businessIds.join(",")+",":"",contractIds:t.contractIds&&t.contractIds.length?","+t.contractIds.join(",")+",":""}).then(function(t){e.$message.success("关联成功")}).catch(function(){})},commentsSubmit:function(t){this.addComments=!1},checkRelatedDetail:function(t,e){this.relatedID=e.key,this.relatedCRMType=t,this.showRelatedDetail=!0},deleteSubTask:function(t){var e=this;this.$confirm("此操作将删除该任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){Object(r.e)({taskId:t.taskId}).then(function(i){var a=e.taskData.childTask;for(var s in a)if(a[s].taskId==t.taskId){a.splice(s,1);break}t.checked&&(e.subTaskProgress--,e.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:e.subTaskProgress,allcount:e.taskData.childTask.length},index:e.detailIndex,section:e.detailSection})),e.$message.success("子任务删除成功")}).catch(function(){e.$message.error("子任务删除失败")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},editSubTask:function(t){this.subTaskID=t.taskId;var e=this.taskData.childTask;for(var i in e)e[i].taskId==t.taskId?this.$set(e[i],"showEdit",!0):this.$set(e[i],"showEdit",!1)},handleSubTasksBlock:function(t,e){"edit"==t.type?this.$set(e,"showEdit",!1):"add"==t.type?(this.addSubtasks=!0,"success"==t.result?this.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:this.subTaskProgress,allcount:this.taskData.childTask.length+1},index:this.detailIndex,section:this.detailSection}):this.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:this.subTaskProgress,allcount:this.taskData.childTask.length-1},index:this.detailIndex,section:this.detailSection})):"cancel"==t.type&&(e?this.$set(e,"showEdit",!1):this.addSubtasks=!0)},deleteTimeTop:function(){var t=this;Object(r.j)({taskId:this.id,stopTime:""}).then(function(e){t.$set(t.taskData,"stopTime","")}).catch(function(){})},activateTask:function(){var t=this;this.loading=!0,Object(r.i)({taskId:this.taskData.taskId}).then(function(e){t.loading=!1,t.$emit("on-handle",{type:"activate-task",index:t.detailIndex,section:t.detailSection}),t.closeBtn()}).catch(function(){t.loading=!1})},recoverTask:function(){var t=this;this.loading=!0,Object(m.c)({taskId:this.taskData.taskId}).then(function(e){t.loading=!1,t.$message.success("恢复成功"),t.$emit("on-handle",{type:"recover-task",index:t.detailIndex,section:t.detailSection}),t.closeBtn()}).catch(function(){t.loading=!1})},thoroughDeleteTask:function(){var t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,Object(m.a)({taskId:t.taskData.taskId}).then(function(e){t.loading=!1,t.$emit("on-handle",{type:"thorough-delete-task",index:t.detailIndex,section:t.detailSection}),t.closeBtn()}).catch(function(){t.loading=!1})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},G=(i("9zJZ"),Object(v.a)(B,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-fade"}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"particulars-common",style:{"z-index":t.zIndex}},[t.taskData?a("div",{staticClass:"clear-fix",attrs:{slot:"header"},slot:"header"},[t.taskData&&t.taskData.workName?a("div",{staticClass:"work-name"},[t._v(t._s(t.taskData.workName))]):t._e(),t._v(" "),a("div",{staticClass:"img-box-grop"},[a("div",[a("el-popover",{attrs:{placement:"bottom-start",width:"200",trigger:"click"},model:{value:t.priorityVisible,callback:function(e){t.priorityVisible=e},expression:"priorityVisible"}},[a("div",{staticClass:"particulars-priority-box"},t._l(t.particularsList,function(e,i){return a("p",{key:i,on:{click:function(i){t.priorityBtn(e,t.taskData.priority)}}},[a("span",{style:{"border-color":e.color,background:e.id==t.taskData.priority?e.color:"transparent",color:e.id==t.taskData.priority?"#fff":e.color}},[t._v(t._s(e.label))])])})),t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"wukong wukong-lightning"}),t._v(" "),a("span",[t._v("优先级")])])])],1),t._v(" "),a("div",[a("tag-index",{attrs:{placement:"bottom","task-data":t.taskData}},[a("div",{attrs:{slot:"editIndex"},slot:"editIndex"},[a("i",{staticClass:"wukong wukong-label"}),t._v(" "),a("span",[t._v("标签")])])])],1),t._v(" "),0==t.taskData.pid?a("div",{on:{click:t.addSubtasksBtn}},[a("i",{staticClass:"wukong wukong-sub-task"}),t._v(" "),a("span",[t._v("子任务")])]):t._e(),t._v(" "),a("div",[a("el-upload",{staticClass:"upload-demo",attrs:{"http-request":t.httpRequest,action:"https://jsonplaceholder.typicode.com/posts/",multiple:"","list-type":"picture"}},[a("i",{staticClass:"wukong wukong-file"}),t._v(" "),a("span",[t._v("附件")])])],1),t._v(" "),1!=t.taskData.ishidden?a("div",[a("el-popover",{attrs:{placement:"bottom",width:"80",trigger:"click"}},[a("div",{staticClass:"more-btn-group"},[1!=t.taskData.isArchive&&1!=t.taskData.ishidden?a("p",{on:{click:t.moreArchive}},[t._v("归 档")]):t._e(),t._v(" "),1!=t.taskData.ishidden?a("p",{on:{click:t.moreDelete}},[t._v("删 除")]):t._e()]),t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{src:i("DcnZ")}})])])],1):t._e(),t._v(" "),a("div",{staticClass:"task-close-img"},[a("img",{attrs:{src:i("cjwK")},on:{click:t.closeBtn}})])])]):t._e(),t._v(" "),t.taskData?a("div",{staticClass:"body-content"},[1==t.taskData.isArchive&&1!=t.taskData.ishidden?a("div",{staticClass:"particulars-extraContent"},[a("span",{staticClass:"text"},[t._v("该任务已于 "+t._s(t.taskData.archiveTime)+" 被归档。")]),t._v(" "),a("el-button",{staticClass:"border-radius",attrs:{type:"primary",size:"mini"},on:{click:t.activateTask}},[t._v("激活")])],1):t._e(),t._v(" "),1==t.taskData.ishidden?a("div",{staticClass:"particulars-extraContent"},[a("span",{staticClass:"text"},[t._v("该任务已于 "+t._s(t.taskData.hiddenTime)+" 被放入回收站。")]),t._v(" "),a("el-button",{staticClass:"border-radius",attrs:{type:"primary",size:"mini"},on:{click:t.recoverTask}},[t._v("恢 复")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.thoroughDeleteTask}},[t._v("彻底删除")])],1):t._e(),t._v(" "),a("div",{staticClass:"card-content-box"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"card-content-row margin-bottom-15"},[a("el-checkbox",{on:{change:t.titleCheckbox},model:{value:t.taskData.checked,callback:function(e){t.$set(t.taskData,"checked",e)},expression:"taskData.checked"}}),t._v(" "),a("div",{staticClass:"priority-data-name"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.nameVinput,expression:"!nameVinput"}],staticClass:"title-text",style:{"text-decoration":t.taskData.checked?"line-through":"none"}},[t._v(t._s(t.taskData.name)),a("span",{staticClass:"el-icon-edit-outline",on:{click:function(e){t.nameVinput=!0,t.taskDataName=t.taskData.name}}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.nameVinput,expression:"nameVinput"}],staticClass:"show-input"},[a("el-input",{attrs:{maxlength:50,size:"medium"},model:{value:t.taskDataName,callback:function(e){t.taskDataName=e},expression:"taskDataName"}}),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.nameVShow(t.taskDataName)}}},[t._v("保 存")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.nameVinput=!1}}},[t._v("取 消")])],1)],1)]),t._v(" "),a("div",{staticClass:"card-row-right"},[a("flexbox",{staticClass:"text-right"},[a("div",{staticClass:"color-label user-name-label"},[t._v(" 负责人： ")]),t._v(" "),t.taskData.mainUser?a("div",{staticClass:"bg-position"},[a("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(t.taskData.mainUser.realname))])]),t._v(" "),a("div",{directives:[{name:"photo",rawName:"v-photo",value:t.taskData.mainUser,expression:"taskData.mainUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.taskData.mainUser.img),expression:"$options.filters.filterUserLazyImg(taskData.mainUser.img)",arg:"background-image"}],key:t.taskData.main_user_img,staticClass:"div-photo main-user-name"})]),t._v(" "),a("img",{staticClass:"el-icon-close",attrs:{src:i("cEue"),alt:""},on:{click:function(e){t.editMainUser("")}}})],1):[a("el-popover",{attrs:{placement:"bottom",width:"280",trigger:"click"}},[a("xh-user",{ref:"xhuser",attrs:{"info-request":t.ownerListRequest,"info-params":{workId:t.workId},radio:""},on:{changeCheckout:t.editMainUser}}),t._v(" "),a("i",{staticClass:"wukong wukong-addition-task",attrs:{slot:"reference"},slot:"reference"})],1)]],2)],1)],1),t._v(" "),t.taskData.labelList?a("div",{staticClass:"card-content-row  margin-bottom-25"},[a("div",{staticClass:"particulars-priority-copy"},[t._l(t.taskData.labelList,function(e,i){return a("span",{key:i,staticClass:"item-color",style:{background:e.color?e.color:"#ccc"}},[t._v("\n                  "+t._s(e.labelName)+"\n                ")])}),t._v(" "),a("div",{staticClass:"add-tag"},[a("tag-index",{attrs:{placement:"right","task-data":t.taskData}},[a("div",{attrs:{slot:"editIndex"},slot:"editIndex"},[a("span",{staticClass:"el-icon-plus"}),t._v(" "),a("span",{staticClass:"label"},[t._v("标签")])])])],1)],2),t._v(" "),a("div",{staticClass:"card-row-right"},[a("div",{staticClass:"text-right"},[a("span",{staticClass:"color-label"},[t._v(" 截止日期： ")]),t._v(" "),a("div",{staticClass:"time-top"},[a("el-date-picker",{ref:"endTime",class:{"no-time-top":!t.taskData.stopTime},attrs:{clearable:!1,type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:""},on:{change:t.endTimeChange},model:{value:t.taskData.stopTime,callback:function(e){t.$set(t.taskData,"stopTime",e)},expression:"taskData.stopTime"}}),t._v(" "),t.taskData.stopTime?a("img",{staticClass:"el-icon-close time-top-close",attrs:{src:i("cEue"),alt:""},on:{click:function(e){e.stopPropagation(),t.deleteTimeTop(t.taskData.stopTime)}}}):t._e()],1)])])]):t._e(),t._v(" "),a("div",{staticClass:"add-description"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.addDescriptionShow,expression:"!addDescriptionShow"}]},[t.taskData.description?a("div",{staticClass:"description-content",on:{click:function(e){t.addDescriptionShow=!0,t.addDescriptionTextarea=t.taskData.description}}},[t._v(t._s(t.taskData.description))]):a("div",{staticClass:"no-description"},[a("span",{staticClass:"color-label"},[t._v("暂无描述")]),t._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){t.addDescriptionShow=!0}}},[t._v("添加描述")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.addDescriptionShow,expression:"addDescriptionShow"}]},[a("el-input",{attrs:{autosize:{minRows:2},type:"textarea",placeholder:"请输入内容"},model:{value:t.addDescriptionTextarea,callback:function(e){t.addDescriptionTextarea=e},expression:"addDescriptionTextarea"}}),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addDescriptionSubmit}},[t._v("保 存")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.addDescriptionShow=!1}}},[t._v("取 消")])],1)],1)]),t._v(" "),a("div",{staticClass:"card-content-row card-content-row-column"},[a("flexbox",[a("div",{staticClass:"color-label participant"},[a("i",{staticClass:"wukong wukong-user"}),t._v(" "),a("span",[t._v("参与人： ")])]),t._v(" "),t.taskData.ownerUserList?a("div",{staticClass:"participant-class"},t._l(t.taskData.ownerUserList,function(e,s){return a("span",{key:s,staticClass:"owner-list"},[a("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(e.realname))])]),t._v(" "),a("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.img),expression:"$options.filters.filterUserLazyImg(item.img)",arg:"background-image"}],key:e.img,staticClass:"div-photo item-img"})]),t._v(" "),a("img",{staticClass:"el-icon-close",attrs:{src:i("cEue")},on:{click:function(i){t.deleteOwnerList(e,s)}}})],1)})):t._e(),t._v(" "),a("members-dep",{attrs:{"close-dep":!0,"content-block":!1,"user-checked-data":t.taskData.ownerUserList,"user-request":t.ownerListRequest,"user-params":{workId:t.workId}},on:{popoverSubmit:t.editOwnerList}},[a("i",{staticClass:"wukong wukong-addition-task",attrs:{slot:"membersDep"},slot:"membersDep"})])],1)],1),t._v(" "),a("div",{staticClass:"card-content-row card-content-row-column margin-bottom-30"},[a("span",{staticClass:"color-label participant"},[a("i",{staticClass:"wukong wukong-relevance"}),t._v(" "),a("span",[t._v("关联业务")])]),t._v(" "),a("related-business",{attrs:{"margin-left":"0","is-task":!0,"all-data":t.allData,"task-id":t.taskData.taskId},on:{checkRelatedDetail:t.checkRelatedDetail,checkInfos:t.checkInfos}})],1),t._v(" "),0==t.taskData.pid?a("div",{staticClass:"card-content-row card-content-row-column"},[a("div",{staticClass:"display-flex sub-task margin-bottom-7"},[a("span",{staticClass:"color-label participant"},[a("i",{staticClass:"wukong wukong-sub-task"}),t._v(" "),a("span",[t._v("子任务")])]),t._v(" "),0!=t.taskData.childTask.length?[a("span",{staticClass:"color-label sub-task-progress"},[t._v(" ("+t._s(t.subTaskProgress)+"/"+t._s(t.taskData.childTask.length)+") ")]),t._v(" "),a("el-progress",{attrs:{percentage:t.subTaskProgress/t.taskData.childTask.length*100,"stroke-width":10}})]:[a("span",{staticClass:"color-label sub-task-progress"},[t._v(" ("+t._s(t.subTaskProgress)+"/"+t._s(t.taskData.childTask.length)+") ")]),t._v(" "),a("el-progress",{attrs:{percentage:0}})]],2),t._v(" "),0!=t.taskData.childTask.length?t._l(t.taskData.childTask,function(e,i){return a("div",{key:i,staticClass:"card-related-matters subtasks-box"},[e.showEdit?a("sub-task",{attrs:{"sub-task-com":"edit",time:e.stopTime,"sub-data":e,text:e.name,"task-id":t.subTaskID,"checkbox-data":e.checked,"task-data":t.taskData},on:{"on-handle":function(i){t.handleSubTasksBlock(i,e)}}}):a("div",{staticClass:"show-edit"},[a("div",{staticStyle:{display:"inline-block"},on:{click:function(t){t.stopPropagation()}}},[a("el-checkbox",{on:{change:function(i){t.subtasksCheckbox(e,i)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}})],1),t._v(" "),a("span",{staticClass:"item-name",style:{"text-decoration":e.checked?"line-through":"none"}},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"edit-del-box"},[a("i",{staticClass:"wukong wukong-edit-task",on:{click:function(i){t.editSubTask(e)}}}),t._v(" "),a("i",{staticClass:"wukong wukong-delete-task",on:{click:function(i){t.deleteSubTask(e)}}})]),t._v(" "),a("div",{staticClass:"rt"},[a("flexbox",{staticClass:"rt-box"},[e.stopTime?a("div",{staticClass:"bg-color task-bg-color"},[t._v(t._s(t._f("moment")(e.stopTime,"MM-DD"))+" 截止")]):t._e(),t._v(" "),e.mainUser?a("div",{directives:[{name:"photo",rawName:"v-photo",value:e.mainUser,expression:"item.mainUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.mainUser.img),expression:"$options.filters.filterUserLazyImg(item.mainUser.img)",arg:"background-image"}],key:e.mainUser.img,staticClass:"div-photo"}):t._e()])],1)])],1)}):t._e(),t._v(" "),t.addSubtasks?a("div",{staticClass:"add-subtasks",on:{click:function(e){t.addSubtasks=!1}}},[a("span",{staticClass:"el-icon-plus"}),t._v(" "),a("span",[t._v("添加子任务")])]):a("sub-task",{attrs:{"sub-task-com":"new","task-data":t.taskData},on:{"on-handle":t.handleSubTasksBlock}})],2):t._e(),t._v(" "),0!=t.fileList.length?a("div",{staticClass:"card-content-row card-content-row-column"},[a("span",{staticClass:"color-label participant class-file"},[a("i",{staticClass:"wukong wukong-file"}),t._v(" "),a("span",[t._v("附件")])]),t._v(" "),a("div",{staticClass:"accessory-box"},t._l(t.fileList,function(e,i){return a("file-cell",{key:i,attrs:{data:e,"cell-index":i,"module-id":t.id,"show-delete":!0},on:{delete:t.accessoryDeleteFun}})}))]):t._e()])]),t._v(" "),a("div",{staticClass:"border"}),t._v(" "),a("div",{staticClass:"card-footers"},[a("div",{staticClass:"footer-title"},[a("span",{on:{click:function(e){t.footerTitle(0)}}},[t.isComment?a("i",{staticClass:"wukong wukong-comment-task",staticStyle:{color:"#3E84E9"}}):a("i",{staticClass:"wukong wukong-comment-task"}),t._v(" "),a("span",{staticClass:"cursor-pointer",style:{color:t.isComment?"#3E84E9":"#666"}},[t._v("评论")])]),t._v(" "),a("span",{staticClass:"title-border"}),t._v(" "),a("span",{on:{click:function(e){t.footerTitle(1)}}},[t.isComment?a("i",{staticClass:"wukong wukong-activity-task",staticStyle:{"font-size":"18px"}}):a("i",{staticClass:"wukong wukong-activity-task",staticStyle:{color:"#3E84E9","font-size":"18px"}}),t._v(" "),a("span",{staticClass:"cursor-pointer",style:{color:t.isComment?"#666":"#3E84E9"},on:{click:function(e){t.footerTitle(t.isComment)}}},[t._v("活动")])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.commentsLoading,expression:"commentsLoading"}],staticClass:"footer-content-box"},[a("div",{staticClass:"footer-content"},[t.commentsActivities?a("div",{staticClass:"add-comments"},[a("div",{staticClass:"footer-img"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:t.userInfo,expression:"userInfo"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.userInfo.img),expression:"$options.filters.filterUserLazyImg(userInfo.img)",arg:"background-image"}],key:t.userInfo.img,staticClass:"div-photo"})]),t._v(" "),a("div",{staticClass:"comments-con"},[t.addComments?a("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.commentsSubmit,expression:"commentsSubmit"}],staticClass:"comments-box"},[a("el-input",{ref:"commentsTextareaRef",attrs:{rows:4,type:"textarea",placeholder:"添加评论"},on:{blur:t.blurFun},model:{value:t.commentsTextarea,callback:function(e){t.commentsTextarea=e},expression:"commentsTextarea"}}),t._v(" "),a("div",{staticClass:"btn-group"},[a("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"},model:{value:t.commentsPopover,callback:function(e){t.commentsPopover=e},expression:"commentsPopover"}},[a("emoji",{on:{select:t.selectEmoji}}),t._v(" "),a("img",{staticClass:"smiling-img",attrs:{slot:"reference",src:i("woiz")},slot:"reference"})],1),t._v(" "),a("el-button",{staticClass:"rt",attrs:{type:"primary"},on:{click:t.commentsSub}},[t._v("发布")])],1)],1):a("div",{staticClass:"footer-bg",on:{click:t.addCommentsClick}},[t._v("添加评论")]),t._v(" "),t.replyList&&0!=t.replyList.length?a("div",{staticClass:"discuss"},t._l(t.replyList,function(e,s){return a("div",{key:s,staticClass:"discuss-list"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:e.user,expression:"discussItem.user"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.user.img),expression:"$options.filters.filterUserLazyImg(discussItem.user.img)",arg:"background-image"}],key:e.user.img,staticClass:"div-photo head-img header-circle"}),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(e.user.realname))]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(e.createTime))]),t._v(" "),a("div",{staticClass:"rt"},[a("span",{on:{click:function(i){t.discussDelete(e,t.replyList,s)}}},[t._v("删除")]),t._v(" "),a("span",{on:{click:function(i){t.discussBtn(e,-1)}}},[t._v("回复")])]),t._v(" "),a("p",{staticClass:"reply-title"},[a("span",{domProps:{innerHTML:t._s(t.emoji(e.content))}})]),t._v(" "),e.childCommentList&&e.childCommentList.length>0?a("div",{staticClass:"children-reply"},t._l(e.childCommentList,function(i,s){return a("div",{key:s,staticClass:"discuss-list"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:i.user,expression:"childDiscussItem.user"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(i.user.img),expression:"$options.filters.filterUserLazyImg(childDiscussItem.user.img)",arg:"background-image"}],key:i.user.img,staticClass:"div-photo head-img header-circle"}),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(i.user.realname))]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(i.createTime))]),t._v(" "),a("div",{staticClass:"rt"},[a("span",{on:{click:function(a){t.discussDelete(i,e.childCommentList,s)}}},[t._v("删除")]),t._v(" "),a("span",{on:{click:function(i){t.discussBtn(e,s)}}},[t._v("回复")])]),t._v(" "),a("p",{staticClass:"reply-title"},[[a("span",[t._v("回复")]),t._v(" "),i.replyUser?a("span",{staticClass:"reply"},[t._v("@"+t._s(i.replyUser.realname)+"：")]):t._e()],t._v(" "),a("span",{domProps:{innerHTML:t._s(t.emoji(i.content))}})],2)])})):t._e(),t._v(" "),e.show?a("div",{staticClass:"comment-box"},[a("el-input",{ref:"childCommentsTextareaRef",refInFor:!0,attrs:{rows:2,type:"textarea",placeholder:"请输入内容"},on:{blur:t.blurFun},model:{value:t.childCommentsTextarea,callback:function(e){t.childCommentsTextarea=e},expression:"childCommentsTextarea"}}),t._v(" "),a("div",{staticClass:"btn-group"},[a("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"},model:{value:t.childCommentsPopover,callback:function(e){t.childCommentsPopover=e},expression:"childCommentsPopover"}},[a("emoji",{on:{select:t.selectEmojiChild}}),t._v(" "),a("img",{staticClass:"smiling-img",attrs:{slot:"reference",src:i("woiz")},slot:"reference"})],1),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{loading:t.contentLoading,type:"primary"},on:{click:function(e){t.childCommentSubmit()}}},[t._v("回复")]),t._v(" "),a("el-button",{on:{click:function(t){e.show=!1}}},[t._v("取消")])],1)],1)],1):t._e()])})):t._e()])]):a("div",{staticClass:"activity-box"},[0!=t.activityList.length?t._l(t.activityList,function(e,i){return a("flexbox",{key:i,staticClass:"activity-list",attrs:{align:"stretch"}},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.img),expression:"$options.filters.filterUserLazyImg(item.img)",arg:"background-image"}],key:e.img,staticClass:"div-photo"}),t._v(" "),a("div",{staticClass:"activity-name"},[t._v(t._s(e.realname))]),t._v(" "),a("div",{staticClass:"activity-content"},[t._v(t._s(e.content))]),t._v(" "),a("div",{staticClass:"activity-time"},[t._v(t._s(e.createTime))])])}):t._e()],2)])])]),t._v(" "),t._t("default")],2):t._e(),t._v(" "),t.taskData&&t.taskData.createUser?a("div",{staticClass:"tip"},[a("span",[t._v(t._s(t.taskData.createUser.realname)+" 创建于 "+t._s(t.taskData.createTime))])]):t._e(),t._v(" "),a("c-r-m-full-screen-detail",{attrs:{visible:t.showRelatedDetail,"crm-type":t.relatedCRMType,id:t.relatedID},on:{"update:visible":function(e){t.showRelatedDetail=e}}})],1)],1)},[],!1,null,"b0b4be1c",null));G.options.__file="particulars.vue";e.a=G.exports},g9Ri:function(t,e,i){"use strict";var a=i("NUP+");i.n(a).a},gaN2:function(t,e,i){},gd5k:function(t,e,i){"use strict";var a=i("Fpl1"),s=i("+zsY"),n=i("KzkL"),l=i("ExMk"),o={name:"ExamineLog",components:{ExamineCell:a.a,CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-3043"),i.e("chunk-7fee")]).then(i.bind(null,"uMjE"))},ExamineHandle:function(){return i.e("chunk-0616").then(i.bind(null,"QhmF"))},ExamineCreateView:s.a},props:{id:[String,Number],crmType:{type:String,default:""}},data:function(){return{loading:!1,loadMoreLoading:!0,isPost:!1,page:1,list:[],rowID:"",showExamineHandle:!1,isCreate:!1,createAction:{type:"save"},createInfo:{},showFullDetail:!1,detailCRMType:""}},computed:{},watch:{id:function(t){this.refreshList()}},mounted:function(){var t=this,e=document.getElementById("follow-log-content");e.onscroll=function(){var i=e.scrollTop+e.clientHeight-e.scrollHeight;Math.abs(i)<10&&1==t.loadMoreLoading&&(t.isPost?t.loadMoreLoading=!1:(t.isPost=!0,t.page++,t.getList()))},this.getList()},activated:function(){},deactivated:function(){},methods:{getList:function(){var t=this;this.loading=!0;var e={page:this.page,limit:10};e[this.crmType+"Ids"]=this.id,Object(n.k)(e).then(function(e){t.list=t.list.concat(e.data.list),e.data.list.length<10?t.loadMoreLoading=!1:t.loadMoreLoading=!0,t.loading=!1,t.isPost=!1}).catch(function(){t.isPost=!1,t.loading=!1})},refreshList:function(){this.page=1,this.list=[],this.getList()},examineCellHandle:function(t){var e=this;"edit"==t.type?(t.data.item.title=t.data.item.categoryName,this.createInfo=t.data.item,this.createAction={type:"update",id:t.data.item.examineId,data:t.data.item},this.isCreate=!0):"delete"==t.type?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.d)({examineId:t.data.item.examineId}).then(function(t){e.refreshList(),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):"withdraw"==t.type?(this.rowID=t.data.item.examineId,this.showExamineHandle=!0):"view"==t.type?(this.detailCRMType="examine",this.rowID=t.data.item.examineId,this.showFullDetail=!0):"related-detail"==t.type&&(this.rowID=t.data.item[t.data.type+"Id"],this.detailCRMType=t.data.type,this.showFullDetail=!0)}}},c=(i("dJEe"),i("ZrdR")),r=Object(c.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{directives:[{name:"empty",rawName:"v-empty",value:0===t.list.length,expression:"list.length === 0"}]},[i("div",{staticClass:"log-items"},[t._l(t.list,function(e,a){return i("examine-cell",{key:a,attrs:{data:e},on:{"on-handle":t.examineCellHandle}})}),t._v(" "),i("div",{staticClass:"load"},[i("el-button",{attrs:{loading:t.loadMoreLoading,type:"text"}},[t._v(t._s(t.loadMoreLoading?"加载更多":"没有更多了"))])],1)],2)]),t._v(" "),i("examine-handle",{attrs:{show:t.showExamineHandle,id:t.rowID,"examine-type":"oa_examine",status:"2"},on:{close:function(e){t.showExamineHandle=!1},save:t.refreshList}}),t._v(" "),t.isCreate?i("examine-create-view",{attrs:{"category-id":t.createInfo.categoryId,"category-title":t.createInfo.title,type:t.createInfo.type,action:t.createAction},on:{"save-success":t.refreshList,"hiden-view":function(e){t.isCreate=!1}}}):t._e(),t._v(" "),i("c-r-m-full-screen-detail",{attrs:{visible:t.showFullDetail,"crm-type":t.detailCRMType,id:t.rowID},on:{"update:visible":function(e){t.showFullDetail=e}}})],1)},[],!1,null,"41dc4ee6",null);r.options.__file="ExamineLog.vue";e.a=r.exports},guA3:function(t,e,i){},gwVn:function(t,e,i){"use strict";var a=i("Y9eb");i.n(a).a},heiR:function(t,e,i){"use strict";var a=i("/oM9");i.n(a).a},i68b:function(t,e,i){"use strict";var a=i("bS4n"),s=i.n(a),n=i("KzkL"),l=i("8t5x");e.a={data:function(){return{followTypes:[],followType:""}},computed:s()({},Object(l.b)(["oa"]),{showOAPermission:function(){return this.oa}}),created:function(){this.getFollowLogType()},methods:{getFollowLogType:function(){var t=this;this.loading=!0,Object(n.x)().then(function(e){t.loading=!1,t.followTypes=e.data.map(function(t){return{type:t,name:t}}),t.followType=e.data.length>0?e.data[0]:""}).catch(function(){t.loading=!1})}},deactivated:function(){}}},i91G:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU2RjI0NjM0RTA5QjExRTg4QTE5QjM2OEE1QUE5MUZBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU2RjI0NjM1RTA5QjExRTg4QTE5QjM2OEE1QUE5MUZBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTZGMjQ2MzJFMDlCMTFFODhBMTlCMzY4QTVBQTkxRkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTZGMjQ2MzNFMDlCMTFFODhBMTlCMzY4QTVBQTkxRkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4H2LzoAAAAnklEQVR42mI8c+YMA7WAsbExAxMDlQGygSuA+B8Q/8eD/0HV4QQsSOwwNAtwAZChEcS4kJFIXzES62WqhyFdDESOqH1ocjuwRRQLAQPxRZQHEvsvLKKYKIkAbD5FNvA/kZr/ExuGq5HC6wiauo1I4bWa2IQdDsXYgP+gTTZUN5DYiPpHbDqERRQjAUtXE2sgvojCnnD///8/uCMFIMAAVWsql9WKpTgAAAAASUVORK5CYII="},kblT:function(t,e,i){"use strict";var a=i("IvBF");i.n(a).a},lF6w:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIyOTk1N0FERjEzRTExRTg4OEVBOEVDQThENkIzQ0ZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIyOTk1N0FFRjEzRTExRTg4OEVBOEVDQThENkIzQ0ZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjI5OTU3QUJGMTNFMTFFODg4RUE4RUNBOEQ2QjNDRkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjI5OTU3QUNGMTNFMTFFODg4RUE4RUNBOEQ2QjNDRkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6MmP6iAAABAUlEQVR42qyUMQ6CQBBFWSA0XkMtPIFaewShtdA72BmNpZ21JrbIEbSxUQ9gp8ew0RDXjxmSyWZlcWWSl2Fn2M8s/CCklE6V4fNFkiTWQmEYfrJruC8CF/CgHP00oRJ9sAAjcAIdsKLe9tumogmnYAh24E55ACZFExYJNsBZqR2pbiV4BW2l1qW6leAMrEEP1ChvwNz2oyT0wCWogxsYg9hW0KHN8S9+dA3+S4FkpCY/+gb/HcCT9QJlXUow999e08vFsmlF2SPr/PfXO9T5z2GTSc11oSD3X6D0AnZUoTu2b/BfE3is91LWpW2Tea9FDxQMj02nDVH1H9t1Ko63AAMAVtY5SND2kZUAAAAASUVORK5CYII="},lQJL:function(t,e,i){"use strict";var a=i("ZvC+");i.n(a).a},lT1d:function(t,e,i){"use strict";var a={name:"StatisticalMember",components:{CreateSections:i("EP+0").a},props:{list:Array},data:function(){return{fieldList:[{prop:"realname",label:"姓名"},{prop:"allCount",label:"任务总数"},{prop:"complete",label:"已完成数"},{prop:"unfinished",label:"未完成数"},{prop:"overdue",label:"逾期数"},{prop:"completionRate",label:"完成率"}]}},computed:{},mounted:function(){},methods:{cellStyle:function(t){var e=t.row,i=t.column;t.rowIndex,t.columnIndex;return"overtimeCount"===i.property&&e.overtimeCount?{color:"#FF5D60"}:"completionRate"===i.property&&e.completionRate?{color:"#19DBC1"}:{}}}},s=(i("TxnW"),i("ZrdR")),n=Object(s.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("create-sections",{attrs:{title:"成员完成情况"}},[e("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:this.list,"cell-style":this.cellStyle,height:"500",stripe:"",border:"","highlight-current-row":""}},this._l(this.fieldList,function(t,i){return e("el-table-column",{key:i,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":""}})}))],1)},[],!1,null,"1714938a",null);n.options.__file="statisticalMember.vue";e.a=n.exports},lY9J:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEzRUNCODVGMzRGRDExRTlCODdCQTA2QkQzOUQxNjA2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEzRUNCODYwMzRGRDExRTlCODdCQTA2QkQzOUQxNjA2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTNFQ0I4NUQzNEZEMTFFOUI4N0JBMDZCRDM5RDE2MDYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTNFQ0I4NUUzNEZEMTFFOUI4N0JBMDZCRDM5RDE2MDYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4YJ3OSAAACVUlEQVR42mLkP/mcjYGBoRuIY4BYiGFwgfdAvBiIS1mARBcQ5zEMTiAIddt3RmCIvh2EIYkO3jENAUeCgBATwxABow4ddehgByyUGsDGyMigycXCoMTOzOAtyMGgxsnMoMjOwnDqyy+G6kefGW58/0MVh4LK0f/kapZkY2bYpSnEIAt0JDbwB2jylW+/GV79/sfQ+OQzw9VvfwYmRKuleXA6Emw4IwODATcrmP0X6OjI2+8HJo1a87ERrVaFk3ngMhMfMyPRaoVZmAbOoayMxDuUhQS1VHfov//E58Pf//8PjEMjRTgZuJmJ187NxMjgJcg+MA5lJSE2OYAOTRLjor9Dv/8jPSq5mBjp79DDn36RpP4zsCCd8fIb/Qv8KS++gjNIpzwfQbWgsPe+/o7hErCWGpBcP+fVN4ZDRITsktffKXIkxQ4FVYtht94z7PzwE6eao59/MZQ+/DTwzbwfwEy1/yNuhy578x2sZsAdCmp4OPDjLh91OCluSZLfzBNlZWIw52FjsOJlZXATYGdQ4cDvmFNffjPsBYb6SWAyALG/kRHCJDlUHOjAFjk+hgAhDpIKe/RiCpQJO59+ISlJEO1QKVAjWUuIQYaNmSpReQIYun433jP8IrINQFQaBXU3FqoIUM2RIGDBy8YwUZGPupmpUIqbwZSHleodNlB7wR+YjKjmUCd+dgZaAao6VIGdmWYO1Say+CLKoZS0eggBaSLTPVHekT37cnSkZNShow4dTg59NwTcCZ5sWDwEHDoHVI6WgVpRQBzLAJnXGUwANiFWCxBgADCJpQ79eqNYAAAAAElFTkSuQmCC"},lYrD:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk3RDI1NkEzRjEzRTExRThCRTE0OEM0RTE3RTI1RjI2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk3RDI1NkE0RjEzRTExRThCRTE0OEM0RTE3RTI1RjI2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTdEMjU2QTFGMTNFMTFFOEJFMTQ4QzRFMTdFMjVGMjYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTdEMjU2QTJGMTNFMTFFOEJFMTQ4QzRFMTdFMjVGMjYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4WqqZoAAAAqElEQVR42mL8//8/AzUBEwOVAQsyZ/Xq1WQZEhoaSrQL2YB4IhC/BeJ3UDYbJV7uAmJVINYBYm0ou4loL2MBsVDDnkP5yUB8BYgryHWhEJJhDFC2EF1jmS4GHgbi/1DMgMTGJnaYGANtgNgWiBkJYFuoWqK8fIQI3x2hJAwPY/MepZHCSHJexgNsKU02NkTotSbWhUeIDS8gOEqMgbaUJGzGQV9iAwQYALZRI7ZLlEplAAAAAElFTkSuQmCC"},"lg/4":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE5RDA1QTM2RTE2RjExRThCNTA3RDU0NzZGMDlDNzcxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE5RDA1QTM3RTE2RjExRThCNTA3RDU0NzZGMDlDNzcxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTlEMDVBMzRFMTZGMTFFOEI1MDdENTQ3NkYwOUM3NzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTlEMDVBMzVFMTZGMTFFOEI1MDdENTQ3NkYwOUM3NzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ZdSD+AAAA8UlEQVR42qzWMQrCMBgF4PRZj+DgDRx08gQOIk7eVnTR0cGKk6cQN3FUX6CFEtr0/5M/8Aolbb+S8kKLqqpuzrkfs2WeznZMmSPzBg8Fs2ROzMQY8c9cMF8PbZgHMzfEGmTG3Jkd6uVaGWIhsmZeqCetsE7ET6B1US7Wi4RQDhZFuqAUbBDpgzSYCIlBEkyMDEExTIX4UQo+dIOdW1ipQaRQF+Y0iGTpwpcatc7HmvuRWEZ1qZFYRnWpkdh49Q6CjMarMORsKxoMOduKBkMmIsZggIgwGCGDGAyRKOahgyHSh+099GEuhkiIXf0P5F+AAQDYHIszFmtpKgAAAABJRU5ErkJggg=="},m6a2:function(t,e,i){},m6j2:function(t,e,i){},mX3o:function(t,e,i){"use strict";var a=i("LKdb");e.a={data:function(){return{loading:!1,tab_loading:null}},watch:{loading:function(t){t?this.tab_loading=a.Loading.service({target:document.querySelector(".t-loading-content")}):this.tab_loading.close()}},mounted:function(){},deactivated:function(){}}},n68K:function(t,e,i){},nPgy:function(t,e,i){"use strict";var a=i("CZJm");i.n(a).a},nXBW:function(t,e,i){"use strict";var a=i("m6a2");i.n(a).a},"oEu+":function(t,e,i){},oNhu:function(t,e,i){},pEgN:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVEQTUxQzQzRTE2RTExRTg5MEI4OUFGQUQ2OEUxQzBBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVEQTUxQzQ0RTE2RTExRTg5MEI4OUFGQUQ2OEUxQzBBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RURBNTFDNDFFMTZFMTFFODkwQjg5QUZBRDY4RTFDMEEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RURBNTFDNDJFMTZFMTFFODkwQjg5QUZBRDY4RTFDMEEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz55NjbSAAAAr0lEQVR42mI8c+YMA7WAsbExAxMDlQGygduA+D8ZeBsuAz3JdJQnPheSA7bjMjAEiDeTaNgOqD6sBn4H4mAgXk6kYeuB2B+Iv+EyEAR+A3EMEM8gYNgyIA4D4l/4YhkG/gFxFhB34DBsNhDHAfEfQskGGYCSQyUQN6OJ1wFxOhD/JSYdYgN1aPxmqGUM5BpIUU4ZNZB2Bi4gxUAWItQkQvOsH7UMBIGVUEz/MAQIMADbwyp/CzqoigAAAABJRU5ErkJggg=="},pOUR:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhDRDcyQTY3RTE2RTExRThCRTI2OUUxNDM4MTM1RjMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhDRDcyQTY4RTE2RTExRThCRTI2OUUxNDM4MTM1RjMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OENENzJBNjVFMTZFMTFFOEJFMjY5RTE0MzgxMzVGMzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OENENzJBNjZFMTZFMTFFOEJFMjY5RTE0MzgxMzVGMzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6YLrWcAAAAYklEQVR42mL8//8/AzUBEwOVwaiBg9BAlrNnz9LEhZ5A/AyKPdHUkCTHeObMGQaogCRU0XMglkLSRJIctjBkxOMjgnIwA1OA+AUQPwXiZDSFJMnBvEw1wDhaOIwaSDoACDAAtBYiKbAuMEoAAAAASUVORK5CYII="},pTlS:function(t,e,i){},pjUd:function(t,e,i){},ppJE:function(t,e,i){"use strict";var a=i("vG5h"),s=i("Ew9n"),n=i("F03V"),l=i("UEWd"),o=i("QJC7"),c=i("8KPp"),r=i("gd5k"),d=i("aQg/"),u=i("y9lt"),m=i("i68b"),h={name:"CustomerFollow",components:{MixAdd:l.a,RecordLog:o.a,JournalLog:c.a,ExamineLog:r.a,TaskLog:d.a,ScheduleLog:u.a},mixins:[m.a],props:{id:[String,Number],crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1}},data:function(){return{sendLoading:!1,nextTime:"",isEvent:!1,logType:"record"}},computed:{logTypes:function(){return this.oa?[{type:"record",name:"跟进记录"},{type:"log",name:"日志"},{type:"examine",name:"审批"},{type:"task",name:"任务"},{type:"schedule",name:"日程"}]:[{type:"record",name:"跟进记录"}]},componentsName:function(){return"record"==this.logType?"RecordLog":"log"==this.logType?"JournalLog":"examine"==this.logType?"ExamineLog":"task"==this.logType?"TaskLog":"schedule"==this.logType?"ScheduleLog":""}},watch:{id:function(t){}},mounted:function(){},activated:function(){},deactivated:function(){},methods:{handleTypeDrop:function(t){this.followType=t},logTabsClick:function(t,e){this.logType=t.type},sendInfo:function(){this.$refs.mixadd.$emit("submit-info")},submitInfo:function(t){var e=this;if(!this.isEvent||this.nextTime)if(t.content){var i={};i.typesId=this.id,i.content=t.content,i.category=this.followType;var s=t.business.map(function(t,e,i){return t.businessId}),n=t.contacts.map(function(t,e,i){return t.contactsId});i.batchId=t.batchId,i.businessIds=s.join(","),i.contactsIds=n.join(","),i.isEvent=this.isEvent?1:0,i.nextTime=this.nextTime||"",this.sendLoading=!0,Object(a.w)(i).then(function(t){e.sendLoading=!1,e.$message.success("发布成功"),e.$refs.mixadd.resetInfo(),e.isEvent=!1,e.nextTime="",e.$bus.emit("follow-log-refresh",{type:"record-log"})}).catch(function(){e.sendLoading=!1})}else this.$message.error("请输入跟进内容");else this.$message.error("请选择下次联系时间")}}},p=(i("KA8I"),i("ZrdR")),v=Object(p.a)(h,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"f-container"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.sendLoading,expression:"sendLoading"}]},[i("mix-add",{ref:"mixadd",attrs:{"crm-type":t.crmType,id:t.id,"show-relative-business":!0,"show-relative-contacts":!0},on:{"mixadd-info":t.submitInfo}}),t._v(" "),i("flexbox",{staticClass:"se-section"},[i("div",{staticClass:"se-name"},[t._v("记录类型")]),t._v(" "),i("el-dropdown",{staticStyle:{"margin-right":"20px"},attrs:{trigger:"click"},on:{command:t.handleTypeDrop}},[i("flexbox",{staticClass:"se-select"},[i("div",{staticClass:"se-select-name"},[t._v(t._s(t.followType?t.followType:"请选择"))]),t._v(" "),i("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"#ccc"}})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.followTypes,function(e,a){return i("el-dropdown-item",{key:a,attrs:{command:e.type}},[t._v(t._s(e.name))])}))],1),t._v(" "),i("div",{staticClass:"se-name"},[t._v("下次联系时间")]),t._v(" "),i("el-date-picker",{staticClass:"se-datepicker",attrs:{"default-value":new Date,editable:!1,type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.nextTime,callback:function(e){t.nextTime=e},expression:"nextTime"}}),t._v(" "),t.showOAPermission?i("el-checkbox",{model:{value:t.isEvent,callback:function(e){t.isEvent=e},expression:"isEvent"}},[t._v("添加到日程提醒")]):t._e(),t._v(" "),i("el-button",{staticClass:"se-send",attrs:{type:"primary"},nativeOn:{click:function(e){return t.sendInfo(e)}}},[t._v("发布")])],1)],1),t._v(" "),i("div",{staticClass:"log-cont"},[i("flexbox",{staticStyle:{"border-bottom":"1px solid #E6E6E6"}},t._l(t.logTypes,function(e,a){return i("flexbox",{key:a,staticStyle:{width:"auto"},nativeOn:{click:function(i){t.logTabsClick(e,a)}}},[i("div",{staticClass:"log-tabs-item",style:{color:t.logType==e.type?"#F18C70":"#777"}},[t._v(t._s(e.name))]),t._v(" "),t.logTypes.length-1!=a?i("div",{staticClass:"log-tabs-line"}):t._e()])})),t._v(" "),i("keep-alive",[i(t.componentsName,{tag:"component",attrs:{id:t.id,"crm-type":t.crmType}})],1)],1)])},[],!1,null,"2b6a872c",null);v.options.__file="CustomerFollow.vue";var f=v.exports,g=i("U05J"),b=i("/U9q"),y=i("5j45"),k=i("cYid"),w=i("+NTD"),C=i("C+sD"),I=i("8DbX"),A=i("DUlf"),x=i("EgJF"),D=i("4+0Q"),T={name:"CustomerDetail",components:{SlideView:s.a,CustomerFollow:f,CRMDetailHead:n.a,CRMBaseInfo:g.a,RelativeContacts:b.a,RelativeBusiness:y.a,RelativeContract:k.a,RelativeReturnMoney:w.a,RelativeFiles:C.a,RelativeHandle:I.a,RelativeTeam:A.a,CRMCreateView:x.default},mixins:[D.a],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body"]}}},data:function(){return{loading:!1,crmType:"customer",detailData:{},headDetails:[{title:"客户级别",value:""},{title:"成交状态",value:""},{title:"负责人",value:""},{title:"更新时间",value:""}],tabCurrentName:"followlog",isCreate:!1}},computed:{tabName:function(){return"followlog"==this.tabCurrentName?"customer-follow":"basicinfo"==this.tabCurrentName?"c-r-m-base-info":"contacts"==this.tabCurrentName?"relative-contacts":"team"==this.tabCurrentName?"relative-team":"business"==this.tabCurrentName?"relative-business":"contract"==this.tabCurrentName?"relative-contract":"returnedmoney"==this.tabCurrentName?"relative-return-money":"file"==this.tabCurrentName?"relative-files":"operationlog"==this.tabCurrentName?"relative-handle":""},tabnames:function(){var t=[];return t.push({label:"跟进记录",name:"followlog"}),this.crm.customer&&this.crm.customer.read&&t.push({label:"基本信息",name:"basicinfo"}),this.crm.contacts&&this.crm.contacts.index&&t.push({label:"联系人",name:"contacts"}),t.push({label:"相关团队",name:"team"}),this.crm.business&&this.crm.business.index&&t.push({label:"商机",name:"business"}),this.crm.contract&&this.crm.contract.index&&t.push({label:"合同",name:"contract"}),this.crm.receivables&&this.crm.receivables.index&&t.push({label:"回款信息",name:"returnedmoney"}),t.push({label:"附件",name:"file"}),t.push({label:"操作记录",name:"operationlog"}),t},isSeasDetail:function(){return this.detailData&&this.detailData.hasOwnProperty("isPool")?1==this.detailData.isPool:this.isSeas}},mounted:function(){},methods:{getDetial:function(){var t=this;this.loading=!0,Object(a.t)({customerId:this.id}).then(function(e){t.loading=!1,t.detailData=e.data,t.headDetails[0].value=e.data.客户级别,t.headDetails[1].value=1==e.data.dealStatus?"已成交":"未成交",t.headDetails[2].value=e.data.ownerUserName,t.headDetails[3].value=e.data.updateTime}).catch(function(){t.loading=!1})},hideView:function(){this.$emit("hide-view")},handleClick:function(t,e){},editSaveSuccess:function(){this.$emit("handle",{type:"save-success"}),this.getDetial()}}},R=(i("tkDC"),Object(p.a)(T,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("slide-view",{directives:[{name:"empty",rawName:"v-empty",value:!t.canShowDetail,expression:"!canShowDetail"}],attrs:{"listener-ids":t.listenerIDs,"no-listener-ids":t.noListenerIDs,"no-listener-class":t.noListenerClass,"body-style":{padding:0,height:"100%"},"xs-empty-icon":"nopermission","xs-empty-text":"暂无权限"},on:{"side-close":t.hideView}},[t.canShowDetail?i("flexbox",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"d-container",attrs:{direction:"column",align:"stretch"}},[i("c-r-m-detail-head",{attrs:{"is-seas":t.isSeasDetail,detail:t.detailData,"head-details":t.headDetails,id:t.id,"crm-type":"customer"},on:{handle:t.detailHeadHandle,close:t.hideView}}),t._v(" "),i("div",{staticClass:"tabs"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.tabCurrentName,callback:function(e){t.tabCurrentName=e},expression:"tabCurrentName"}},t._l(t.tabnames,function(t,e){return i("el-tab-pane",{key:e,attrs:{label:t.label,name:t.name}})}))],1),t._v(" "),i("div",{staticClass:"t-loading-content",attrs:{id:"follow-log-content"}},[i("keep-alive",[i(t.tabName,{tag:"component",attrs:{detail:t.detailData,id:t.id,"is-seas":t.isSeasDetail,"crm-type":"customer"}})],1)],1)],1):t._e(),t._v(" "),t.isCreate?i("c-r-m-create-view",{attrs:{action:{type:"update",id:t.id,batchId:t.detailData.batchId},"crm-type":"customer"},on:{"save-success":t.editSaveSuccess,"hiden-view":function(e){t.isCreate=!1}}}):t._e()],1)},[],!1,null,"3c3ad3cf",null));R.options.__file="CustomerDetail.vue";e.a=R.exports},qYzP:function(t,e,i){"use strict";var a=i("IDsd");i.n(a).a},qjqF:function(t,e,i){"use strict";var a=i("MKFU");i.n(a).a},qrtF:function(t,e,i){"use strict";var a=i("xa3M");i.n(a).a},"rFS/":function(t,e,i){"use strict";var a=i("6mJg");i.n(a).a},rJFE:function(t,e,i){"use strict";var a=i("Krvl");i.n(a).a},rOmD:function(t,e,i){},rOqc:function(t,e,i){"use strict";var a=i("vnN1");i.n(a).a},rl4O:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjUzM0EzN0E0RTA5QjExRTg4MTZEOEM2ODYxNjE5QjM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjUzM0EzN0E1RTA5QjExRTg4MTZEOEM2ODYxNjE5QjM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTMzQTM3QTJFMDlCMTFFODgxNkQ4QzY4NjE2MTlCMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTMzQTM3QTNFMDlCMTFFODgxNkQ4QzY4NjE2MTlCMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7neeY0AAABL0lEQVR42syUv0tCURSA1Vzam5ya+h8ag5DG3GpqqsAiwVFoECJc+jGpCFZrLTpFUjQ7PPwjClxyiCY3+y6cB5fLud0rOXjhG965j++de865L5skSWaRK5dZ8JpHmIUG/MAA1v4jNLIWVKAO6/CmSWOFO3AAJbiCLVjVpLHCV9iAF3ke+6S5wDFr8Az78Ons29LHkNDImnAO3/AAZeU9I+3AZhrI/9EAU7Nd6egIbuEJJk5tL2RPzVCTpfGZ0qieZF/TMvTJzmT+TqzsbFnZ/pidYUORHcKNzF87JHMzPJXUB1ZsBY6gGyNzhUM4lhEYS6ztqZkqc4+8B1N4h4LSgH5I5gq/YFuRprL7kEwbm4kjrYrsLkbmuymp9AMu4VpGZhZz6fOeuJEWl+KP/SvAAHR5UyjSji44AAAAAElFTkSuQmCC"},rvIm:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzMTVBQTA1MTMyMjExRTlCOTI2OTkyMkUzMkRFN0M0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzMTVBQTA2MTMyMjExRTlCOTI2OTkyMkUzMkRFN0M0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTMxNUFBMDMxMzIyMTFFOUI5MjY5OTIyRTMyREU3QzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTMxNUFBMDQxMzIyMTFFOUI5MjY5OTIyRTMyREU3QzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5yK5e/AAABvElEQVR42syUz0sCQRTHZy0qfxwCcXchugh16igSgSf9E7JD0Kk6BEJGEF2C6tChDmFEeKhTEMRevYWHECpEb9ElEDq1rhgdRNcKt++zWQljVy0PPfjAezNv3sx7b2YEwzBYP8XB+iyDpqIoyp8CRaNR2xMOgQQogxdwzDHtBPexPmGb7IMJMMXtmxFIJBJ5JyOdTs/UarVdqJvd1nABLIJnzmgoFBKdTqdEhMPhcYwt97MpQq9dPgenQAZj4DWTyWhIU6tWqypSfuLzXddwAxyAB25f6LrOUqnUPLdvwVYvAd/AKue7xH5zsefAPfgAhtfrNTwejyEIAj2pJqRjTPf7/YedTjjLU10C11iwp6rqeiAQYD6fjzkcX/s3Gg1WKpWGc7lcHD6sUCisWZ1wm1+XK0pb07QYBZMkqRWsuQg6jQWDQQafFbuU6TLfmQY6OoyULetFc+RjF/ARTJuGy+Wql8tly4A0Rz52AXfAGYjQWxVF8QR1YsVisVk3U0insWw2y+CTtGuKwjc5ApMo9gCllc/nKTVm/p3oMnO73XVZlpPwiXe6h5ecVlrtQoErlUqTH2/y3//YnwIMAF6wpWKaA/vwAAAAAElFTkSuQmCC"},"sx/1":function(t,e,i){"use strict";var a=i("vMuj");i.n(a).a},tAkc:function(t,e,i){},tCAo:function(t,e,i){},tJsa:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNFOEMzQ0E1MzRGRDExRTk5MTg4QzUyQTg2MENBNDYwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjNFOEMzQ0E2MzRGRDExRTk5MTg4QzUyQTg2MENBNDYwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0U4QzNDQTMzNEZEMTFFOTkxODhDNTJBODYwQ0E0NjAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0U4QzNDQTQzNEZEMTFFOTkxODhDNTJBODYwQ0E0NjAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz519vCiAAACpUlEQVR42mIMvjydjYGBoRuIY4BYiGFwgfdAvBiIS1mARBcQ5zEMTiAIddt3JiARyzD4QSrTIIxubECIiWGIgFGHjjp0sAMWUjVwMrEyBIsaMdgLqjMIsnAhSuY/3xgOvr/JsPLVGYbf///iNcOKX5khVMyYQZJNgOH5rw8Mq1+dZTj28S71HCrEws1Qr+jLIM0ugFkyAx0dIGrIoMMjzdD0YAvDt7+/sJphyafEUCTrCufLsgvB+fgcS3TUMzEyMpTJu6M4EhRyX//+RAlBFU4xhhRJG5zmhImbYBUHhTBVQtSWXxXsCBhY8eo0w/rX5xn+/v/HwMzIxBAIDM0IMVOIWgE1hg1vLjA8+vEOwxxQdGMDuMRJDlEnQQ04+/TnBwxrgOkK5EgQANEgPkgcBBiB2AboMWwAlCZJESfZoUqcInD2treXsarZ/vYKnC3Hgb1mXgX0EDawBoc4yQ7lZGKDs299e4lVDbK4Ca88VjXHgRmm//FuFDEQ/yiBXE9WOfrz3x+s4j/+/SZKP7qjCDlytGYadeioQ0cdOupQOjkU1H7Exx8UDkVvP4IAiE+MY0GNbELVMdUcSmr78fs/RINZj0cGqxoDXlms6ilyKKntx3vf38DZoC4LCyOqFSB+CFAcBu5+f00dh5Laftz3/gZS01CUoRCYTIRZucF8EA3iy3MIw9XsB/azqNK5A7Ufi9HSKL7245GPdxg8hXXgvQFzPkUwxgbufH8FVk+VEIW1H5/8fA9uyYNofO1HkJquhzsZnv3E32IHyYPUwXoJhABj8OXp/2lRnIByfAgww1nzqzCIsPLAxd/8/gL05B1wjHwnsv1KU4eO1kyjDh116CB26Lsh4M53IIcuHgIOnQOqQssYIMNFoGkcwUHmQNiEWC1AgAEAJfLokjgxLf8AAAAASUVORK5CYII="},tkDC:function(t,e,i){"use strict";var a=i("rOmD");i.n(a).a},tmLs:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRFNkQ3MjgzMzRGRDExRTk5MTFFQzBCMDM1Qjc5MTkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjRFNkQ3Mjg0MzRGRDExRTk5MTFFQzBCMDM1Qjc5MTkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEU2RDcyODEzNEZEMTFFOTkxMUVDMEIwMzVCNzkxOTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEU2RDcyODIzNEZEMTFFOTkxMUVDMEIwMzVCNzkxOTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5eE1nZAAABtElEQVR42mL8v0SUjYGBoRuIY4BYiGFwgfdAvBiIS1mARBcQ5zEMTiAIddt3RmCIvh2EIYkO3jENAUeCgBATwxABow4ddehgByxEqZJyZmCwmMDAwCmOW81PYCl3qpyB4dEmCF/Oj4HBrJOBgV0Yt57vLxkYThQwMDzbS9AJoHL0P0FVQZfxOxIGfn9hYFijDmGH3GBgYOUlrAfk2HW6VApRYhwJAqw8DAzMnFA2LwM1zR7NTKMOHXXoqEOxFubviDPt7w8E/vOdgZpmE+fQU6WQwhwfADnsNLBm+vcLgs9UEHYsyEyQ2UQA4momsJdYgdUDNx6HfoM4EEUPsDvGwoVHz1egnt9UrOtB4P9/0hMWyOG/ftGxUSLnC2yUTIRUkfiiHhTdd5fTJDMRF/WgBgY7EV0rkGNXqyKSQPQrwnqWilExRNmJ7P+xABskzBwIhxLpiNECf/C28MkFdE+j5ILRNDrk0yioA0Zs5+7v9wFMoycKod1lPIb+eA1slFSi1t1UTKPEN0pG0+ioQ0cdOnwc+m4IuBM82bB4CDh0DqjALwOVp0AcywCZ1xlMADYhVgsQYADt535zhgHQ0QAAAABJRU5ErkJggg=="},tmjI:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhDMDAwRUQ4RjEzRTExRTg4RjEzQzU1RjdGQUE4OEM5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhDMDAwRUQ5RjEzRTExRTg4RjEzQzU1RjdGQUE4OEM5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEMwMDBFRDZGMTNFMTFFODhGMTNDNTVGN0ZBQTg4QzkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEMwMDBFRDdGMTNFMTFFODhGMTNDNTVGN0ZBQTg4QzkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6C+HipAAABzUlEQVR42qzVP0hbURTH8aRNhkqROujgoCK1KCjdtAqSQVBQcPAviItTHOtkh9Y/k4O0ou2gji0ohlKFOmkLIo2pCg4KGdoGA4IWxL8gKFVfvxd+wzPehCBe+EDy3su555577os3FAp57nM8sFxrQRxnGMcjVONI5lGSbsDnGEUb8pCNfoSRj0IsYEn3zchNFbAGn7GGAwyhHtc4VYZjmEAvKvHNHcCXEDCGdvjxDwFsW1b2Ed+19OFUAb/ipR5eRg8qLAH/YBcZ+JRsyV68w1NE8BcbmEaBJahZ7gtcJgv4SptSrPp80O6+x5ye9auuv/ETtYmzuJfcpZY5S3hmEt3KqA7laFLWU6jCL1tA0xI7yLIsL6a2aUQQWzKDhmQBw/qhbVzgrepqSrKKhyjV5lmXHEjjZL1W32WqZ01Nv9g2xaciR1IEMydiBPvIwQmeaZJbGXbgHEUqdjwhmGmpWSyiTyfHo6O5qJ6ccGdo2mRAB7/Tkp3Zycd44wrmUbZBHYAbGbYiql1e0WeTkaP7Zoc3Xd/dY10ru1HDqKs9mjGIQzGbtacedSyu3CXyWWb8gTI80YSHuu5P5wXrS3Hv+C5vbK/jOPf6F/BfgAEABMhsyXqORiYAAAAASUVORK5CYII="},"uH+S":function(t,e,i){t.exports=i("cviI")},uMjE:function(t,e,i){"use strict";i.r(e);var a=i("7Qib"),s=i("mqlf"),n=i("ppJE"),l=i("PS1M"),o=i("n1dw"),c=i("xfX+"),r=i("8gwX"),d=i("K6D0"),u=i("7z+D"),m={name:"CRMFullScreenDetail",components:{ClueDetail:s.a,CustomerDetail:n.a,ContactsDetail:l.a,BusinessDetail:o.a,ContractDetail:c.a,ProductDetail:r.a,MoneyDetail:d.a,ExamineDetail:u.a},props:{id:[String,Number],crmType:{type:String,default:""},visible:{type:Boolean,default:!1}},data:function(){return{showDetail:!1}},computed:{tabName:function(){return"leads"==this.crmType?"clue-detail":"customer"==this.crmType?"customer-detail":"contacts"==this.crmType?"contacts-detail":"business"==this.crmType?"business-detail":"contract"==this.crmType?"contract-detail":"product"==this.crmType?"product-detail":"receivables"==this.crmType?"money-detail":"examine"==this.crmType?"examine-detail":""}},watch:{visible:function(t){this.showDetail=t,t&&(document.body.appendChild(this.$el),this.$el.addEventListener("click",this.handleDocumentClick,!1),this.$el.style.zIndex=Object(a.h)())},showDetail:function(t){var e=this;t||setTimeout(function(){e.$emit("update:visible",!1)},350)}},mounted:function(){this.visible&&(document.body.appendChild(this.$el),this.$el.addEventListener("click",this.handleDocumentClick,!1),this.$el.style.zIndex=Object(a.h)())},beforeDestroy:function(){this.$el&&this.$el.parentNode&&(this.$el.parentNode.removeChild(this.$el),this.$el.removeEventListener("click",this.handleDocumentClick,!1))},methods:{hiddenView:function(){this.showDetail=!1},handleDocumentClick:function(t){t.stopPropagation(),this.$el==t.target&&(this.showDetail=!1)},detailHandle:function(t){"alloc"!==t.type&&"get"!==t.type&&"transfer"!==t.type&&"transform"!==t.type&&"delete"!==t.type&&"put_seas"!==t.type||(this.showDetail=!1),this.$emit("handle",t)}}},h=(i("UZZ0"),i("ZrdR")),p=Object(h.a)(m,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"full-container"},[t.id&&t.showDetail?i(t.tabName,{tag:"component",staticClass:"d-view",attrs:{"crm-type":t.crmType,id:t.id},on:{handle:t.detailHandle,"hide-view":t.hiddenView}}):t._e()],1)},[],!1,null,"196e9308",null);p.options.__file="CRMFullScreenDetail.vue";e.default=p.exports},uwnL:function(t,e,i){"use strict";var a=i("/1tH");i.n(a).a},vMuj:function(t,e,i){},vPra:function(t,e,i){"use strict";i.d(e,"c",function(){return s}),i.d(e,"a",function(){return n}),i.d(e,"b",function(){return l});var a=i("t3Un");function s(t){return Object(a.a)({url:"comment/setComment",method:"post",data:t})}function n(t){return Object(a.a)({url:"comment/deleteComment",method:"post",data:t})}function l(t){return Object(a.a)({url:"comment/queryCommentList",method:"post",data:t})}},vYv6:function(t,e,i){"use strict";var a=i("oEu+");i.n(a).a},vc0M:function(t,e,i){"use strict";var a=i("vdle");i.n(a).a},vdle:function(t,e,i){},vnN1:function(t,e,i){},vusS:function(t,e,i){},we71:function(t,e,i){"use strict";var a=i("EhR4");i.n(a).a},woiz:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhGQTE4Q0EzRjM4ODExRThCNjlDOEQxMEUxMzYwREE0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhGQTE4Q0E0RjM4ODExRThCNjlDOEQxMEUxMzYwREE0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEZBMThDQTFGMzg4MTFFOEI2OUM4RDEwRTEzNjBEQTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEZBMThDQTJGMzg4MTFFOEI2OUM4RDEwRTEzNjBEQTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4R34ZtAAABfUlEQVR42pzUPUsDQRDG8eTQVBZiQhqxU6KoWKiFhaAQ21gqQcXGTxDFSsRKBOMXsBGi+NLFlBYighbmClGLgFZiE1+wECGd/4HnZDmSIA78uNzN7LC3t5touVyOhKINS5jGIDrwgTsUsYsvd4AXapBFBaPIoxdRXfN6XlHdb7Q4v9exgAz8UPNXlGQYJ+jBhtskqwZjqEaah6+6azxh39MabGPmDw2CqKp+B+3WZBHnCFb4UuqFm7P6M8x5WoNCqDjaZBZuzsZlbE36nVlYjDdpEM7dYsBmksBb5H/xjrinHwknUUOswaCY8kHEbbw1uceIk3jWHqgX9vzFuR/CgzU5xbyTONTGqxdroY9g44rWZA+Tzmw20Ykj9KFVV7vvwpbqrH4q2Gx2mFZUlMQ30jojJeVLuk8rn1R9Dp/Btj9AN660E329Ur3XsrNzrNcqhA+gHaZHrdGF1sbX549r+rOYwKq9RqO/AptRCjdY1n9ITV8wp02ZchtY/AgwAM3YV79CKIEGAAAAAElFTkSuQmCC"},"x/Kp":function(t,e,i){},xEAD:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBEQUU3MTJEMzRGRDExRTk5QjY1REM2OUMzNzkwQTYzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjBEQUU3MTJFMzRGRDExRTk5QjY1REM2OUMzNzkwQTYzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MERBRTcxMkIzNEZEMTFFOTlCNjVEQzY5QzM3OTBBNjMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MERBRTcxMkMzNEZEMTFFOTlCNjVEQzY5QzM3OTBBNjMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6NwytQAAACmklEQVR42mJ0O3uejYGBoRuIY4BYiGFwgfdAvBiIS1mARBcQ5zEMTiAIddt3JiARyzD4QSrTIIxubECIiWGIgFGHjjp0sAMWig1gZGRQ4ORgkGJnZ7AS4GeQZQex2Riuff3GMPPJU4ZHP34MvENFWFkZ+tVVGcTY2DDkTPh4GQw11Rnuff/O8P73H4Z5z54z3AeyB8ShcVKSWB0JA8zA0Fbl4gKz/zL8Z2i4e39g0qgeDzfRakFJYsAyExczM9Fq+ViYB86hoIxELGAmQS3VHfqfBLV//v8fGIe6CgsxcDARrx2k1pKfn/4OdRESIinq2YEO9REVpr9Df/37R7IediYm+jv0wpcvJKn/9vcvw4ZXb+hf4K99+Yrhz7//DFmy0kRlutLbdxjufPs+MLl+85s3DBc+Ew7ZnW/fUuRIih36D1jk1N69x3Dq4yecai4Bk8i0x08HvpkHylRnP3/GKb/77TuGn2RkPKo7FFTjGPLy4pRX4uQcuGaeAAsLgzawQaLDw8Ngxs/HIANsi+ICgWKiDBrcXAynP31muPblK8P1r18ZfpARwiQ5VBDY/kyXlmKwFRTAWdgX37oNpnvVVOFimtzcYAwrpja/fsOw5MVLkspioh2Kr5EMAy9//WK4Agw1GFsci1pQiytcQhwYIzwM5cAii9g2AFFpFBR6NUoKeB0JApeRKoGLBIotHWDSKZCTpW5mAoUALOrwAWTHXSKi5gI1bGwFBKjnUFD/hxiA4tDPxFWxoPROtTQqSSDK4RlJXo5h0fPn4CIrRlKCKD2KnBzUcyixrR59Xh6GXl5VkoodUVY26jk08OLl0ZGSUYeOOnQ4OfTdEHDnO5BDFw8Bh84BlaNlQAxqs4GmcQQHmQNhE2K1AAEGABocsmFDyAFeAAAAAElFTkSuQmCC"},xJIx:function(t,e,i){"use strict";var a=i("tAkc");i.n(a).a},xXWd:function(t,e,i){},xa3M:function(t,e,i){},xcVl:function(t,e,i){"use strict";var a=i("UNCs");i.n(a).a},y9lt:function(t,e,i){"use strict";var a=i("rerW"),s=i.n(a),n=i("KzkL"),l={name:"FollowScheduleCell",components:{},filters:{getRemindtypeText:function(t){switch(t){case 0:return"无";case 1:return"准时提醒";case 2:return"5分钟前";case 3:return"15分钟前";case 4:return"30分钟前";case 5:return"一个小时前";case 6:return"二个小时前";case 7:return"一天前";case 8:return"二天前";case 9:return"一周前"}return""}},props:{data:Object},data:function(){return{}},computed:{},mounted:function(){},methods:{checkRelatedDetail:function(t,e){this.$emit("on-handle",{type:"related-detail",data:{type:t,item:e}})},handleCommand:function(t){this.$emit("on-handle",{type:t,data:{item:this.data}})}}},o=(i("heiR"),i("ZrdR")),c=Object(o.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fl-c"},[a("flexbox",{staticClass:"fl-h"},[a("div",{directives:[{name:"photo",rawName:"v-photo",value:t.data.createUser,expression:"data.createUser"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.data.createUser.img),expression:"$options.filters.filterUserLazyImg(data.createUser.img)",arg:"background-image"}],staticClass:"div-photo fl-h-img"}),t._v(" "),a("div",{staticClass:"fl-h-b"},[a("div",{staticClass:"fl-h-name"},[t._v(t._s(t.data.createUser.realname))]),t._v(" "),a("div",{staticClass:"fl-h-time"},[t._v(t._s(t.data.createTime))])]),t._v(" "),!t.data.permission||1!=t.data.permission.isUpdate&&1!=t.data.permission.isDelete?t._e():a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("i",{staticClass:"el-icon-arrow-down el-icon-more",staticStyle:{color:"#CDCDCD"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.data.permission&&1==t.data.permission.isUpdate?a("el-dropdown-item",{attrs:{command:"edit"}},[t._v("编辑")]):t._e(),t._v(" "),t.data.permission&&1==t.data.permission.isDelete?a("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")]):t._e()],1)],1)],1),t._v(" "),a("div",{staticClass:"fl-b"},[a("div",[a("div",{staticClass:"state-color",style:{"background-color":t.data.color?t.data.color:"#fff"}}),t._v(t._s(t.data.title)+"\n    ")]),t._v(" "),a("div",{staticClass:"fl-b-des"},[a("flexbox",{staticClass:"fl-b-des-item"},[a("div",{staticClass:"fl-b-des-item-name"},[t._v("参与人：")]),t._v(" "),a("div",{staticClass:"owner-list"},t._l(t.data.ownerList,function(e,i){return a("span",{key:i},[a("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(e.realname))])]),t._v(" "),a("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"k"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.img),expression:"$options.filters.filterUserLazyImg(k.img)",arg:"background-image"}],key:e.img,staticClass:"div-photo header-circle"})])],1)}))]),t._v(" "),a("flexbox",{staticClass:"fl-b-des-item"},[a("div",{staticClass:"fl-b-des-item-name"},[t._v("开始时间：")]),t._v(" "),a("div",[t._v(t._s(t.data.startTime))])]),t._v(" "),a("flexbox",{staticClass:"fl-b-des-item"},[a("div",{staticClass:"fl-b-des-item-name"},[t._v("结束时间：")]),t._v(" "),a("div",[t._v(t._s(t.data.endTime))])]),t._v(" "),a("flexbox",{staticClass:"fl-b-des-item"},[a("div",{staticClass:"fl-b-des-item-name"},[t._v("备注：")]),t._v(" "),a("div",[t._v(t._s(t.data.remark))])])],1),t._v(" "),t.data.contactsList.length>0||t.data.customerList.length>0||t.data.businessList.length>0||t.data.contractList.length>0?a("div",{staticClass:"related-business"},[a("div",{staticClass:"label"},[t._v("关联业务")]),t._v(" "),t._l(t.data.contactsList,function(e,s){return a("p",{key:"contacts"+s,on:{click:function(i){t.checkRelatedDetail("contacts",e)}}},[a("img",{attrs:{src:i("AFlK"),alt:""}}),t._v("\n        联系人-"+t._s(e.name)+"\n      ")])}),t._v(" "),t._l(t.data.customerList,function(e,s){return a("p",{key:"customer"+s,on:{click:function(i){t.checkRelatedDetail("customer",e)}}},[a("img",{attrs:{src:i("AFlK"),alt:""}}),t._v("\n        客户-"+t._s(e.customerName)+"\n      ")])}),t._v(" "),t._l(t.data.businessList,function(e,s){return a("p",{key:"business"+s,on:{click:function(i){t.checkRelatedDetail("business",e)}}},[a("img",{attrs:{src:i("AFlK"),alt:""}}),t._v("\n        商机-"+t._s(e.businessName)+"\n      ")])}),t._v(" "),t._l(t.data.contractList,function(e,s){return a("p",{key:"contract"+s,on:{click:function(i){t.checkRelatedDetail("contract",e)}}},[a("img",{attrs:{src:i("AFlK"),alt:""}}),t._v("\n        合同-"+t._s(e.name)+"\n      ")])})],2):t._e()])],1)},[],!1,null,"3ec50ac6",null);c.options.__file="FollowScheduleCell.vue";var r=c.exports,d=i("Dh/N"),u={name:"ScheduleLog",components:{FollowScheduleCell:r,CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-3043"),i.e("chunk-7fee")]).then(i.bind(null,"uMjE"))},CreateSchedule:i("BuGm").default},props:{id:[String,Number],crmType:{type:String,default:""}},data:function(){return{loading:!1,loadMoreLoading:!0,isPost:!1,page:1,list:[],showFullDetail:!1,detailCRMType:"",rowID:"",showDialog:!1,formData:{checkList:[]},newtext:""}},computed:{},watch:{id:function(t){this.refreshList()}},mounted:function(){var t=this,e=document.getElementById("follow-log-content");e.onscroll=function(){var i=e.scrollTop+e.clientHeight-e.scrollHeight;Math.abs(i)<10&&1==t.loadMoreLoading&&(t.isPost?t.loadMoreLoading=!1:(t.isPost=!0,t.page++,t.getList()))},this.getList()},activated:function(){},deactivated:function(){},methods:{getList:function(){var t=this;this.loading=!0;var e={page:this.page,limit:10};e[this.crmType+"Ids"]=this.id,Object(n.j)(e).then(function(e){t.list=t.list.concat(e.data.list),e.data.list.length<10?t.loadMoreLoading=!1:t.loadMoreLoading=!0,t.loading=!1,t.isPost=!1}).catch(function(){t.isPost=!1,t.loading=!1})},refreshList:function(){this.page=1,this.list=[],this.getList()},examineCellHandle:function(t){var e=this;if("edit"==t.type){this.newText="编辑日程";var i=t.data.item;i.startTime=i.startTime,i.endTime=i.endTime,i.ownerUserIds=[];var a=!0,n=!1,l=void 0;try{for(var o,c=s()(i.ownerList);!(a=(o=c.next()).done);a=!0){var r=o.value;i.ownerUserIds.push(r.userId)}}catch(t){n=!0,l=t}finally{try{!a&&c.return&&c.return()}finally{if(n)throw l}}this.formData=i,this.showDialog=!0}else"delete"==t.type?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.b)({eventId:t.data.item.eventId}).then(function(t){e.refreshList(),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):"related-detail"==t.type&&(this.rowID=t.data.item[t.data.type+"Id"],this.detailCRMType=t.data.type,this.showFullDetail=!0)},onSubmit:function(t,e){this.refreshList(),"创建日程"==this.newText?(this.$message.success("新建成功"),this.showDialog=!1):(this.$message.success("编辑成功"),this.showDialog=!1)}}},m=(i("eLCz"),Object(o.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{directives:[{name:"empty",rawName:"v-empty",value:0===t.list.length,expression:"list.length === 0"}]},[i("div",{staticClass:"log-items"},[t._l(t.list,function(e,a){return i("follow-schedule-cell",{key:a,attrs:{data:e},on:{"on-handle":t.examineCellHandle}})}),t._v(" "),i("div",{staticClass:"load"},[i("el-button",{attrs:{loading:t.loadMoreLoading,type:"text"}},[t._v(t._s(t.loadMoreLoading?"加载更多":"没有更多了"))])],1)],2)]),t._v(" "),i("c-r-m-full-screen-detail",{attrs:{visible:t.showFullDetail,"crm-type":t.detailCRMType,id:t.rowID},on:{"update:visible":function(e){t.showFullDetail=e}}}),t._v(" "),t.showDialog?i("create-schedule",{attrs:{text:t.newText,"form-data":t.formData,"append-to-body":!0},on:{onSubmit:t.onSubmit,closeDialog:function(e){t.showDialog=!1}}}):t._e()],1)},[],!1,null,"8e6400d2",null));m.options.__file="ScheduleLog.vue";e.a=m.exports},"yN8+":function(t,e,i){"use strict";var a=i("0SZQ");i.n(a).a},yTN1:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI5QzFBRDNCRjEzRTExRThBQUYwQzQ0NUY4RjA0MDAyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI5QzFBRDNDRjEzRTExRThBQUYwQzQ0NUY4RjA0MDAyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjlDMUFEMzlGMTNFMTFFOEFBRjBDNDQ1RjhGMDQwMDIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjlDMUFEM0FGMTNFMTFFOEFBRjBDNDQ1RjhGMDQwMDIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7bSUhMAAABS0lEQVR42qyUsUoDQRRFs4tNsFTU2h8QQQQtVPwCm0UtBNF8gEW+QhSCtaCQwsg2GrBU0EIhWMRaYikopovaZT0jN7As8zCL++DszL65c9nZeTNBkiSlImPEPeI4/rdRFEW/bWiMu/wmNOEdErVN5a153oFpaMEhtGUwq7atfEs6/5IzZg9wBSvQy4xfwz4cSbcAL9YXuv45XMKOx2wQPY1fSB9ahhswBXtD7oPTTWqe13ALTuArlcvWVPr9G041z2s4B7c5q+UOZizDcZVGnniDMcvwAyZyGrp/2LUMH2E5p+ESPFmGddiGcioXZAzS72Xp65ZhQ/+kNuTX1aRvWCelr5q6V78Knx6jUTiANViU1jx6HYncCXiGY7jRhrkqWIUKvErX+essD0znYV0Xwq7Mutq4qpbZH+ZySC//TOSKoOgbOywVHD8CDAB/ikwNecfxXAAAAABJRU5ErkJggg=="},ycXd:function(t,e,i){"use strict";var a=i("Ytqn");i.n(a).a},"z/qj":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVDMjMwOUQ1RTE2RTExRTg4NERCRjlCMjkwMzZFNzUzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVDMjMwOUQ2RTE2RTExRTg4NERCRjlCMjkwMzZFNzUzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUMyMzA5RDNFMTZFMTFFODg0REJGOUIyOTAzNkU3NTMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUMyMzA5RDRFMTZFMTFFODg0REJGOUIyOTAzNkU3NTMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4095VyAAAB90lEQVR42qyUzWrCQBCAJxoFRWJQIyiCF38wAS/x0AcofYBKX6DX0tJze+vBV2gvfYLSq4fSJygIpQdJQRDUUwStPfiDop0JmzTGxKalA6O78/M5uzMut9ls4D8lsMeXQm2gvqHOmb6i3jCfq3AeFdbRfj8cDuOj0Qhms5lhjEQikEgkQJKkT47jTtH06AdYXy6XD51Oh5tOp65VRKNRKBQKm1AodOKEOoES7juapgleMFOo2kqlQpUWcaubdr7VallBqqqe4zF/hJHQNVBsOp2+RMaVW1OKi8Xigu7Mr1As5pxRrhNYRn0Jh8NxP9WZQrGYI1AuY1hAGg/RMAQCvoF4f8B6IDKGBTykj/l8bly2KdlsFnK5HASDQcCOQj6fh1QqtdUYPLK5PdoZ7MlkAslk0trrum6AqtUqKIoC6/UaxuPx9+QjnHLswrPvZ9RjAsiybICoi6vVCrrdrufYiKII7XbbND3ZK7xG/cCBhn6/T0O7dXQ3GMX0ej2gHMplDAuooR6gNmkUBoMBlMvlVSaT2YGRjXwUw47fZLma8w7fUW9pQYEIbgiCsAMkG/lsd3nHcl1fG9W2rlHX3f4hjjh13/NlOXmel81Xxi70I+hT/AJr5gLHJesGJBv5vIC8I94KjMVieqlUkjwaTcOX/s0D+2f5EmAAZdHXd76EF8kAAAAASUVORK5CYII="},zKg5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMxQ0RDQTA2MzRGRDExRTk4NzFGOUQwNDA1NUZDRDlDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMxQ0RDQTA3MzRGRDExRTk4NzFGOUQwNDA1NUZDRDlDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzFDRENBMDQzNEZEMTFFOTg3MUY5RDA0MDU1RkNEOUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzFDRENBMDUzNEZEMTFFOTg3MUY5RDA0MDU1RkNEOUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4lJ/0IAAABt0lEQVR42uyZMU/CQBTHH0dDNDYhMBnQmOiXcHA0xsVvoKOrm0w66SIuLm5ufAUHB6LfwIRonIAKQlRUCFACXK89X41shrTQo1fTf/Ju6V3vl3f9313vImcn3RgAnGPsYiRBLrUwchiHChZZjAOQU4lftj7BYg/k1z6RcLj/UpJAQBSChqAhqEdSnFRaXYvC9s4cqGpk4o4oBbjLUyjcU3Gg00LaiuFCvbkVA3WBwNMjhVbL8h50WsiRotjbYiqKMQ/1GkNgAzptyztQEUovKZBKK1CrMngoUOj3ubxmiuBALa8osL4xFwzXx+NEzNBnT/WxzzNHqqv3vb2yYGRUKzExGXWbsXHq6Rwa76b8GdXKBnAu+RJq4RT6rDFHdYWYyelnYk/6wwF39B4iu4l8N1O3Y8FHw3Rcn/hnIuaqvi+gJiayorkD9cVM9ReG+1Muf0bLJea6zczN1Mb959en6brdzDOqFdlE7WYOWq0IBNV17gkkHQIYBhcHenM9+NnlTCOGibzND8X+LpeLJlxe9MIDiBA0BP0voM0AcDZt0FwAQK/seTSDYZ+C2dc4CckARxdix98CDABIQZBfwLRdIgAAAABJRU5ErkJggg=="},zyZ9:function(t,e,i){}}]);