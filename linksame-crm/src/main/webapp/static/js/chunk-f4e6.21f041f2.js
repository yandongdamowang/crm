(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f4e6"],{"7jTD":function(t,e,a){},"SP+9":function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"b",function(){return o}),a.d(e,"a",function(){return s}),a.d(e,"e",function(){return r}),a.d(e,"d",function(){return c});var n=a("t3Un");function i(t){return Object(n.a)({url:"pmpContract/queryList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(t){return Object(n.a)({url:"pmpContract/queryById",method:"post",data:t})}function s(t){return Object(n.a)({url:"pmpContract/delete",method:"post",data:t})}function r(t){return Object(n.a)({url:"pmpContractPayment/queryPaymentByMonthly",method:"post",data:t})}function c(t){return Object(n.a)({url:"pmpContract/contractDashboard",method:"post",data:t})}},iM66:function(t,e,a){"use strict";var n=a("7jTD");a.n(n).a},mJia:function(t,e,a){"use strict";a.r(e);var n=a("MT78"),i=a.n(n),o=a("wd/R"),s=a.n(o),r=a("SP+9"),c=a("t3Un");var l={name:"Main",components:{AddProject:a("b06H").a},filters:{},data:function(){return{datetime:["2020-01-01","2020-05-29"],echartXData:[],echartPrepaymentItemData:[],echartPaymentItemData:[],onlineOfflineData:{},onlineOfflineRate:"",headerGrep:{project:"",type:[]},isCreate:!1,contractDashboardData:{},workbenchTableData:[{a:"中核华兴工程有限公司",b:"24",c:"1,284"},{a:"中核华兴工程有限公司",b:"24",c:"1,284"},{a:"中核华兴工程有限公司",b:"24",c:"1,284"}]}},computed:{},watch:{datetime:function(t){this.retriveContractDashboard()}},mounted:function(){this.retriveContractDashboard(),this.retrivePrepaymentReport(),this.retrivePaymentReport(),this.retriveOnlineOffline()},methods:{getDate:function(t){var e=parseInt(s()().format("d"));"day"==t?this.datetime=[s()().format("YYYY-MM-DD"),s()().format("YYYY-MM-DD")]:"week"==t?this.datetime=[s()().subtract(e-1,"days").format("YYYY-MM-DD"),s()().add(7-e,"days").format("YYYY-MM-DD")]:"month"==t&&(this.datetime=[s()().add("month",0).format("YYYY-MM")+"-01",s()(s()().add("month",0).format("YYYY-MM")+"-01").add("month",1).add("days",-1).format("YYYY-MM-DD")])},retriveOnlineOffline:function(){var t=this;this.$request("/system/user/onlineOfflineRate",{}).then(function(e){console.log("在线人员",e),t.onlineOfflineData=e.data,t.onlineOfflineRate=(t.onlineOfflineData.onlineNumber/t.onlineOfflineData.headcount).toFixed(2)}).catch(function(t){console.log(t)})},retrivePrepaymentReport:function(){var t=this,e=[],a=[];(function(t){return Object(c.a)({url:"pmpContractPayment/paymentReport",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})})({startTime:this.datetime[0],endTime:this.datetime[1]}).then(function(n){console.log("retrivePrepaymentReport",n),n.dashboard.forEach(function(t,n){e.push(t.paymentNode),a.push(t.money)}),t.echartXData=e,t.echartPrepaymentItemData=a,t.initAxis()}).catch(function(t){console.log(t)})},retrivePaymentReport:function(){var t=this,e=[],a=[];(function(t){return Object(c.a)({url:"pmpContractPaymentRecord/paymentReport",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})})({startTime:this.datetime[0],endTime:this.datetime[1]}).then(function(n){console.log("paymentReport",n),n.dashboard.forEach(function(t,n){e.push(t.paymentTime),a.push(t.practicaAdvanced)}),t.echartXData=e,t.echartPaymentItemData=a,t.initAxis()}).catch(function(t){console.log(t)})},retriveContractDashboard:function(){var t=this;Object(r.d)({startTime:this.datetime[0],endTime:this.datetime[1]}).then(function(e){t.contractDashboardData=e}).catch(function(){})},initAxis:function(){console.log("initAxis",this.echartXData);var t=i.a.init(document.getElementById("axismain")),e={title:{text:"付款金额对比",textStyle:{fontWeight:"normal",fontSize:16}},grid:{top:"80px",left:"10px",bottom:"10px",containLabel:!0,borderColor:"red"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["预付款","付款"],icon:"circle",itemWidth:10,itemHeight:10,itemGap:40},series:[{name:"预付款",type:"line",yAxisIndex:0,color:"#0097F5",data:this.echartPrepaymentItemData},{name:"付款",type:"line",yAxisIndex:0,color:"#52C41A",data:this.echartPaymentItemData}],xAxis:[{type:"category",name:"时间",data:this.echartXData,axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!1}}],yAxis:[{type:"value",name:"金额",data:[],axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD",formatter:"{value} 元"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!1}}]};t.setOption(e,!0),this.axisOption=e,this.axisChart=t}}},d=(a("iM66"),a("KHd+")),p=Object(d.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"ls-header"},[t._v("\n    仪表盘\n    "),a("div",{staticClass:"ls-header-r"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.datetime,callback:function(e){t.datetime=e},expression:"datetime"}})],1),t._v(" "),a("div",{staticClass:"ls-header-r"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.getDate("day")}}},[t._v("今日")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.getDate("week")}}},[t._v("本周")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.getDate("month")}}},[t._v("本月")])],1),t._v(" "),a("div",{staticClass:"ls-header-r"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.isCreate=!0}}},[t._v("新建项目")]),t._v(" "),a("el-select",{attrs:{placeholder:"选择项目"},model:{value:t.headerGrep.project,callback:function(e){t.$set(t.headerGrep,"project",e)},expression:"headerGrep.project"}},[a("el-option",{attrs:{label:"项目一",value:"shanghai"}}),t._v(" "),a("el-option",{attrs:{label:"项目二",value:"beijing"}})],1)],1)]),t._v(" "),a("div",{staticClass:"ls-box"},[a("div",[t.isCreate?a("add-project",{on:{close:function(e){t.isCreate=!1}}}):t._e()],1),t._v(" "),a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:21}},[a("el-card",{staticStyle:{height:"300px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"ls-datashow"},[a("span",{staticStyle:{"font-size":"28px"}},[t._v("数据概览")])]),t._v(" "),a("div",{staticClass:"content"},[a("span",{staticClass:"logo",staticStyle:{color:"rgb(164,204,100)"}},[a("i",{staticClass:"el-icon-document-copy"})]),t._v(" "),a("span",{staticStyle:{"font-size":"26px"}},[t._v(t._s(t.contractDashboardData.contractCount))]),t._v(" "),a("span",[t._v("个")]),t._v(" "),a("span",{staticStyle:{"font-size":"14px"}},[t._v("总合同数")])]),t._v(" "),a("div",{staticClass:"content"},[a("span",{staticClass:"logo",staticStyle:{color:"rgb(0,183,255)"}},[a("i",{staticClass:"el-icon-document-checked"})]),t._v(" "),a("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(t.contractDashboardData.contractCount))]),t._v(" "),a("span",[t._v("个")]),t._v(" "),a("span",{staticStyle:{"font-size":"14px"}},[t._v("完成合同数")])]),t._v(" "),a("div",{staticClass:"content"},[a("span",{staticClass:"logo",staticStyle:{color:"rgb(226,100,115)"}},[a("i",{staticClass:"el-icon-money"})]),t._v(" "),a("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(t.contractDashboardData.waitPayment))]),t._v(" "),a("span",[t._v("元")]),t._v(" "),a("span",{staticStyle:{"font-size":"14px"}},[t._v("预计付款金额")])]),t._v(" "),a("div",{staticClass:"content"},[a("span",{staticClass:"logo",staticStyle:{color:"rgb(205,205,73)"}},[a("i",{staticClass:"el-icon-bank-card"})]),t._v(" "),a("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(t.contractDashboardData.cumulativePayment))]),t._v(" "),a("span",[t._v("元")]),t._v(" "),a("span",{staticStyle:{"font-size":"14px"}},[t._v("总支付累计付款金额")])])])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-card",{staticStyle:{height:"300px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"ls-datashow"},[a("span",{staticStyle:{"font-size":"28px"}},[t._v("人员上线率")])]),t._v(" "),a("el-progress",{staticStyle:{margin:"30px 0 0 0"},attrs:{percentage:t.onlineOfflineRate,type:"circle"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{margin:"10px 0 0 0"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:16}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticStyle:{width:"100%",height:"300px"},attrs:{id:"axismain"}})])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"table-title"},[a("span",[t._v("参与的企业")]),t._v(" "),a("span",{staticStyle:{float:"right",display:"inline-block"}},[t._v("16 个")])]),t._v(" "),a("el-divider"),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.workbenchTableData}},[a("el-table-column",{attrs:{type:"index",label:"排名",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"a",label:"供应商",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"b",label:"合同数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"c",label:"合同金额"}})],1)],1)],1)],1)],1)],1)])},[],!1,null,"9664b72a",null);p.options.__file="index.vue";e.default=p.exports}}]);