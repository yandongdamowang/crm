(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-50eb"],{GOJo:function(t,a,e){"use strict";var n=e("h3LT");e.n(n).a},"J+AY":function(t,a,e){"use strict";e.r(a);var n=e("MT78"),i=e.n(n),o=e("wd/R"),s=e.n(o),r=e("SP+9"),c=e("t3Un");var l={name:"Main",components:{},filters:{},data:function(){return{datetime:["2020-01-01","2020-05-29"],echartXData:[],echartPrepaymentItemData:[],echartPaymentItemData:[],headerGrep:{project:"",type:[]},contractDashboardData:{},workbenchTableData:[{a:"中核华兴工程有限公司",b:"24",c:"1,284"},{a:"中核华兴工程有限公司",b:"24",c:"1,284"},{a:"中核华兴工程有限公司",b:"24",c:"1,284"}]}},computed:{},watch:{datetime:function(t){this.retriveContractDashboard()}},mounted:function(){this.retriveContractDashboard(),this.retrivePrepaymentReport(),this.retrivePaymentReport()},methods:{getDate:function(t){var a=parseInt(s()().format("d"));"day"==t?this.datetime=[s()().format("YYYY-MM-DD"),s()().format("YYYY-MM-DD")]:"week"==t?this.datetime=[s()().subtract(a-1,"days").format("YYYY-MM-DD"),s()().add(7-a,"days").format("YYYY-MM-DD")]:"month"==t&&(this.datetime=[s()().add("month",0).format("YYYY-MM")+"-01",s()(s()().add("month",0).format("YYYY-MM")+"-01").add("month",1).add("days",-1).format("YYYY-MM-DD")])},retrivePrepaymentReport:function(){var t=this,a=[],e=[];(function(t){return Object(c.a)({url:"pmpContractPayment/paymentReport",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})})({startTime:this.datetime[0],endTime:this.datetime[1]}).then(function(n){console.log("retrivePrepaymentReport",n),n.dashboard.forEach(function(t,n){a.push(t.paymentNode),e.push(t.money)}),t.echartXData=a,t.echartPrepaymentItemData=e,t.initAxis()}).catch(function(t){console.log(t)})},retrivePaymentReport:function(){var t=this,a=[],e=[];(function(t){return Object(c.a)({url:"pmpContractPaymentRecord/paymentReport",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})})({startTime:this.datetime[0],endTime:this.datetime[1]}).then(function(n){console.log("paymentReport",n),n.dashboard.forEach(function(t,n){a.push(t.paymentTime),e.push(t.practicaAdvanced)}),t.echartXData=a,t.echartPaymentItemData=e,t.initAxis()}).catch(function(t){console.log(t)})},retriveContractDashboard:function(){var t=this;Object(r.e)({startTime:this.datetime[0],endTime:this.datetime[1]}).then(function(a){t.contractDashboardData=a}).catch(function(){})},initAxis:function(){console.log("initAxis",this.echartXData);var t=i.a.init(document.getElementById("axismain")),a={title:{text:"付款金额对比",textStyle:{fontWeight:"normal",fontSize:16}},grid:{top:"80px",left:"10px",bottom:"10px",containLabel:!0,borderColor:"red"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["预付款","付款"],icon:"circle",itemWidth:10,itemHeight:10,itemGap:40},series:[{name:"预付款",type:"line",yAxisIndex:0,color:"#0097F5",data:this.echartPrepaymentItemData},{name:"付款",type:"line",yAxisIndex:0,color:"#52C41A",data:this.echartPaymentItemData}],xAxis:[{type:"category",name:"时间",data:this.echartXData,axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!1}}],yAxis:[{type:"value",name:"金额",data:[],axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD",formatter:"{value} 元"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!1}}]};t.setOption(a,!0),this.axisOption=a,this.axisChart=t}}},d=(e("GOJo"),e("KHd+")),p=Object(d.a)(l,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{height:"100%"}},[e("div",{staticClass:"ls-header"},[t._v("\n    仪表盘\n    "),e("div",{staticClass:"ls-header-r"},[e("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.datetime,callback:function(a){t.datetime=a},expression:"datetime"}})],1),t._v(" "),e("div",{staticClass:"ls-header-r"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){t.getDate("day")}}},[t._v("今日")]),t._v(" "),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){t.getDate("week")}}},[t._v("本周")]),t._v(" "),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){t.getDate("month")}}},[t._v("本月")])],1),t._v(" "),e("div",{staticClass:"ls-header-r"},[e("el-select",{attrs:{placeholder:"选择项目"},model:{value:t.headerGrep.project,callback:function(a){t.$set(t.headerGrep,"project",a)},expression:"headerGrep.project"}},[e("el-option",{attrs:{label:"项目一",value:"shanghai"}}),t._v(" "),e("el-option",{attrs:{label:"项目二",value:"beijing"}})],1)],1)]),t._v(" "),e("div",{staticClass:"ls-box"},[e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{staticClass:"ls-datashow"},[e("span",{staticStyle:{"font-size":"28px"}},[t._v("数据概览")])]),t._v(" "),e("div",{staticClass:"content"},[e("span",{staticClass:"logo",staticStyle:{color:"rgb(164,204,100)"}},[e("i",{staticClass:"el-icon-document-copy"})]),t._v(" "),e("span",{staticStyle:{"font-size":"26px"}},[t._v(t._s(t.contractDashboardData.contractCount))]),t._v(" "),e("span",[t._v("个")]),t._v(" "),e("span",{staticStyle:{"font-size":"14px"}},[t._v("总合同数")])]),t._v(" "),e("div",{staticClass:"content"},[e("span",{staticClass:"logo",staticStyle:{color:"rgb(0,183,255)"}},[e("i",{staticClass:"el-icon-document-checked"})]),t._v(" "),e("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(t.contractDashboardData.contractCount))]),t._v(" "),e("span",[t._v("个")]),t._v(" "),e("span",{staticStyle:{"font-size":"14px"}},[t._v("完成合同数")])]),t._v(" "),e("div",{staticClass:"content"},[e("span",{staticClass:"logo",staticStyle:{color:"rgb(226,100,115)"}},[e("i",{staticClass:"el-icon-money"})]),t._v(" "),e("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(t.contractDashboardData.waitPayment))]),t._v(" "),e("span",[t._v("元")]),t._v(" "),e("span",{staticStyle:{"font-size":"14px"}},[t._v("预计付款金额")])]),t._v(" "),e("div",{staticClass:"content"},[e("span",{staticClass:"logo",staticStyle:{color:"rgb(205,205,73)"}},[e("i",{staticClass:"el-icon-bank-card"})]),t._v(" "),e("span",{staticStyle:{"font-size":"30px"}},[t._v(t._s(t.contractDashboardData.cumulativePayment))]),t._v(" "),e("span",[t._v("元")]),t._v(" "),e("span",{staticStyle:{"font-size":"14px"}},[t._v("总支付累计付款金额")])])])],1)],1),t._v(" "),e("div",{staticStyle:{margin:"10px 0 0 0"}},[e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:16}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{staticStyle:{width:"100%",height:"300px"},attrs:{id:"axismain"}})])],1),t._v(" "),e("el-col",{attrs:{span:8}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{staticClass:"table-title"},[e("span",[t._v("参与的企业")]),t._v(" "),e("span",{staticStyle:{float:"right",display:"inline-block"}},[t._v("16 个")])]),t._v(" "),e("el-divider"),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.workbenchTableData}},[e("el-table-column",{attrs:{type:"index",label:"排名",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"a",label:"供应商",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{prop:"b",label:"合同数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"c",label:"合同金额"}})],1)],1)],1)],1)],1)],1)])},[],!1,null,"6eba355b",null);p.options.__file="Main.vue";a.default=p.exports},"SP+9":function(t,a,e){"use strict";e.d(a,"d",function(){return i}),e.d(a,"c",function(){return o}),e.d(a,"b",function(){return s}),e.d(a,"a",function(){return r}),e.d(a,"f",function(){return c}),e.d(a,"e",function(){return l});var n=e("t3Un");function i(t){return Object(n.a)({url:"pmpContract/queryList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(t){return Object(n.a)({url:"pmpContract/queryById",method:"post",data:t})}function s(t){return Object(n.a)({url:"pmpContract/delete",method:"post",data:t})}function r(t){return Object(n.a)({url:"pmpContract/add",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(t){return Object(n.a)({url:"pmpContractPayment/queryPaymentByMonthly",method:"post",data:t})}function l(t){return Object(n.a)({url:"pmpContract/contractDashboard",method:"post",data:t})}},h3LT:function(t,a,e){}}]);